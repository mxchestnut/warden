{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],
  "description": "Renovate configuration for Warden - Auto-updates dependencies via PRs",
  "timezone": "America/New_York",
  "schedule": [
    "before 5am on monday"
  ],
  "labels": [
    "dependencies",
    "renovate"
  ],
  "assignees": [
    "@me"
  ],
  "prConcurrentLimit": 5,
  "prHourlyLimit": 2,
  "packageRules": [
    {
      "description": "Group all non-major updates together",
      "matchUpdateTypes": [
        "minor",
        "patch",
        "pin",
        "digest"
      ],
      "groupName": "all non-major dependencies",
      "groupSlug": "all-minor-patch"
    },
    {
      "description": "Automerge non-major updates after CI passes",
      "matchUpdateTypes": [
        "minor",
        "patch",
        "pin",
        "digest"
      ],
      "automerge": true,
      "automergeType": "pr",
      "automergeStrategy": "squash",
      "platformAutomerge": true
    },
    {
      "description": "Keep Zod at current version (per user request)",
      "matchPackageNames": [
        "zod"
      ],
      "enabled": false
    },
    {
      "description": "Keep TipTap at v2 (v3 has breaking changes)",
      "matchPackagePatterns": [
        "^@tiptap/"
      ],
      "allowedVersions": "^2.0.0"
    },
    {
      "description": "Major version updates - create separate PRs for review",
      "matchUpdateTypes": [
        "major"
      ],
      "groupName": null,
      "automerge": false,
      "labels": [
        "dependencies",
        "major-update",
        "review-required"
      ],
      "reviewers": [
        "@me"
      ]
    },
    {
      "description": "Security updates - automerge and high priority",
      "matchDatasources": [
        "npm"
      ],
      "matchUpdateTypes": [
        "patch"
      ],
      "matchCurrentVersion": "!/^0/",
      "stabilityDays": 0,
      "labels": [
        "security",
        "dependencies"
      ],
      "automerge": true,
      "prPriority": 10
    },
    {
      "description": "React ecosystem - group together",
      "matchPackagePatterns": [
        "^react",
        "^@types/react"
      ],
      "groupName": "React ecosystem"
    },
    {
      "description": "Vite and related tools",
      "matchPackagePatterns": [
        "^vite",
        "^@vitejs/"
      ],
      "groupName": "Vite ecosystem"
    },
    {
      "description": "Testing packages",
      "matchPackagePatterns": [
        "vitest",
        "@testing-library/",
        "@playwright/",
        "playwright"
      ],
      "groupName": "Testing packages"
    },
    {
      "description": "ESLint and Prettier",
      "matchPackagePatterns": [
        "eslint",
        "prettier",
        "@typescript-eslint/"
      ],
      "groupName": "Linting & formatting"
    },
    {
      "description": "TypeScript - separate PR for major versions",
      "matchPackageNames": [
        "typescript"
      ],
      "groupName": null
    },
    {
      "description": "Node.js types - keep in sync with Node version",
      "matchPackageNames": [
        "@types/node"
      ],
      "allowedVersions": "^22.0.0"
    }
  ],
  "vulnerabilityAlerts": {
    "labels": [
      "security",
      "urgent"
    ],
    "assignees": [
      "@me"
    ],
    "reviewers": [
      "@me"
    ],
    "prPriority": 20
  },
  "lockFileMaintenance": {
    "enabled": true,
    "schedule": [
      "before 3am on the first day of the month"
    ],
    "commitMessageAction": "Update",
    "automerge": true
  },
  "rangeStrategy": "bump",
  "semanticCommits": "enabled",
  "commitMessagePrefix": "⬆️",
  "commitMessageTopic": "{{depName}}",
  "commitMessageExtra": "to {{newVersion}}",
  "prTitle": "⬆️ Update {{depName}} to {{newVersion}}",
  "prBodyColumns": [
    "Package",
    "Change",
    "Age",
    "Adoption",
    "Passing",
    "Confidence"
  ],
  "prBodyDefinitions": {
    "Age": "[![age](https://developer.mend.io/api/mc/badges/age/{{datasource}}/{{depName}}/{{newVersion}}?slim=true)](https://docs.renovatebot.com/merge-confidence/)",
    "Adoption": "[![adoption](https://developer.mend.io/api/mc/badges/adoption/{{datasource}}/{{depName}}/{{newVersion}}?slim=true)](https://docs.renovatebot.com/merge-confidence/)",
    "Passing": "[![passing](https://developer.mend.io/api/mc/badges/compatibility/{{datasource}}/{{depName}}/{{currentVersion}}/{{newVersion}}?slim=true)](https://docs.renovatebot.com/merge-confidence/)",
    "Confidence": "[![confidence](https://developer.mend.io/api/mc/badges/confidence/{{datasource}}/{{depName}}/{{currentVersion}}/{{newVersion}}?slim=true)](https://docs.renovatebot.com/merge-confidence/)"
  },
  "ignoreDeps": [],
  "ignorePaths": [
    "**/node_modules/**",
    "**/dist/**",
    "**/build/**"
  ]
}
