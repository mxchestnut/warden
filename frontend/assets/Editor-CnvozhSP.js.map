{"version":3,"file":"Editor-CnvozhSP.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/align-center.js","../../../node_modules/lucide-react/dist/esm/icons/align-left.js","../../../node_modules/lucide-react/dist/esm/icons/align-right.js","../../../node_modules/lucide-react/dist/esm/icons/bold.js","../../../node_modules/lucide-react/dist/esm/icons/check-square.js","../../../node_modules/lucide-react/dist/esm/icons/code.js","../../../node_modules/lucide-react/dist/esm/icons/heading-1.js","../../../node_modules/lucide-react/dist/esm/icons/heading-2.js","../../../node_modules/lucide-react/dist/esm/icons/heading-3.js","../../../node_modules/lucide-react/dist/esm/icons/highlighter.js","../../../node_modules/lucide-react/dist/esm/icons/italic.js","../../../node_modules/lucide-react/dist/esm/icons/list-ordered.js","../../../node_modules/lucide-react/dist/esm/icons/quote.js","../../../node_modules/lucide-react/dist/esm/icons/redo.js","../../../node_modules/lucide-react/dist/esm/icons/strikethrough.js","../../../node_modules/lucide-react/dist/esm/icons/undo.js","../../../node_modules/@tiptap/extension-image/dist/index.js","../../../node_modules/prosemirror-tables/dist/index.js","../../../node_modules/@tiptap/extension-table/dist/index.js","../../../node_modules/@tiptap/extension-table-row/dist/index.js","../../../node_modules/@tiptap/extension-table-cell/dist/index.js","../../../node_modules/@tiptap/extension-table-header/dist/index.js","../../../node_modules/@tiptap/extension-task-list/dist/index.js","../../../node_modules/@tiptap/extension-task-item/dist/index.js","../../../node_modules/@tiptap/extension-highlight/dist/index.js","../../../node_modules/@tiptap/extension-text-align/dist/index.js","../../../node_modules/@tiptap/extension-subscript/dist/index.js","../../../node_modules/@tiptap/extension-superscript/dist/index.js","../../src/components/Editor.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlignCenter = createLucideIcon(\"AlignCenter\", [\n  [\"line\", { x1: \"21\", x2: \"3\", y1: \"6\", y2: \"6\", key: \"1fp77t\" }],\n  [\"line\", { x1: \"17\", x2: \"7\", y1: \"12\", y2: \"12\", key: \"rsh8ii\" }],\n  [\"line\", { x1: \"19\", x2: \"5\", y1: \"18\", y2: \"18\", key: \"1t0tuv\" }]\n]);\n\nexport { AlignCenter as default };\n//# sourceMappingURL=align-center.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlignLeft = createLucideIcon(\"AlignLeft\", [\n  [\"line\", { x1: \"21\", x2: \"3\", y1: \"6\", y2: \"6\", key: \"1fp77t\" }],\n  [\"line\", { x1: \"15\", x2: \"3\", y1: \"12\", y2: \"12\", key: \"v6grx8\" }],\n  [\"line\", { x1: \"17\", x2: \"3\", y1: \"18\", y2: \"18\", key: \"1awlsn\" }]\n]);\n\nexport { AlignLeft as default };\n//# sourceMappingURL=align-left.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlignRight = createLucideIcon(\"AlignRight\", [\n  [\"line\", { x1: \"21\", x2: \"3\", y1: \"6\", y2: \"6\", key: \"1fp77t\" }],\n  [\"line\", { x1: \"21\", x2: \"9\", y1: \"12\", y2: \"12\", key: \"1uyos4\" }],\n  [\"line\", { x1: \"21\", x2: \"7\", y1: \"18\", y2: \"18\", key: \"1g9eri\" }]\n]);\n\nexport { AlignRight as default };\n//# sourceMappingURL=align-right.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bold = createLucideIcon(\"Bold\", [\n  [\"path\", { d: \"M14 12a4 4 0 0 0 0-8H6v8\", key: \"v2sylx\" }],\n  [\"path\", { d: \"M15 20a4 4 0 0 0 0-8H6v8Z\", key: \"1ef5ya\" }]\n]);\n\nexport { Bold as default };\n//# sourceMappingURL=bold.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckSquare = createLucideIcon(\"CheckSquare\", [\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }],\n  [\"path\", { d: \"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11\", key: \"1jnkn4\" }]\n]);\n\nexport { CheckSquare as default };\n//# sourceMappingURL=check-square.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Code = createLucideIcon(\"Code\", [\n  [\"polyline\", { points: \"16 18 22 12 16 6\", key: \"z7tu5w\" }],\n  [\"polyline\", { points: \"8 6 2 12 8 18\", key: \"1eg1df\" }]\n]);\n\nexport { Code as default };\n//# sourceMappingURL=code.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Heading1 = createLucideIcon(\"Heading1\", [\n  [\"path\", { d: \"M4 12h8\", key: \"17cfdx\" }],\n  [\"path\", { d: \"M4 18V6\", key: \"1rz3zl\" }],\n  [\"path\", { d: \"M12 18V6\", key: \"zqpxq5\" }],\n  [\"path\", { d: \"m17 12 3-2v8\", key: \"1hhhft\" }]\n]);\n\nexport { Heading1 as default };\n//# sourceMappingURL=heading-1.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Heading2 = createLucideIcon(\"Heading2\", [\n  [\"path\", { d: \"M4 12h8\", key: \"17cfdx\" }],\n  [\"path\", { d: \"M4 18V6\", key: \"1rz3zl\" }],\n  [\"path\", { d: \"M12 18V6\", key: \"zqpxq5\" }],\n  [\"path\", { d: \"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1\", key: \"9jr5yi\" }]\n]);\n\nexport { Heading2 as default };\n//# sourceMappingURL=heading-2.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Heading3 = createLucideIcon(\"Heading3\", [\n  [\"path\", { d: \"M4 12h8\", key: \"17cfdx\" }],\n  [\"path\", { d: \"M4 18V6\", key: \"1rz3zl\" }],\n  [\"path\", { d: \"M12 18V6\", key: \"zqpxq5\" }],\n  [\"path\", { d: \"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2\", key: \"68ncm8\" }],\n  [\"path\", { d: \"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2\", key: \"1ejuhz\" }]\n]);\n\nexport { Heading3 as default };\n//# sourceMappingURL=heading-3.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Highlighter = createLucideIcon(\"Highlighter\", [\n  [\"path\", { d: \"m9 11-6 6v3h9l3-3\", key: \"1a3l36\" }],\n  [\"path\", { d: \"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4\", key: \"14a9rk\" }]\n]);\n\nexport { Highlighter as default };\n//# sourceMappingURL=highlighter.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Italic = createLucideIcon(\"Italic\", [\n  [\"line\", { x1: \"19\", x2: \"10\", y1: \"4\", y2: \"4\", key: \"15jd3p\" }],\n  [\"line\", { x1: \"14\", x2: \"5\", y1: \"20\", y2: \"20\", key: \"bu0au3\" }],\n  [\"line\", { x1: \"15\", x2: \"9\", y1: \"4\", y2: \"20\", key: \"uljnxc\" }]\n]);\n\nexport { Italic as default };\n//# sourceMappingURL=italic.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ListOrdered = createLucideIcon(\"ListOrdered\", [\n  [\"line\", { x1: \"10\", x2: \"21\", y1: \"6\", y2: \"6\", key: \"76qw6h\" }],\n  [\"line\", { x1: \"10\", x2: \"21\", y1: \"12\", y2: \"12\", key: \"16nom4\" }],\n  [\"line\", { x1: \"10\", x2: \"21\", y1: \"18\", y2: \"18\", key: \"u3jurt\" }],\n  [\"path\", { d: \"M4 6h1v4\", key: \"cnovpq\" }],\n  [\"path\", { d: \"M4 10h2\", key: \"16xx2s\" }],\n  [\"path\", { d: \"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1\", key: \"m9a95d\" }]\n]);\n\nexport { ListOrdered as default };\n//# sourceMappingURL=list-ordered.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Quote = createLucideIcon(\"Quote\", [\n  [\n    \"path\",\n    {\n      d: \"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z\",\n      key: \"4rm80e\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z\",\n      key: \"10za9r\"\n    }\n  ]\n]);\n\nexport { Quote as default };\n//# sourceMappingURL=quote.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Redo = createLucideIcon(\"Redo\", [\n  [\"path\", { d: \"M21 7v6h-6\", key: \"3ptur4\" }],\n  [\"path\", { d: \"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7\", key: \"1kgawr\" }]\n]);\n\nexport { Redo as default };\n//# sourceMappingURL=redo.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Strikethrough = createLucideIcon(\"Strikethrough\", [\n  [\"path\", { d: \"M16 4H9a3 3 0 0 0-2.83 4\", key: \"43sutm\" }],\n  [\"path\", { d: \"M14 12a4 4 0 0 1 0 8H6\", key: \"nlfj13\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"12\", y2: \"12\", key: \"1e0a9i\" }]\n]);\n\nexport { Strikethrough as default };\n//# sourceMappingURL=strikethrough.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Undo = createLucideIcon(\"Undo\", [\n  [\"path\", { d: \"M3 7v6h6\", key: \"1v2h90\" }],\n  [\"path\", { d: \"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13\", key: \"1r6uu6\" }]\n]);\n\nexport { Undo as default };\n//# sourceMappingURL=undo.js.map\n","// src/image.ts\nimport { mergeAttributes, Node, nodeInputRule, ResizableNodeView } from \"@tiptap/core\";\nvar inputRegex = /(?:^|\\s)(!\\[(.+|:?)]\\((\\S+)(?:(?:\\s+)[\"'](\\S+)[\"'])?\\))$/;\nvar Image = Node.create({\n  name: \"image\",\n  addOptions() {\n    return {\n      inline: false,\n      allowBase64: false,\n      HTMLAttributes: {},\n      resize: false\n    };\n  },\n  inline() {\n    return this.options.inline;\n  },\n  group() {\n    return this.options.inline ? \"inline\" : \"block\";\n  },\n  draggable: true,\n  addAttributes() {\n    return {\n      src: {\n        default: null\n      },\n      alt: {\n        default: null\n      },\n      title: {\n        default: null\n      },\n      width: {\n        default: null\n      },\n      height: {\n        default: null\n      }\n    };\n  },\n  parseHTML() {\n    return [\n      {\n        tag: this.options.allowBase64 ? \"img[src]\" : 'img[src]:not([src^=\"data:\"])'\n      }\n    ];\n  },\n  renderHTML({ HTMLAttributes }) {\n    return [\"img\", mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)];\n  },\n  parseMarkdown: (token, helpers) => {\n    return helpers.createNode(\"image\", {\n      src: token.href,\n      title: token.title,\n      alt: token.text\n    });\n  },\n  renderMarkdown: (node) => {\n    var _a, _b, _c, _d, _e, _f;\n    const src = (_b = (_a = node.attrs) == null ? void 0 : _a.src) != null ? _b : \"\";\n    const alt = (_d = (_c = node.attrs) == null ? void 0 : _c.alt) != null ? _d : \"\";\n    const title = (_f = (_e = node.attrs) == null ? void 0 : _e.title) != null ? _f : \"\";\n    return title ? `![${alt}](${src} \"${title}\")` : `![${alt}](${src})`;\n  },\n  addNodeView() {\n    if (!this.options.resize || !this.options.resize.enabled || typeof document === \"undefined\") {\n      return null;\n    }\n    const { directions, minWidth, minHeight, alwaysPreserveAspectRatio } = this.options.resize;\n    return ({ node, getPos, HTMLAttributes, editor }) => {\n      const el = document.createElement(\"img\");\n      Object.entries(HTMLAttributes).forEach(([key, value]) => {\n        if (value != null) {\n          switch (key) {\n            case \"width\":\n            case \"height\":\n              break;\n            default:\n              el.setAttribute(key, value);\n              break;\n          }\n        }\n      });\n      el.src = HTMLAttributes.src;\n      const nodeView = new ResizableNodeView({\n        element: el,\n        editor,\n        node,\n        getPos,\n        onResize: (width, height) => {\n          el.style.width = `${width}px`;\n          el.style.height = `${height}px`;\n        },\n        onCommit: (width, height) => {\n          const pos = getPos();\n          if (pos === void 0) {\n            return;\n          }\n          this.editor.chain().setNodeSelection(pos).updateAttributes(this.name, {\n            width,\n            height\n          }).run();\n        },\n        onUpdate: (updatedNode, _decorations, _innerDecorations) => {\n          if (updatedNode.type !== node.type) {\n            return false;\n          }\n          return true;\n        },\n        options: {\n          directions,\n          min: {\n            width: minWidth,\n            height: minHeight\n          },\n          preserveAspectRatio: alwaysPreserveAspectRatio === true\n        }\n      });\n      const dom = nodeView.dom;\n      dom.style.visibility = \"hidden\";\n      dom.style.pointerEvents = \"none\";\n      el.onload = () => {\n        dom.style.visibility = \"\";\n        dom.style.pointerEvents = \"\";\n      };\n      return nodeView;\n    };\n  },\n  addCommands() {\n    return {\n      setImage: (options) => ({ commands }) => {\n        return commands.insertContent({\n          type: this.name,\n          attrs: options\n        });\n      }\n    };\n  },\n  addInputRules() {\n    return [\n      nodeInputRule({\n        find: inputRegex,\n        type: this.type,\n        getAttributes: (match) => {\n          const [, , alt, src, title] = match;\n          return { src, alt, title };\n        }\n      })\n    ];\n  }\n});\n\n// src/index.ts\nvar index_default = Image;\nexport {\n  Image,\n  index_default as default,\n  inputRegex\n};\n//# sourceMappingURL=index.js.map","import { NodeSelection, Plugin, PluginKey, Selection, SelectionRange, TextSelection } from \"prosemirror-state\";\nimport { Fragment, Slice } from \"prosemirror-model\";\nimport { Decoration, DecorationSet } from \"prosemirror-view\";\nimport { keydownHandler } from \"prosemirror-keymap\";\nimport { Transform } from \"prosemirror-transform\";\n\n//#region src/tablemap.ts\nlet readFromCache;\nlet addToCache;\nif (typeof WeakMap != \"undefined\") {\n\tlet cache = /* @__PURE__ */ new WeakMap();\n\treadFromCache = (key) => cache.get(key);\n\taddToCache = (key, value) => {\n\t\tcache.set(key, value);\n\t\treturn value;\n\t};\n} else {\n\tconst cache = [];\n\tconst cacheSize = 10;\n\tlet cachePos = 0;\n\treadFromCache = (key) => {\n\t\tfor (let i = 0; i < cache.length; i += 2) if (cache[i] == key) return cache[i + 1];\n\t};\n\taddToCache = (key, value) => {\n\t\tif (cachePos == cacheSize) cachePos = 0;\n\t\tcache[cachePos++] = key;\n\t\treturn cache[cachePos++] = value;\n\t};\n}\n/**\n* A table map describes the structure of a given table. To avoid\n* recomputing them all the time, they are cached per table node. To\n* be able to do that, positions saved in the map are relative to the\n* start of the table, rather than the start of the document.\n*\n* @public\n*/\nvar TableMap = class {\n\tconstructor(width, height, map, problems) {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.map = map;\n\t\tthis.problems = problems;\n\t}\n\tfindCell(pos) {\n\t\tfor (let i = 0; i < this.map.length; i++) {\n\t\t\tconst curPos = this.map[i];\n\t\t\tif (curPos != pos) continue;\n\t\t\tconst left = i % this.width;\n\t\t\tconst top = i / this.width | 0;\n\t\t\tlet right = left + 1;\n\t\t\tlet bottom = top + 1;\n\t\t\tfor (let j = 1; right < this.width && this.map[i + j] == curPos; j++) right++;\n\t\t\tfor (let j = 1; bottom < this.height && this.map[i + this.width * j] == curPos; j++) bottom++;\n\t\t\treturn {\n\t\t\t\tleft,\n\t\t\t\ttop,\n\t\t\t\tright,\n\t\t\t\tbottom\n\t\t\t};\n\t\t}\n\t\tthrow new RangeError(`No cell with offset ${pos} found`);\n\t}\n\tcolCount(pos) {\n\t\tfor (let i = 0; i < this.map.length; i++) if (this.map[i] == pos) return i % this.width;\n\t\tthrow new RangeError(`No cell with offset ${pos} found`);\n\t}\n\tnextCell(pos, axis, dir) {\n\t\tconst { left, right, top, bottom } = this.findCell(pos);\n\t\tif (axis == \"horiz\") {\n\t\t\tif (dir < 0 ? left == 0 : right == this.width) return null;\n\t\t\treturn this.map[top * this.width + (dir < 0 ? left - 1 : right)];\n\t\t} else {\n\t\t\tif (dir < 0 ? top == 0 : bottom == this.height) return null;\n\t\t\treturn this.map[left + this.width * (dir < 0 ? top - 1 : bottom)];\n\t\t}\n\t}\n\trectBetween(a, b) {\n\t\tconst { left: leftA, right: rightA, top: topA, bottom: bottomA } = this.findCell(a);\n\t\tconst { left: leftB, right: rightB, top: topB, bottom: bottomB } = this.findCell(b);\n\t\treturn {\n\t\t\tleft: Math.min(leftA, leftB),\n\t\t\ttop: Math.min(topA, topB),\n\t\t\tright: Math.max(rightA, rightB),\n\t\t\tbottom: Math.max(bottomA, bottomB)\n\t\t};\n\t}\n\tcellsInRect(rect) {\n\t\tconst result = [];\n\t\tconst seen = {};\n\t\tfor (let row = rect.top; row < rect.bottom; row++) for (let col = rect.left; col < rect.right; col++) {\n\t\t\tconst index = row * this.width + col;\n\t\t\tconst pos = this.map[index];\n\t\t\tif (seen[pos]) continue;\n\t\t\tseen[pos] = true;\n\t\t\tif (col == rect.left && col && this.map[index - 1] == pos || row == rect.top && row && this.map[index - this.width] == pos) continue;\n\t\t\tresult.push(pos);\n\t\t}\n\t\treturn result;\n\t}\n\tpositionAt(row, col, table) {\n\t\tfor (let i = 0, rowStart = 0;; i++) {\n\t\t\tconst rowEnd = rowStart + table.child(i).nodeSize;\n\t\t\tif (i == row) {\n\t\t\t\tlet index = col + row * this.width;\n\t\t\t\tconst rowEndIndex = (row + 1) * this.width;\n\t\t\t\twhile (index < rowEndIndex && this.map[index] < rowStart) index++;\n\t\t\t\treturn index == rowEndIndex ? rowEnd - 1 : this.map[index];\n\t\t\t}\n\t\t\trowStart = rowEnd;\n\t\t}\n\t}\n\tstatic get(table) {\n\t\treturn readFromCache(table) || addToCache(table, computeMap(table));\n\t}\n};\nfunction computeMap(table) {\n\tif (table.type.spec.tableRole != \"table\") throw new RangeError(\"Not a table node: \" + table.type.name);\n\tconst width = findWidth(table), height = table.childCount;\n\tconst map = [];\n\tlet mapPos = 0;\n\tlet problems = null;\n\tconst colWidths = [];\n\tfor (let i = 0, e = width * height; i < e; i++) map[i] = 0;\n\tfor (let row = 0, pos = 0; row < height; row++) {\n\t\tconst rowNode = table.child(row);\n\t\tpos++;\n\t\tfor (let i = 0;; i++) {\n\t\t\twhile (mapPos < map.length && map[mapPos] != 0) mapPos++;\n\t\t\tif (i == rowNode.childCount) break;\n\t\t\tconst cellNode = rowNode.child(i);\n\t\t\tconst { colspan, rowspan, colwidth } = cellNode.attrs;\n\t\t\tfor (let h = 0; h < rowspan; h++) {\n\t\t\t\tif (h + row >= height) {\n\t\t\t\t\t(problems || (problems = [])).push({\n\t\t\t\t\t\ttype: \"overlong_rowspan\",\n\t\t\t\t\t\tpos,\n\t\t\t\t\t\tn: rowspan - h\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tconst start = mapPos + h * width;\n\t\t\t\tfor (let w = 0; w < colspan; w++) {\n\t\t\t\t\tif (map[start + w] == 0) map[start + w] = pos;\n\t\t\t\t\telse (problems || (problems = [])).push({\n\t\t\t\t\t\ttype: \"collision\",\n\t\t\t\t\t\trow,\n\t\t\t\t\t\tpos,\n\t\t\t\t\t\tn: colspan - w\n\t\t\t\t\t});\n\t\t\t\t\tconst colW = colwidth && colwidth[w];\n\t\t\t\t\tif (colW) {\n\t\t\t\t\t\tconst widthIndex = (start + w) % width * 2, prev = colWidths[widthIndex];\n\t\t\t\t\t\tif (prev == null || prev != colW && colWidths[widthIndex + 1] == 1) {\n\t\t\t\t\t\t\tcolWidths[widthIndex] = colW;\n\t\t\t\t\t\t\tcolWidths[widthIndex + 1] = 1;\n\t\t\t\t\t\t} else if (prev == colW) colWidths[widthIndex + 1]++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tmapPos += colspan;\n\t\t\tpos += cellNode.nodeSize;\n\t\t}\n\t\tconst expectedPos = (row + 1) * width;\n\t\tlet missing = 0;\n\t\twhile (mapPos < expectedPos) if (map[mapPos++] == 0) missing++;\n\t\tif (missing) (problems || (problems = [])).push({\n\t\t\ttype: \"missing\",\n\t\t\trow,\n\t\t\tn: missing\n\t\t});\n\t\tpos++;\n\t}\n\tif (width === 0 || height === 0) (problems || (problems = [])).push({ type: \"zero_sized\" });\n\tconst tableMap = new TableMap(width, height, map, problems);\n\tlet badWidths = false;\n\tfor (let i = 0; !badWidths && i < colWidths.length; i += 2) if (colWidths[i] != null && colWidths[i + 1] < height) badWidths = true;\n\tif (badWidths) findBadColWidths(tableMap, colWidths, table);\n\treturn tableMap;\n}\nfunction findWidth(table) {\n\tlet width = -1;\n\tlet hasRowSpan = false;\n\tfor (let row = 0; row < table.childCount; row++) {\n\t\tconst rowNode = table.child(row);\n\t\tlet rowWidth = 0;\n\t\tif (hasRowSpan) for (let j = 0; j < row; j++) {\n\t\t\tconst prevRow = table.child(j);\n\t\t\tfor (let i = 0; i < prevRow.childCount; i++) {\n\t\t\t\tconst cell = prevRow.child(i);\n\t\t\t\tif (j + cell.attrs.rowspan > row) rowWidth += cell.attrs.colspan;\n\t\t\t}\n\t\t}\n\t\tfor (let i = 0; i < rowNode.childCount; i++) {\n\t\t\tconst cell = rowNode.child(i);\n\t\t\trowWidth += cell.attrs.colspan;\n\t\t\tif (cell.attrs.rowspan > 1) hasRowSpan = true;\n\t\t}\n\t\tif (width == -1) width = rowWidth;\n\t\telse if (width != rowWidth) width = Math.max(width, rowWidth);\n\t}\n\treturn width;\n}\nfunction findBadColWidths(map, colWidths, table) {\n\tif (!map.problems) map.problems = [];\n\tconst seen = {};\n\tfor (let i = 0; i < map.map.length; i++) {\n\t\tconst pos = map.map[i];\n\t\tif (seen[pos]) continue;\n\t\tseen[pos] = true;\n\t\tconst node = table.nodeAt(pos);\n\t\tif (!node) throw new RangeError(`No cell with offset ${pos} found`);\n\t\tlet updated = null;\n\t\tconst attrs = node.attrs;\n\t\tfor (let j = 0; j < attrs.colspan; j++) {\n\t\t\tconst colWidth = colWidths[(i + j) % map.width * 2];\n\t\t\tif (colWidth != null && (!attrs.colwidth || attrs.colwidth[j] != colWidth)) (updated || (updated = freshColWidth(attrs)))[j] = colWidth;\n\t\t}\n\t\tif (updated) map.problems.unshift({\n\t\t\ttype: \"colwidth mismatch\",\n\t\t\tpos,\n\t\t\tcolwidth: updated\n\t\t});\n\t}\n}\nfunction freshColWidth(attrs) {\n\tif (attrs.colwidth) return attrs.colwidth.slice();\n\tconst result = [];\n\tfor (let i = 0; i < attrs.colspan; i++) result.push(0);\n\treturn result;\n}\n\n//#endregion\n//#region src/schema.ts\nfunction getCellAttrs(dom, extraAttrs) {\n\tif (typeof dom === \"string\") return {};\n\tconst widthAttr = dom.getAttribute(\"data-colwidth\");\n\tconst widths = widthAttr && /^\\d+(,\\d+)*$/.test(widthAttr) ? widthAttr.split(\",\").map((s) => Number(s)) : null;\n\tconst colspan = Number(dom.getAttribute(\"colspan\") || 1);\n\tconst result = {\n\t\tcolspan,\n\t\trowspan: Number(dom.getAttribute(\"rowspan\") || 1),\n\t\tcolwidth: widths && widths.length == colspan ? widths : null\n\t};\n\tfor (const prop in extraAttrs) {\n\t\tconst getter = extraAttrs[prop].getFromDOM;\n\t\tconst value = getter && getter(dom);\n\t\tif (value != null) result[prop] = value;\n\t}\n\treturn result;\n}\nfunction setCellAttrs(node, extraAttrs) {\n\tconst attrs = {};\n\tif (node.attrs.colspan != 1) attrs.colspan = node.attrs.colspan;\n\tif (node.attrs.rowspan != 1) attrs.rowspan = node.attrs.rowspan;\n\tif (node.attrs.colwidth) attrs[\"data-colwidth\"] = node.attrs.colwidth.join(\",\");\n\tfor (const prop in extraAttrs) {\n\t\tconst setter = extraAttrs[prop].setDOMAttr;\n\t\tif (setter) setter(node.attrs[prop], attrs);\n\t}\n\treturn attrs;\n}\nfunction validateColwidth(value) {\n\tif (value === null) return;\n\tif (!Array.isArray(value)) throw new TypeError(\"colwidth must be null or an array\");\n\tfor (const item of value) if (typeof item !== \"number\") throw new TypeError(\"colwidth must be null or an array of numbers\");\n}\n/**\n* This function creates a set of [node\n* specs](http://prosemirror.net/docs/ref/#model.SchemaSpec.nodes) for\n* `table`, `table_row`, and `table_cell` nodes types as used by this\n* module. The result can then be added to the set of nodes when\n* creating a schema.\n*\n* @public\n*/\nfunction tableNodes(options) {\n\tconst extraAttrs = options.cellAttributes || {};\n\tconst cellAttrs = {\n\t\tcolspan: {\n\t\t\tdefault: 1,\n\t\t\tvalidate: \"number\"\n\t\t},\n\t\trowspan: {\n\t\t\tdefault: 1,\n\t\t\tvalidate: \"number\"\n\t\t},\n\t\tcolwidth: {\n\t\t\tdefault: null,\n\t\t\tvalidate: validateColwidth\n\t\t}\n\t};\n\tfor (const prop in extraAttrs) cellAttrs[prop] = {\n\t\tdefault: extraAttrs[prop].default,\n\t\tvalidate: extraAttrs[prop].validate\n\t};\n\treturn {\n\t\ttable: {\n\t\t\tcontent: \"table_row+\",\n\t\t\ttableRole: \"table\",\n\t\t\tisolating: true,\n\t\t\tgroup: options.tableGroup,\n\t\t\tparseDOM: [{ tag: \"table\" }],\n\t\t\ttoDOM() {\n\t\t\t\treturn [\"table\", [\"tbody\", 0]];\n\t\t\t}\n\t\t},\n\t\ttable_row: {\n\t\t\tcontent: \"(table_cell | table_header)*\",\n\t\t\ttableRole: \"row\",\n\t\t\tparseDOM: [{ tag: \"tr\" }],\n\t\t\ttoDOM() {\n\t\t\t\treturn [\"tr\", 0];\n\t\t\t}\n\t\t},\n\t\ttable_cell: {\n\t\t\tcontent: options.cellContent,\n\t\t\tattrs: cellAttrs,\n\t\t\ttableRole: \"cell\",\n\t\t\tisolating: true,\n\t\t\tparseDOM: [{\n\t\t\t\ttag: \"td\",\n\t\t\t\tgetAttrs: (dom) => getCellAttrs(dom, extraAttrs)\n\t\t\t}],\n\t\t\ttoDOM(node) {\n\t\t\t\treturn [\n\t\t\t\t\t\"td\",\n\t\t\t\t\tsetCellAttrs(node, extraAttrs),\n\t\t\t\t\t0\n\t\t\t\t];\n\t\t\t}\n\t\t},\n\t\ttable_header: {\n\t\t\tcontent: options.cellContent,\n\t\t\tattrs: cellAttrs,\n\t\t\ttableRole: \"header_cell\",\n\t\t\tisolating: true,\n\t\t\tparseDOM: [{\n\t\t\t\ttag: \"th\",\n\t\t\t\tgetAttrs: (dom) => getCellAttrs(dom, extraAttrs)\n\t\t\t}],\n\t\t\ttoDOM(node) {\n\t\t\t\treturn [\n\t\t\t\t\t\"th\",\n\t\t\t\t\tsetCellAttrs(node, extraAttrs),\n\t\t\t\t\t0\n\t\t\t\t];\n\t\t\t}\n\t\t}\n\t};\n}\n/**\n* @public\n*/\nfunction tableNodeTypes(schema) {\n\tlet result = schema.cached.tableNodeTypes;\n\tif (!result) {\n\t\tresult = schema.cached.tableNodeTypes = {};\n\t\tfor (const name in schema.nodes) {\n\t\t\tconst type = schema.nodes[name], role = type.spec.tableRole;\n\t\t\tif (role) result[role] = type;\n\t\t}\n\t}\n\treturn result;\n}\n\n//#endregion\n//#region src/util.ts\n/**\n* @public\n*/\nconst tableEditingKey = new PluginKey(\"selectingCells\");\n/**\n* @public\n*/\nfunction cellAround($pos) {\n\tfor (let d = $pos.depth - 1; d > 0; d--) if ($pos.node(d).type.spec.tableRole == \"row\") return $pos.node(0).resolve($pos.before(d + 1));\n\treturn null;\n}\nfunction cellWrapping($pos) {\n\tfor (let d = $pos.depth; d > 0; d--) {\n\t\tconst role = $pos.node(d).type.spec.tableRole;\n\t\tif (role === \"cell\" || role === \"header_cell\") return $pos.node(d);\n\t}\n\treturn null;\n}\n/**\n* @public\n*/\nfunction isInTable(state) {\n\tconst $head = state.selection.$head;\n\tfor (let d = $head.depth; d > 0; d--) if ($head.node(d).type.spec.tableRole == \"row\") return true;\n\treturn false;\n}\n/**\n* @internal\n*/\nfunction selectionCell(state) {\n\tconst sel = state.selection;\n\tif (\"$anchorCell\" in sel && sel.$anchorCell) return sel.$anchorCell.pos > sel.$headCell.pos ? sel.$anchorCell : sel.$headCell;\n\telse if (\"node\" in sel && sel.node && sel.node.type.spec.tableRole == \"cell\") return sel.$anchor;\n\tconst $cell = cellAround(sel.$head) || cellNear(sel.$head);\n\tif ($cell) return $cell;\n\tthrow new RangeError(`No cell found around position ${sel.head}`);\n}\n/**\n* @public\n*/\nfunction cellNear($pos) {\n\tfor (let after = $pos.nodeAfter, pos = $pos.pos; after; after = after.firstChild, pos++) {\n\t\tconst role = after.type.spec.tableRole;\n\t\tif (role == \"cell\" || role == \"header_cell\") return $pos.doc.resolve(pos);\n\t}\n\tfor (let before = $pos.nodeBefore, pos = $pos.pos; before; before = before.lastChild, pos--) {\n\t\tconst role = before.type.spec.tableRole;\n\t\tif (role == \"cell\" || role == \"header_cell\") return $pos.doc.resolve(pos - before.nodeSize);\n\t}\n}\n/**\n* @public\n*/\nfunction pointsAtCell($pos) {\n\treturn $pos.parent.type.spec.tableRole == \"row\" && !!$pos.nodeAfter;\n}\n/**\n* @public\n*/\nfunction moveCellForward($pos) {\n\treturn $pos.node(0).resolve($pos.pos + $pos.nodeAfter.nodeSize);\n}\n/**\n* @internal\n*/\nfunction inSameTable($cellA, $cellB) {\n\treturn $cellA.depth == $cellB.depth && $cellA.pos >= $cellB.start(-1) && $cellA.pos <= $cellB.end(-1);\n}\n/**\n* @public\n*/\nfunction findCell($pos) {\n\treturn TableMap.get($pos.node(-1)).findCell($pos.pos - $pos.start(-1));\n}\n/**\n* @public\n*/\nfunction colCount($pos) {\n\treturn TableMap.get($pos.node(-1)).colCount($pos.pos - $pos.start(-1));\n}\n/**\n* @public\n*/\nfunction nextCell($pos, axis, dir) {\n\tconst table = $pos.node(-1);\n\tconst map = TableMap.get(table);\n\tconst tableStart = $pos.start(-1);\n\tconst moved = map.nextCell($pos.pos - tableStart, axis, dir);\n\treturn moved == null ? null : $pos.node(0).resolve(tableStart + moved);\n}\n/**\n* @public\n*/\nfunction removeColSpan(attrs, pos, n = 1) {\n\tconst result = {\n\t\t...attrs,\n\t\tcolspan: attrs.colspan - n\n\t};\n\tif (result.colwidth) {\n\t\tresult.colwidth = result.colwidth.slice();\n\t\tresult.colwidth.splice(pos, n);\n\t\tif (!result.colwidth.some((w) => w > 0)) result.colwidth = null;\n\t}\n\treturn result;\n}\n/**\n* @public\n*/\nfunction addColSpan(attrs, pos, n = 1) {\n\tconst result = {\n\t\t...attrs,\n\t\tcolspan: attrs.colspan + n\n\t};\n\tif (result.colwidth) {\n\t\tresult.colwidth = result.colwidth.slice();\n\t\tfor (let i = 0; i < n; i++) result.colwidth.splice(pos, 0, 0);\n\t}\n\treturn result;\n}\n/**\n* @public\n*/\nfunction columnIsHeader(map, table, col) {\n\tconst headerCell = tableNodeTypes(table.type.schema).header_cell;\n\tfor (let row = 0; row < map.height; row++) if (table.nodeAt(map.map[col + row * map.width]).type != headerCell) return false;\n\treturn true;\n}\n\n//#endregion\n//#region src/cellselection.ts\n/**\n* A [`Selection`](http://prosemirror.net/docs/ref/#state.Selection)\n* subclass that represents a cell selection spanning part of a table.\n* With the plugin enabled, these will be created when the user\n* selects across cells, and will be drawn by giving selected cells a\n* `selectedCell` CSS class.\n*\n* @public\n*/\nvar CellSelection = class CellSelection extends Selection {\n\tconstructor($anchorCell, $headCell = $anchorCell) {\n\t\tconst table = $anchorCell.node(-1);\n\t\tconst map = TableMap.get(table);\n\t\tconst tableStart = $anchorCell.start(-1);\n\t\tconst rect = map.rectBetween($anchorCell.pos - tableStart, $headCell.pos - tableStart);\n\t\tconst doc = $anchorCell.node(0);\n\t\tconst cells = map.cellsInRect(rect).filter((p) => p != $headCell.pos - tableStart);\n\t\tcells.unshift($headCell.pos - tableStart);\n\t\tconst ranges = cells.map((pos) => {\n\t\t\tconst cell = table.nodeAt(pos);\n\t\t\tif (!cell) throw new RangeError(`No cell with offset ${pos} found`);\n\t\t\tconst from = tableStart + pos + 1;\n\t\t\treturn new SelectionRange(doc.resolve(from), doc.resolve(from + cell.content.size));\n\t\t});\n\t\tsuper(ranges[0].$from, ranges[0].$to, ranges);\n\t\tthis.$anchorCell = $anchorCell;\n\t\tthis.$headCell = $headCell;\n\t}\n\tmap(doc, mapping) {\n\t\tconst $anchorCell = doc.resolve(mapping.map(this.$anchorCell.pos));\n\t\tconst $headCell = doc.resolve(mapping.map(this.$headCell.pos));\n\t\tif (pointsAtCell($anchorCell) && pointsAtCell($headCell) && inSameTable($anchorCell, $headCell)) {\n\t\t\tconst tableChanged = this.$anchorCell.node(-1) != $anchorCell.node(-1);\n\t\t\tif (tableChanged && this.isRowSelection()) return CellSelection.rowSelection($anchorCell, $headCell);\n\t\t\telse if (tableChanged && this.isColSelection()) return CellSelection.colSelection($anchorCell, $headCell);\n\t\t\telse return new CellSelection($anchorCell, $headCell);\n\t\t}\n\t\treturn TextSelection.between($anchorCell, $headCell);\n\t}\n\tcontent() {\n\t\tconst table = this.$anchorCell.node(-1);\n\t\tconst map = TableMap.get(table);\n\t\tconst tableStart = this.$anchorCell.start(-1);\n\t\tconst rect = map.rectBetween(this.$anchorCell.pos - tableStart, this.$headCell.pos - tableStart);\n\t\tconst seen = {};\n\t\tconst rows = [];\n\t\tfor (let row = rect.top; row < rect.bottom; row++) {\n\t\t\tconst rowContent = [];\n\t\t\tfor (let index = row * map.width + rect.left, col = rect.left; col < rect.right; col++, index++) {\n\t\t\t\tconst pos = map.map[index];\n\t\t\t\tif (seen[pos]) continue;\n\t\t\t\tseen[pos] = true;\n\t\t\t\tconst cellRect = map.findCell(pos);\n\t\t\t\tlet cell = table.nodeAt(pos);\n\t\t\t\tif (!cell) throw new RangeError(`No cell with offset ${pos} found`);\n\t\t\t\tconst extraLeft = rect.left - cellRect.left;\n\t\t\t\tconst extraRight = cellRect.right - rect.right;\n\t\t\t\tif (extraLeft > 0 || extraRight > 0) {\n\t\t\t\t\tlet attrs = cell.attrs;\n\t\t\t\t\tif (extraLeft > 0) attrs = removeColSpan(attrs, 0, extraLeft);\n\t\t\t\t\tif (extraRight > 0) attrs = removeColSpan(attrs, attrs.colspan - extraRight, extraRight);\n\t\t\t\t\tif (cellRect.left < rect.left) {\n\t\t\t\t\t\tcell = cell.type.createAndFill(attrs);\n\t\t\t\t\t\tif (!cell) throw new RangeError(`Could not create cell with attrs ${JSON.stringify(attrs)}`);\n\t\t\t\t\t} else cell = cell.type.create(attrs, cell.content);\n\t\t\t\t}\n\t\t\t\tif (cellRect.top < rect.top || cellRect.bottom > rect.bottom) {\n\t\t\t\t\tconst attrs = {\n\t\t\t\t\t\t...cell.attrs,\n\t\t\t\t\t\trowspan: Math.min(cellRect.bottom, rect.bottom) - Math.max(cellRect.top, rect.top)\n\t\t\t\t\t};\n\t\t\t\t\tif (cellRect.top < rect.top) cell = cell.type.createAndFill(attrs);\n\t\t\t\t\telse cell = cell.type.create(attrs, cell.content);\n\t\t\t\t}\n\t\t\t\trowContent.push(cell);\n\t\t\t}\n\t\t\trows.push(table.child(row).copy(Fragment.from(rowContent)));\n\t\t}\n\t\tconst fragment = this.isColSelection() && this.isRowSelection() ? table : rows;\n\t\treturn new Slice(Fragment.from(fragment), 1, 1);\n\t}\n\treplace(tr, content = Slice.empty) {\n\t\tconst mapFrom = tr.steps.length, ranges = this.ranges;\n\t\tfor (let i = 0; i < ranges.length; i++) {\n\t\t\tconst { $from, $to } = ranges[i], mapping = tr.mapping.slice(mapFrom);\n\t\t\ttr.replace(mapping.map($from.pos), mapping.map($to.pos), i ? Slice.empty : content);\n\t\t}\n\t\tconst sel = Selection.findFrom(tr.doc.resolve(tr.mapping.slice(mapFrom).map(this.to)), -1);\n\t\tif (sel) tr.setSelection(sel);\n\t}\n\treplaceWith(tr, node) {\n\t\tthis.replace(tr, new Slice(Fragment.from(node), 0, 0));\n\t}\n\tforEachCell(f) {\n\t\tconst table = this.$anchorCell.node(-1);\n\t\tconst map = TableMap.get(table);\n\t\tconst tableStart = this.$anchorCell.start(-1);\n\t\tconst cells = map.cellsInRect(map.rectBetween(this.$anchorCell.pos - tableStart, this.$headCell.pos - tableStart));\n\t\tfor (let i = 0; i < cells.length; i++) f(table.nodeAt(cells[i]), tableStart + cells[i]);\n\t}\n\tisColSelection() {\n\t\tconst anchorTop = this.$anchorCell.index(-1);\n\t\tconst headTop = this.$headCell.index(-1);\n\t\tif (Math.min(anchorTop, headTop) > 0) return false;\n\t\tconst anchorBottom = anchorTop + this.$anchorCell.nodeAfter.attrs.rowspan;\n\t\tconst headBottom = headTop + this.$headCell.nodeAfter.attrs.rowspan;\n\t\treturn Math.max(anchorBottom, headBottom) == this.$headCell.node(-1).childCount;\n\t}\n\tstatic colSelection($anchorCell, $headCell = $anchorCell) {\n\t\tconst table = $anchorCell.node(-1);\n\t\tconst map = TableMap.get(table);\n\t\tconst tableStart = $anchorCell.start(-1);\n\t\tconst anchorRect = map.findCell($anchorCell.pos - tableStart);\n\t\tconst headRect = map.findCell($headCell.pos - tableStart);\n\t\tconst doc = $anchorCell.node(0);\n\t\tif (anchorRect.top <= headRect.top) {\n\t\t\tif (anchorRect.top > 0) $anchorCell = doc.resolve(tableStart + map.map[anchorRect.left]);\n\t\t\tif (headRect.bottom < map.height) $headCell = doc.resolve(tableStart + map.map[map.width * (map.height - 1) + headRect.right - 1]);\n\t\t} else {\n\t\t\tif (headRect.top > 0) $headCell = doc.resolve(tableStart + map.map[headRect.left]);\n\t\t\tif (anchorRect.bottom < map.height) $anchorCell = doc.resolve(tableStart + map.map[map.width * (map.height - 1) + anchorRect.right - 1]);\n\t\t}\n\t\treturn new CellSelection($anchorCell, $headCell);\n\t}\n\tisRowSelection() {\n\t\tconst table = this.$anchorCell.node(-1);\n\t\tconst map = TableMap.get(table);\n\t\tconst tableStart = this.$anchorCell.start(-1);\n\t\tconst anchorLeft = map.colCount(this.$anchorCell.pos - tableStart);\n\t\tconst headLeft = map.colCount(this.$headCell.pos - tableStart);\n\t\tif (Math.min(anchorLeft, headLeft) > 0) return false;\n\t\tconst anchorRight = anchorLeft + this.$anchorCell.nodeAfter.attrs.colspan;\n\t\tconst headRight = headLeft + this.$headCell.nodeAfter.attrs.colspan;\n\t\treturn Math.max(anchorRight, headRight) == map.width;\n\t}\n\teq(other) {\n\t\treturn other instanceof CellSelection && other.$anchorCell.pos == this.$anchorCell.pos && other.$headCell.pos == this.$headCell.pos;\n\t}\n\tstatic rowSelection($anchorCell, $headCell = $anchorCell) {\n\t\tconst table = $anchorCell.node(-1);\n\t\tconst map = TableMap.get(table);\n\t\tconst tableStart = $anchorCell.start(-1);\n\t\tconst anchorRect = map.findCell($anchorCell.pos - tableStart);\n\t\tconst headRect = map.findCell($headCell.pos - tableStart);\n\t\tconst doc = $anchorCell.node(0);\n\t\tif (anchorRect.left <= headRect.left) {\n\t\t\tif (anchorRect.left > 0) $anchorCell = doc.resolve(tableStart + map.map[anchorRect.top * map.width]);\n\t\t\tif (headRect.right < map.width) $headCell = doc.resolve(tableStart + map.map[map.width * (headRect.top + 1) - 1]);\n\t\t} else {\n\t\t\tif (headRect.left > 0) $headCell = doc.resolve(tableStart + map.map[headRect.top * map.width]);\n\t\t\tif (anchorRect.right < map.width) $anchorCell = doc.resolve(tableStart + map.map[map.width * (anchorRect.top + 1) - 1]);\n\t\t}\n\t\treturn new CellSelection($anchorCell, $headCell);\n\t}\n\ttoJSON() {\n\t\treturn {\n\t\t\ttype: \"cell\",\n\t\t\tanchor: this.$anchorCell.pos,\n\t\t\thead: this.$headCell.pos\n\t\t};\n\t}\n\tstatic fromJSON(doc, json) {\n\t\treturn new CellSelection(doc.resolve(json.anchor), doc.resolve(json.head));\n\t}\n\tstatic create(doc, anchorCell, headCell = anchorCell) {\n\t\treturn new CellSelection(doc.resolve(anchorCell), doc.resolve(headCell));\n\t}\n\tgetBookmark() {\n\t\treturn new CellBookmark(this.$anchorCell.pos, this.$headCell.pos);\n\t}\n};\nCellSelection.prototype.visible = false;\nSelection.jsonID(\"cell\", CellSelection);\n/**\n* @public\n*/\nvar CellBookmark = class CellBookmark {\n\tconstructor(anchor, head) {\n\t\tthis.anchor = anchor;\n\t\tthis.head = head;\n\t}\n\tmap(mapping) {\n\t\treturn new CellBookmark(mapping.map(this.anchor), mapping.map(this.head));\n\t}\n\tresolve(doc) {\n\t\tconst $anchorCell = doc.resolve(this.anchor), $headCell = doc.resolve(this.head);\n\t\tif ($anchorCell.parent.type.spec.tableRole == \"row\" && $headCell.parent.type.spec.tableRole == \"row\" && $anchorCell.index() < $anchorCell.parent.childCount && $headCell.index() < $headCell.parent.childCount && inSameTable($anchorCell, $headCell)) return new CellSelection($anchorCell, $headCell);\n\t\telse return Selection.near($headCell, 1);\n\t}\n};\nfunction drawCellSelection(state) {\n\tif (!(state.selection instanceof CellSelection)) return null;\n\tconst cells = [];\n\tstate.selection.forEachCell((node, pos) => {\n\t\tcells.push(Decoration.node(pos, pos + node.nodeSize, { class: \"selectedCell\" }));\n\t});\n\treturn DecorationSet.create(state.doc, cells);\n}\nfunction isCellBoundarySelection({ $from, $to }) {\n\tif ($from.pos == $to.pos || $from.pos < $to.pos - 6) return false;\n\tlet afterFrom = $from.pos;\n\tlet beforeTo = $to.pos;\n\tlet depth = $from.depth;\n\tfor (; depth >= 0; depth--, afterFrom++) if ($from.after(depth + 1) < $from.end(depth)) break;\n\tfor (let d = $to.depth; d >= 0; d--, beforeTo--) if ($to.before(d + 1) > $to.start(d)) break;\n\treturn afterFrom == beforeTo && /row|table/.test($from.node(depth).type.spec.tableRole);\n}\nfunction isTextSelectionAcrossCells({ $from, $to }) {\n\tlet fromCellBoundaryNode;\n\tlet toCellBoundaryNode;\n\tfor (let i = $from.depth; i > 0; i--) {\n\t\tconst node = $from.node(i);\n\t\tif (node.type.spec.tableRole === \"cell\" || node.type.spec.tableRole === \"header_cell\") {\n\t\t\tfromCellBoundaryNode = node;\n\t\t\tbreak;\n\t\t}\n\t}\n\tfor (let i = $to.depth; i > 0; i--) {\n\t\tconst node = $to.node(i);\n\t\tif (node.type.spec.tableRole === \"cell\" || node.type.spec.tableRole === \"header_cell\") {\n\t\t\ttoCellBoundaryNode = node;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn fromCellBoundaryNode !== toCellBoundaryNode && $to.parentOffset === 0;\n}\nfunction normalizeSelection(state, tr, allowTableNodeSelection) {\n\tconst sel = (tr || state).selection;\n\tconst doc = (tr || state).doc;\n\tlet normalize;\n\tlet role;\n\tif (sel instanceof NodeSelection && (role = sel.node.type.spec.tableRole)) {\n\t\tif (role == \"cell\" || role == \"header_cell\") normalize = CellSelection.create(doc, sel.from);\n\t\telse if (role == \"row\") {\n\t\t\tconst $cell = doc.resolve(sel.from + 1);\n\t\t\tnormalize = CellSelection.rowSelection($cell, $cell);\n\t\t} else if (!allowTableNodeSelection) {\n\t\t\tconst map = TableMap.get(sel.node);\n\t\t\tconst start = sel.from + 1;\n\t\t\tconst lastCell = start + map.map[map.width * map.height - 1];\n\t\t\tnormalize = CellSelection.create(doc, start + 1, lastCell);\n\t\t}\n\t} else if (sel instanceof TextSelection && isCellBoundarySelection(sel)) normalize = TextSelection.create(doc, sel.from);\n\telse if (sel instanceof TextSelection && isTextSelectionAcrossCells(sel)) normalize = TextSelection.create(doc, sel.$from.start(), sel.$from.end());\n\tif (normalize) (tr || (tr = state.tr)).setSelection(normalize);\n\treturn tr;\n}\n\n//#endregion\n//#region src/fixtables.ts\n/**\n* @public\n*/\nconst fixTablesKey = new PluginKey(\"fix-tables\");\n/**\n* Helper for iterating through the nodes in a document that changed\n* compared to the given previous document. Useful for avoiding\n* duplicate work on each transaction.\n*\n* @public\n*/\nfunction changedDescendants(old, cur, offset, f) {\n\tconst oldSize = old.childCount, curSize = cur.childCount;\n\touter: for (let i = 0, j = 0; i < curSize; i++) {\n\t\tconst child = cur.child(i);\n\t\tfor (let scan = j, e = Math.min(oldSize, i + 3); scan < e; scan++) if (old.child(scan) == child) {\n\t\t\tj = scan + 1;\n\t\t\toffset += child.nodeSize;\n\t\t\tcontinue outer;\n\t\t}\n\t\tf(child, offset);\n\t\tif (j < oldSize && old.child(j).sameMarkup(child)) changedDescendants(old.child(j), child, offset + 1, f);\n\t\telse child.nodesBetween(0, child.content.size, f, offset + 1);\n\t\toffset += child.nodeSize;\n\t}\n}\n/**\n* Inspect all tables in the given state's document and return a\n* transaction that fixes them, if necessary. If `oldState` was\n* provided, that is assumed to hold a previous, known-good state,\n* which will be used to avoid re-scanning unchanged parts of the\n* document.\n*\n* @public\n*/\nfunction fixTables(state, oldState) {\n\tlet tr;\n\tconst check = (node, pos) => {\n\t\tif (node.type.spec.tableRole == \"table\") tr = fixTable(state, node, pos, tr);\n\t};\n\tif (!oldState) state.doc.descendants(check);\n\telse if (oldState.doc != state.doc) changedDescendants(oldState.doc, state.doc, 0, check);\n\treturn tr;\n}\nfunction fixTable(state, table, tablePos, tr) {\n\tconst map = TableMap.get(table);\n\tif (!map.problems) return tr;\n\tif (!tr) tr = state.tr;\n\tconst mustAdd = [];\n\tfor (let i = 0; i < map.height; i++) mustAdd.push(0);\n\tfor (let i = 0; i < map.problems.length; i++) {\n\t\tconst prob = map.problems[i];\n\t\tif (prob.type == \"collision\") {\n\t\t\tconst cell = table.nodeAt(prob.pos);\n\t\t\tif (!cell) continue;\n\t\t\tconst attrs = cell.attrs;\n\t\t\tfor (let j = 0; j < attrs.rowspan; j++) mustAdd[prob.row + j] += prob.n;\n\t\t\ttr.setNodeMarkup(tr.mapping.map(tablePos + 1 + prob.pos), null, removeColSpan(attrs, attrs.colspan - prob.n, prob.n));\n\t\t} else if (prob.type == \"missing\") mustAdd[prob.row] += prob.n;\n\t\telse if (prob.type == \"overlong_rowspan\") {\n\t\t\tconst cell = table.nodeAt(prob.pos);\n\t\t\tif (!cell) continue;\n\t\t\ttr.setNodeMarkup(tr.mapping.map(tablePos + 1 + prob.pos), null, {\n\t\t\t\t...cell.attrs,\n\t\t\t\trowspan: cell.attrs.rowspan - prob.n\n\t\t\t});\n\t\t} else if (prob.type == \"colwidth mismatch\") {\n\t\t\tconst cell = table.nodeAt(prob.pos);\n\t\t\tif (!cell) continue;\n\t\t\ttr.setNodeMarkup(tr.mapping.map(tablePos + 1 + prob.pos), null, {\n\t\t\t\t...cell.attrs,\n\t\t\t\tcolwidth: prob.colwidth\n\t\t\t});\n\t\t} else if (prob.type == \"zero_sized\") {\n\t\t\tconst pos = tr.mapping.map(tablePos);\n\t\t\ttr.delete(pos, pos + table.nodeSize);\n\t\t}\n\t}\n\tlet first, last;\n\tfor (let i = 0; i < mustAdd.length; i++) if (mustAdd[i]) {\n\t\tif (first == null) first = i;\n\t\tlast = i;\n\t}\n\tfor (let i = 0, pos = tablePos + 1; i < map.height; i++) {\n\t\tconst row = table.child(i);\n\t\tconst end = pos + row.nodeSize;\n\t\tconst add = mustAdd[i];\n\t\tif (add > 0) {\n\t\t\tlet role = \"cell\";\n\t\t\tif (row.firstChild) role = row.firstChild.type.spec.tableRole;\n\t\t\tconst nodes = [];\n\t\t\tfor (let j = 0; j < add; j++) {\n\t\t\t\tconst node = tableNodeTypes(state.schema)[role].createAndFill();\n\t\t\t\tif (node) nodes.push(node);\n\t\t\t}\n\t\t\tconst side = (i == 0 || first == i - 1) && last == i ? pos + 1 : end - 1;\n\t\t\ttr.insert(tr.mapping.map(side), nodes);\n\t\t}\n\t\tpos = end;\n\t}\n\treturn tr.setMeta(fixTablesKey, { fixTables: true });\n}\n\n//#endregion\n//#region src/utils/convert.ts\n/**\n* This function will transform the table node into a matrix of rows and columns\n* respecting merged cells, for example this table:\n*\n* ```\n* ┌──────┬──────┬─────────────┐\n* │  A1  │  B1  │     C1      │\n* ├──────┼──────┴──────┬──────┤\n* │  A2  │     B2      │      │\n* ├──────┼─────────────┤  D1  │\n* │  A3  │  B3  │  C3  │      │\n* └──────┴──────┴──────┴──────┘\n* ```\n*\n* will be converted to the below:\n*\n* ```javascript\n* [\n*   [A1, B1, C1, null],\n*   [A2, B2, null, D1],\n*   [A3, B3, C3, null],\n* ]\n* ```\n* @internal\n*/\nfunction convertTableNodeToArrayOfRows(tableNode) {\n\tconst map = TableMap.get(tableNode);\n\tconst rows = [];\n\tconst rowCount = map.height;\n\tconst colCount$1 = map.width;\n\tfor (let rowIndex = 0; rowIndex < rowCount; rowIndex++) {\n\t\tconst row = [];\n\t\tfor (let colIndex = 0; colIndex < colCount$1; colIndex++) {\n\t\t\tconst cellIndex = rowIndex * colCount$1 + colIndex;\n\t\t\tconst cellPos = map.map[cellIndex];\n\t\t\tif (rowIndex > 0) {\n\t\t\t\tconst topCellIndex = cellIndex - colCount$1;\n\t\t\t\tif (cellPos === map.map[topCellIndex]) {\n\t\t\t\t\trow.push(null);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (colIndex > 0) {\n\t\t\t\tconst leftCellIndex = cellIndex - 1;\n\t\t\t\tif (cellPos === map.map[leftCellIndex]) {\n\t\t\t\t\trow.push(null);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\trow.push(tableNode.nodeAt(cellPos));\n\t\t}\n\t\trows.push(row);\n\t}\n\treturn rows;\n}\n/**\n* Convert an array of rows to a table node.\n*\n* @internal\n*/\nfunction convertArrayOfRowsToTableNode(tableNode, arrayOfNodes) {\n\tconst newRows = [];\n\tconst map = TableMap.get(tableNode);\n\tconst rowCount = map.height;\n\tconst colCount$1 = map.width;\n\tfor (let rowIndex = 0; rowIndex < rowCount; rowIndex++) {\n\t\tconst oldRow = tableNode.child(rowIndex);\n\t\tconst newCells = [];\n\t\tfor (let colIndex = 0; colIndex < colCount$1; colIndex++) {\n\t\t\tconst cell = arrayOfNodes[rowIndex][colIndex];\n\t\t\tif (!cell) continue;\n\t\t\tconst cellPos = map.map[rowIndex * map.width + colIndex];\n\t\t\tconst oldCell = tableNode.nodeAt(cellPos);\n\t\t\tif (!oldCell) continue;\n\t\t\tconst newCell = oldCell.type.createChecked(cell.attrs, cell.content, cell.marks);\n\t\t\tnewCells.push(newCell);\n\t\t}\n\t\tconst newRow = oldRow.type.createChecked(oldRow.attrs, newCells, oldRow.marks);\n\t\tnewRows.push(newRow);\n\t}\n\treturn tableNode.type.createChecked(tableNode.attrs, newRows, tableNode.marks);\n}\n\n//#endregion\n//#region src/utils/move-row-in-array-of-rows.ts\n/**\n* Move a row in an array of rows.\n*\n* @internal\n*/\nfunction moveRowInArrayOfRows(rows, indexesOrigin, indexesTarget, directionOverride) {\n\tconst direction = indexesOrigin[0] > indexesTarget[0] ? -1 : 1;\n\tconst rowsExtracted = rows.splice(indexesOrigin[0], indexesOrigin.length);\n\tconst positionOffset = rowsExtracted.length % 2 === 0 ? 1 : 0;\n\tlet target;\n\tif (directionOverride === -1 && direction === 1) target = indexesTarget[0] - 1;\n\telse if (directionOverride === 1 && direction === -1) target = indexesTarget[indexesTarget.length - 1] - positionOffset + 1;\n\telse target = direction === -1 ? indexesTarget[0] : indexesTarget[indexesTarget.length - 1] - positionOffset;\n\trows.splice(target, 0, ...rowsExtracted);\n\treturn rows;\n}\n\n//#endregion\n//#region src/utils/query.ts\n/**\n* Checks if the given object is a `CellSelection` instance.\n*\n* @internal\n*/\nfunction isCellSelection(value) {\n\treturn value instanceof CellSelection;\n}\n/**\n* Find the closest table node for a given position.\n*\n* @public\n*/\nfunction findTable($pos) {\n\treturn findParentNode((node) => node.type.spec.tableRole === \"table\", $pos);\n}\n/**\n* Try to find the anchor and head cell in the same table by using the given\n* anchor and head as hit points, or fallback to the selection's anchor and\n* head.\n*\n* @public\n*/\nfunction findCellRange(selection, anchorHit, headHit) {\n\tvar _ref, _ref2;\n\tif (anchorHit == null && headHit == null && isCellSelection(selection)) return [selection.$anchorCell, selection.$headCell];\n\tconst anchor = (_ref = anchorHit !== null && anchorHit !== void 0 ? anchorHit : headHit) !== null && _ref !== void 0 ? _ref : selection.anchor;\n\tconst head = (_ref2 = headHit !== null && headHit !== void 0 ? headHit : anchorHit) !== null && _ref2 !== void 0 ? _ref2 : selection.head;\n\tconst doc = selection.$head.doc;\n\tconst $anchorCell = findCellPos(doc, anchor);\n\tconst $headCell = findCellPos(doc, head);\n\tif ($anchorCell && $headCell && inSameTable($anchorCell, $headCell)) return [$anchorCell, $headCell];\n\treturn null;\n}\n/**\n* Try to find a resolved pos of a cell by using the given pos as a hit point.\n*\n* @public\n*/\nfunction findCellPos(doc, pos) {\n\tconst $pos = doc.resolve(pos);\n\treturn cellAround($pos) || cellNear($pos);\n}\n/**\n* Find the closest parent node that satisfies the predicate.\n*\n* @internal\n*/\nfunction findParentNode(predicate, $pos) {\n\tfor (let depth = $pos.depth; depth >= 0; depth -= 1) {\n\t\tconst node = $pos.node(depth);\n\t\tif (predicate(node)) return {\n\t\t\tnode,\n\t\t\tpos: depth === 0 ? 0 : $pos.before(depth),\n\t\t\tstart: $pos.start(depth),\n\t\t\tdepth\n\t\t};\n\t}\n\treturn null;\n}\n\n//#endregion\n//#region src/utils/get-cells.ts\n/**\n* Returns an array of cells in a column at the specified column index.\n*\n* @internal\n*/\nfunction getCellsInColumn(columnIndex, selection) {\n\tconst table = findTable(selection.$from);\n\tif (!table) return;\n\tconst map = TableMap.get(table.node);\n\tif (columnIndex < 0 || columnIndex > map.width - 1) return;\n\treturn map.cellsInRect({\n\t\tleft: columnIndex,\n\t\tright: columnIndex + 1,\n\t\ttop: 0,\n\t\tbottom: map.height\n\t}).map((nodePos) => {\n\t\tconst node = table.node.nodeAt(nodePos);\n\t\tconst pos = nodePos + table.start;\n\t\treturn {\n\t\t\tpos,\n\t\t\tstart: pos + 1,\n\t\t\tnode,\n\t\t\tdepth: table.depth + 2\n\t\t};\n\t});\n}\n/**\n* Returns an array of cells in a row at the specified row index.\n*\n* @internal\n*/\nfunction getCellsInRow(rowIndex, selection) {\n\tconst table = findTable(selection.$from);\n\tif (!table) return;\n\tconst map = TableMap.get(table.node);\n\tif (rowIndex < 0 || rowIndex > map.height - 1) return;\n\treturn map.cellsInRect({\n\t\tleft: 0,\n\t\tright: map.width,\n\t\ttop: rowIndex,\n\t\tbottom: rowIndex + 1\n\t}).map((nodePos) => {\n\t\tconst node = table.node.nodeAt(nodePos);\n\t\tconst pos = nodePos + table.start;\n\t\treturn {\n\t\t\tpos,\n\t\t\tstart: pos + 1,\n\t\t\tnode,\n\t\t\tdepth: table.depth + 2\n\t\t};\n\t});\n}\n\n//#endregion\n//#region src/utils/selection-range.ts\n/**\n* Returns a range of rectangular selection spanning all merged cells around a\n* column at index `columnIndex`.\n*\n* Original implementation from Atlassian (Apache License 2.0)\n*\n* https://bitbucket.org/atlassian/atlassian-frontend-mirror/src/5f91cb871e8248bc3bae5ddc30bb9fd9200fadbb/editor/editor-tables/src/utils/get-selection-range-in-column.ts#editor/editor-tables/src/utils/get-selection-range-in-column.ts\n*\n* @internal\n*/\nfunction getSelectionRangeInColumn(tr, startColIndex, endColIndex = startColIndex) {\n\tlet startIndex = startColIndex;\n\tlet endIndex = endColIndex;\n\tfor (let i = startColIndex; i >= 0; i--) {\n\t\tconst cells = getCellsInColumn(i, tr.selection);\n\t\tif (cells) cells.forEach((cell) => {\n\t\t\tconst maybeEndIndex = cell.node.attrs.colspan + i - 1;\n\t\t\tif (maybeEndIndex >= startIndex) startIndex = i;\n\t\t\tif (maybeEndIndex > endIndex) endIndex = maybeEndIndex;\n\t\t});\n\t}\n\tfor (let i = startColIndex; i <= endIndex; i++) {\n\t\tconst cells = getCellsInColumn(i, tr.selection);\n\t\tif (cells) cells.forEach((cell) => {\n\t\t\tconst maybeEndIndex = cell.node.attrs.colspan + i - 1;\n\t\t\tif (cell.node.attrs.colspan > 1 && maybeEndIndex > endIndex) endIndex = maybeEndIndex;\n\t\t});\n\t}\n\tconst indexes = [];\n\tfor (let i = startIndex; i <= endIndex; i++) {\n\t\tconst maybeCells = getCellsInColumn(i, tr.selection);\n\t\tif (maybeCells && maybeCells.length > 0) indexes.push(i);\n\t}\n\tstartIndex = indexes[0];\n\tendIndex = indexes[indexes.length - 1];\n\tconst firstSelectedColumnCells = getCellsInColumn(startIndex, tr.selection);\n\tconst firstRowCells = getCellsInRow(0, tr.selection);\n\tif (!firstSelectedColumnCells || !firstRowCells) return;\n\tconst $anchor = tr.doc.resolve(firstSelectedColumnCells[firstSelectedColumnCells.length - 1].pos);\n\tlet headCell;\n\tfor (let i = endIndex; i >= startIndex; i--) {\n\t\tconst columnCells = getCellsInColumn(i, tr.selection);\n\t\tif (columnCells && columnCells.length > 0) {\n\t\t\tfor (let j = firstRowCells.length - 1; j >= 0; j--) if (firstRowCells[j].pos === columnCells[0].pos) {\n\t\t\t\theadCell = columnCells[0];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (headCell) break;\n\t\t}\n\t}\n\tif (!headCell) return;\n\treturn {\n\t\t$anchor,\n\t\t$head: tr.doc.resolve(headCell.pos),\n\t\tindexes\n\t};\n}\n/**\n* Returns a range of rectangular selection spanning all merged cells around a\n* row at index `rowIndex`.\n*\n* Original implementation from Atlassian (Apache License 2.0)\n*\n* https://bitbucket.org/atlassian/atlassian-frontend-mirror/src/5f91cb871e8248bc3bae5ddc30bb9fd9200fadbb/editor/editor-tables/src/utils/get-selection-range-in-row.ts#editor/editor-tables/src/utils/get-selection-range-in-row.ts\n*\n* @internal\n*/\nfunction getSelectionRangeInRow(tr, startRowIndex, endRowIndex = startRowIndex) {\n\tlet startIndex = startRowIndex;\n\tlet endIndex = endRowIndex;\n\tfor (let i = startRowIndex; i >= 0; i--) {\n\t\tconst cells = getCellsInRow(i, tr.selection);\n\t\tif (cells) cells.forEach((cell) => {\n\t\t\tconst maybeEndIndex = cell.node.attrs.rowspan + i - 1;\n\t\t\tif (maybeEndIndex >= startIndex) startIndex = i;\n\t\t\tif (maybeEndIndex > endIndex) endIndex = maybeEndIndex;\n\t\t});\n\t}\n\tfor (let i = startRowIndex; i <= endIndex; i++) {\n\t\tconst cells = getCellsInRow(i, tr.selection);\n\t\tif (cells) cells.forEach((cell) => {\n\t\t\tconst maybeEndIndex = cell.node.attrs.rowspan + i - 1;\n\t\t\tif (cell.node.attrs.rowspan > 1 && maybeEndIndex > endIndex) endIndex = maybeEndIndex;\n\t\t});\n\t}\n\tconst indexes = [];\n\tfor (let i = startIndex; i <= endIndex; i++) {\n\t\tconst maybeCells = getCellsInRow(i, tr.selection);\n\t\tif (maybeCells && maybeCells.length > 0) indexes.push(i);\n\t}\n\tstartIndex = indexes[0];\n\tendIndex = indexes[indexes.length - 1];\n\tconst firstSelectedRowCells = getCellsInRow(startIndex, tr.selection);\n\tconst firstColumnCells = getCellsInColumn(0, tr.selection);\n\tif (!firstSelectedRowCells || !firstColumnCells) return;\n\tconst $anchor = tr.doc.resolve(firstSelectedRowCells[firstSelectedRowCells.length - 1].pos);\n\tlet headCell;\n\tfor (let i = endIndex; i >= startIndex; i--) {\n\t\tconst rowCells = getCellsInRow(i, tr.selection);\n\t\tif (rowCells && rowCells.length > 0) {\n\t\t\tfor (let j = firstColumnCells.length - 1; j >= 0; j--) if (firstColumnCells[j].pos === rowCells[0].pos) {\n\t\t\t\theadCell = rowCells[0];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (headCell) break;\n\t\t}\n\t}\n\tif (!headCell) return;\n\treturn {\n\t\t$anchor,\n\t\t$head: tr.doc.resolve(headCell.pos),\n\t\tindexes\n\t};\n}\n\n//#endregion\n//#region src/utils/transpose.ts\n/**\n* Transposes a 2D array by flipping columns to rows.\n*\n* Transposition is a familiar algebra concept where the matrix is flipped\n* along its diagonal. For more details, see:\n* https://en.wikipedia.org/wiki/Transpose\n*\n* @example\n* ```javascript\n* const arr = [\n*   ['a1', 'a2', 'a3'],\n*   ['b1', 'b2', 'b3'],\n*   ['c1', 'c2', 'c3'],\n*   ['d1', 'd2', 'd3'],\n* ];\n*\n* const result = transpose(arr);\n* result === [\n*   ['a1', 'b1', 'c1', 'd1'],\n*   ['a2', 'b2', 'c2', 'd2'],\n*   ['a3', 'b3', 'c3', 'd3'],\n* ]\n* ```\n*/\nfunction transpose(array) {\n\treturn array[0].map((_, i) => {\n\t\treturn array.map((column) => column[i]);\n\t});\n}\n\n//#endregion\n//#region src/utils/move-column.ts\n/**\n* Move a column from index `origin` to index `target`.\n*\n* @internal\n*/\nfunction moveColumn(moveColParams) {\n\tvar _getSelectionRangeInC, _getSelectionRangeInC2;\n\tconst { tr, originIndex, targetIndex, select, pos } = moveColParams;\n\tconst table = findTable(tr.doc.resolve(pos));\n\tif (!table) return false;\n\tconst indexesOriginColumn = (_getSelectionRangeInC = getSelectionRangeInColumn(tr, originIndex)) === null || _getSelectionRangeInC === void 0 ? void 0 : _getSelectionRangeInC.indexes;\n\tconst indexesTargetColumn = (_getSelectionRangeInC2 = getSelectionRangeInColumn(tr, targetIndex)) === null || _getSelectionRangeInC2 === void 0 ? void 0 : _getSelectionRangeInC2.indexes;\n\tif (!indexesOriginColumn || !indexesTargetColumn) return false;\n\tif (indexesOriginColumn.includes(targetIndex)) return false;\n\tconst newTable = moveTableColumn$1(table.node, indexesOriginColumn, indexesTargetColumn, 0);\n\ttr.replaceWith(table.pos, table.pos + table.node.nodeSize, newTable);\n\tif (!select) return true;\n\tconst map = TableMap.get(newTable);\n\tconst start = table.start;\n\tconst index = targetIndex;\n\tconst lastCell = map.positionAt(map.height - 1, index, newTable);\n\tconst $lastCell = tr.doc.resolve(start + lastCell);\n\tconst firstCell = map.positionAt(0, index, newTable);\n\tconst $firstCell = tr.doc.resolve(start + firstCell);\n\ttr.setSelection(CellSelection.colSelection($lastCell, $firstCell));\n\treturn true;\n}\nfunction moveTableColumn$1(table, indexesOrigin, indexesTarget, direction) {\n\tlet rows = transpose(convertTableNodeToArrayOfRows(table));\n\trows = moveRowInArrayOfRows(rows, indexesOrigin, indexesTarget, direction);\n\trows = transpose(rows);\n\treturn convertArrayOfRowsToTableNode(table, rows);\n}\n\n//#endregion\n//#region src/utils/move-row.ts\n/**\n* Move a row from index `origin` to index `target`.\n*\n* @internal\n*/\nfunction moveRow(moveRowParams) {\n\tvar _getSelectionRangeInR, _getSelectionRangeInR2;\n\tconst { tr, originIndex, targetIndex, select, pos } = moveRowParams;\n\tconst table = findTable(tr.doc.resolve(pos));\n\tif (!table) return false;\n\tconst indexesOriginRow = (_getSelectionRangeInR = getSelectionRangeInRow(tr, originIndex)) === null || _getSelectionRangeInR === void 0 ? void 0 : _getSelectionRangeInR.indexes;\n\tconst indexesTargetRow = (_getSelectionRangeInR2 = getSelectionRangeInRow(tr, targetIndex)) === null || _getSelectionRangeInR2 === void 0 ? void 0 : _getSelectionRangeInR2.indexes;\n\tif (!indexesOriginRow || !indexesTargetRow) return false;\n\tif (indexesOriginRow.includes(targetIndex)) return false;\n\tconst newTable = moveTableRow$1(table.node, indexesOriginRow, indexesTargetRow, 0);\n\ttr.replaceWith(table.pos, table.pos + table.node.nodeSize, newTable);\n\tif (!select) return true;\n\tconst map = TableMap.get(newTable);\n\tconst start = table.start;\n\tconst index = targetIndex;\n\tconst lastCell = map.positionAt(index, map.width - 1, newTable);\n\tconst $lastCell = tr.doc.resolve(start + lastCell);\n\tconst firstCell = map.positionAt(index, 0, newTable);\n\tconst $firstCell = tr.doc.resolve(start + firstCell);\n\ttr.setSelection(CellSelection.rowSelection($lastCell, $firstCell));\n\treturn true;\n}\nfunction moveTableRow$1(table, indexesOrigin, indexesTarget, direction) {\n\tlet rows = convertTableNodeToArrayOfRows(table);\n\trows = moveRowInArrayOfRows(rows, indexesOrigin, indexesTarget, direction);\n\treturn convertArrayOfRowsToTableNode(table, rows);\n}\n\n//#endregion\n//#region src/commands.ts\n/**\n* Helper to get the selected rectangle in a table, if any. Adds table\n* map, table node, and table start offset to the object for\n* convenience.\n*\n* @public\n*/\nfunction selectedRect(state) {\n\tconst sel = state.selection;\n\tconst $pos = selectionCell(state);\n\tconst table = $pos.node(-1);\n\tconst tableStart = $pos.start(-1);\n\tconst map = TableMap.get(table);\n\treturn {\n\t\t...sel instanceof CellSelection ? map.rectBetween(sel.$anchorCell.pos - tableStart, sel.$headCell.pos - tableStart) : map.findCell($pos.pos - tableStart),\n\t\ttableStart,\n\t\tmap,\n\t\ttable\n\t};\n}\n/**\n* Add a column at the given position in a table.\n*\n* @public\n*/\nfunction addColumn(tr, { map, tableStart, table }, col) {\n\tlet refColumn = col > 0 ? -1 : 0;\n\tif (columnIsHeader(map, table, col + refColumn)) refColumn = col == 0 || col == map.width ? null : 0;\n\tfor (let row = 0; row < map.height; row++) {\n\t\tconst index = row * map.width + col;\n\t\tif (col > 0 && col < map.width && map.map[index - 1] == map.map[index]) {\n\t\t\tconst pos = map.map[index];\n\t\t\tconst cell = table.nodeAt(pos);\n\t\t\ttr.setNodeMarkup(tr.mapping.map(tableStart + pos), null, addColSpan(cell.attrs, col - map.colCount(pos)));\n\t\t\trow += cell.attrs.rowspan - 1;\n\t\t} else {\n\t\t\tconst type = refColumn == null ? tableNodeTypes(table.type.schema).cell : table.nodeAt(map.map[index + refColumn]).type;\n\t\t\tconst pos = map.positionAt(row, col, table);\n\t\t\ttr.insert(tr.mapping.map(tableStart + pos), type.createAndFill());\n\t\t}\n\t}\n\treturn tr;\n}\n/**\n* Command to add a column before the column with the selection.\n*\n* @public\n*/\nfunction addColumnBefore(state, dispatch) {\n\tif (!isInTable(state)) return false;\n\tif (dispatch) {\n\t\tconst rect = selectedRect(state);\n\t\tdispatch(addColumn(state.tr, rect, rect.left));\n\t}\n\treturn true;\n}\n/**\n* Command to add a column after the column with the selection.\n*\n* @public\n*/\nfunction addColumnAfter(state, dispatch) {\n\tif (!isInTable(state)) return false;\n\tif (dispatch) {\n\t\tconst rect = selectedRect(state);\n\t\tdispatch(addColumn(state.tr, rect, rect.right));\n\t}\n\treturn true;\n}\n/**\n* @public\n*/\nfunction removeColumn(tr, { map, table, tableStart }, col) {\n\tconst mapStart = tr.mapping.maps.length;\n\tfor (let row = 0; row < map.height;) {\n\t\tconst index = row * map.width + col;\n\t\tconst pos = map.map[index];\n\t\tconst cell = table.nodeAt(pos);\n\t\tconst attrs = cell.attrs;\n\t\tif (col > 0 && map.map[index - 1] == pos || col < map.width - 1 && map.map[index + 1] == pos) tr.setNodeMarkup(tr.mapping.slice(mapStart).map(tableStart + pos), null, removeColSpan(attrs, col - map.colCount(pos)));\n\t\telse {\n\t\t\tconst start = tr.mapping.slice(mapStart).map(tableStart + pos);\n\t\t\ttr.delete(start, start + cell.nodeSize);\n\t\t}\n\t\trow += attrs.rowspan;\n\t}\n}\n/**\n* Command function that removes the selected columns from a table.\n*\n* @public\n*/\nfunction deleteColumn(state, dispatch) {\n\tif (!isInTable(state)) return false;\n\tif (dispatch) {\n\t\tconst rect = selectedRect(state);\n\t\tconst tr = state.tr;\n\t\tif (rect.left == 0 && rect.right == rect.map.width) return false;\n\t\tfor (let i = rect.right - 1;; i--) {\n\t\t\tremoveColumn(tr, rect, i);\n\t\t\tif (i == rect.left) break;\n\t\t\tconst table = rect.tableStart ? tr.doc.nodeAt(rect.tableStart - 1) : tr.doc;\n\t\t\tif (!table) throw new RangeError(\"No table found\");\n\t\t\trect.table = table;\n\t\t\trect.map = TableMap.get(table);\n\t\t}\n\t\tdispatch(tr);\n\t}\n\treturn true;\n}\n/**\n* @public\n*/\nfunction rowIsHeader(map, table, row) {\n\tvar _table$nodeAt;\n\tconst headerCell = tableNodeTypes(table.type.schema).header_cell;\n\tfor (let col = 0; col < map.width; col++) if (((_table$nodeAt = table.nodeAt(map.map[col + row * map.width])) === null || _table$nodeAt === void 0 ? void 0 : _table$nodeAt.type) != headerCell) return false;\n\treturn true;\n}\n/**\n* @public\n*/\nfunction addRow(tr, { map, tableStart, table }, row) {\n\tlet rowPos = tableStart;\n\tfor (let i = 0; i < row; i++) rowPos += table.child(i).nodeSize;\n\tconst cells = [];\n\tlet refRow = row > 0 ? -1 : 0;\n\tif (rowIsHeader(map, table, row + refRow)) refRow = row == 0 || row == map.height ? null : 0;\n\tfor (let col = 0, index = map.width * row; col < map.width; col++, index++) if (row > 0 && row < map.height && map.map[index] == map.map[index - map.width]) {\n\t\tconst pos = map.map[index];\n\t\tconst attrs = table.nodeAt(pos).attrs;\n\t\ttr.setNodeMarkup(tableStart + pos, null, {\n\t\t\t...attrs,\n\t\t\trowspan: attrs.rowspan + 1\n\t\t});\n\t\tcol += attrs.colspan - 1;\n\t} else {\n\t\tvar _table$nodeAt2;\n\t\tconst type = refRow == null ? tableNodeTypes(table.type.schema).cell : (_table$nodeAt2 = table.nodeAt(map.map[index + refRow * map.width])) === null || _table$nodeAt2 === void 0 ? void 0 : _table$nodeAt2.type;\n\t\tconst node = type === null || type === void 0 ? void 0 : type.createAndFill();\n\t\tif (node) cells.push(node);\n\t}\n\ttr.insert(rowPos, tableNodeTypes(table.type.schema).row.create(null, cells));\n\treturn tr;\n}\n/**\n* Add a table row before the selection.\n*\n* @public\n*/\nfunction addRowBefore(state, dispatch) {\n\tif (!isInTable(state)) return false;\n\tif (dispatch) {\n\t\tconst rect = selectedRect(state);\n\t\tdispatch(addRow(state.tr, rect, rect.top));\n\t}\n\treturn true;\n}\n/**\n* Add a table row after the selection.\n*\n* @public\n*/\nfunction addRowAfter(state, dispatch) {\n\tif (!isInTable(state)) return false;\n\tif (dispatch) {\n\t\tconst rect = selectedRect(state);\n\t\tdispatch(addRow(state.tr, rect, rect.bottom));\n\t}\n\treturn true;\n}\n/**\n* @public\n*/\nfunction removeRow(tr, { map, table, tableStart }, row) {\n\tlet rowPos = 0;\n\tfor (let i = 0; i < row; i++) rowPos += table.child(i).nodeSize;\n\tconst nextRow = rowPos + table.child(row).nodeSize;\n\tconst mapFrom = tr.mapping.maps.length;\n\ttr.delete(rowPos + tableStart, nextRow + tableStart);\n\tconst seen = /* @__PURE__ */ new Set();\n\tfor (let col = 0, index = row * map.width; col < map.width; col++, index++) {\n\t\tconst pos = map.map[index];\n\t\tif (seen.has(pos)) continue;\n\t\tseen.add(pos);\n\t\tif (row > 0 && pos == map.map[index - map.width]) {\n\t\t\tconst attrs = table.nodeAt(pos).attrs;\n\t\t\ttr.setNodeMarkup(tr.mapping.slice(mapFrom).map(pos + tableStart), null, {\n\t\t\t\t...attrs,\n\t\t\t\trowspan: attrs.rowspan - 1\n\t\t\t});\n\t\t\tcol += attrs.colspan - 1;\n\t\t} else if (row < map.height && pos == map.map[index + map.width]) {\n\t\t\tconst cell = table.nodeAt(pos);\n\t\t\tconst attrs = cell.attrs;\n\t\t\tconst copy = cell.type.create({\n\t\t\t\t...attrs,\n\t\t\t\trowspan: cell.attrs.rowspan - 1\n\t\t\t}, cell.content);\n\t\t\tconst newPos = map.positionAt(row + 1, col, table);\n\t\t\ttr.insert(tr.mapping.slice(mapFrom).map(tableStart + newPos), copy);\n\t\t\tcol += attrs.colspan - 1;\n\t\t}\n\t}\n}\n/**\n* Remove the selected rows from a table.\n*\n* @public\n*/\nfunction deleteRow(state, dispatch) {\n\tif (!isInTable(state)) return false;\n\tif (dispatch) {\n\t\tconst rect = selectedRect(state), tr = state.tr;\n\t\tif (rect.top == 0 && rect.bottom == rect.map.height) return false;\n\t\tfor (let i = rect.bottom - 1;; i--) {\n\t\t\tremoveRow(tr, rect, i);\n\t\t\tif (i == rect.top) break;\n\t\t\tconst table = rect.tableStart ? tr.doc.nodeAt(rect.tableStart - 1) : tr.doc;\n\t\t\tif (!table) throw new RangeError(\"No table found\");\n\t\t\trect.table = table;\n\t\t\trect.map = TableMap.get(rect.table);\n\t\t}\n\t\tdispatch(tr);\n\t}\n\treturn true;\n}\nfunction isEmpty(cell) {\n\tconst c = cell.content;\n\treturn c.childCount == 1 && c.child(0).isTextblock && c.child(0).childCount == 0;\n}\nfunction cellsOverlapRectangle({ width, height, map }, rect) {\n\tlet indexTop = rect.top * width + rect.left, indexLeft = indexTop;\n\tlet indexBottom = (rect.bottom - 1) * width + rect.left, indexRight = indexTop + (rect.right - rect.left - 1);\n\tfor (let i = rect.top; i < rect.bottom; i++) {\n\t\tif (rect.left > 0 && map[indexLeft] == map[indexLeft - 1] || rect.right < width && map[indexRight] == map[indexRight + 1]) return true;\n\t\tindexLeft += width;\n\t\tindexRight += width;\n\t}\n\tfor (let i = rect.left; i < rect.right; i++) {\n\t\tif (rect.top > 0 && map[indexTop] == map[indexTop - width] || rect.bottom < height && map[indexBottom] == map[indexBottom + width]) return true;\n\t\tindexTop++;\n\t\tindexBottom++;\n\t}\n\treturn false;\n}\n/**\n* Merge the selected cells into a single cell. Only available when\n* the selected cells' outline forms a rectangle.\n*\n* @public\n*/\nfunction mergeCells(state, dispatch) {\n\tconst sel = state.selection;\n\tif (!(sel instanceof CellSelection) || sel.$anchorCell.pos == sel.$headCell.pos) return false;\n\tconst rect = selectedRect(state), { map } = rect;\n\tif (cellsOverlapRectangle(map, rect)) return false;\n\tif (dispatch) {\n\t\tconst tr = state.tr;\n\t\tconst seen = {};\n\t\tlet content = Fragment.empty;\n\t\tlet mergedPos;\n\t\tlet mergedCell;\n\t\tfor (let row = rect.top; row < rect.bottom; row++) for (let col = rect.left; col < rect.right; col++) {\n\t\t\tconst cellPos = map.map[row * map.width + col];\n\t\t\tconst cell = rect.table.nodeAt(cellPos);\n\t\t\tif (seen[cellPos] || !cell) continue;\n\t\t\tseen[cellPos] = true;\n\t\t\tif (mergedPos == null) {\n\t\t\t\tmergedPos = cellPos;\n\t\t\t\tmergedCell = cell;\n\t\t\t} else {\n\t\t\t\tif (!isEmpty(cell)) content = content.append(cell.content);\n\t\t\t\tconst mapped = tr.mapping.map(cellPos + rect.tableStart);\n\t\t\t\ttr.delete(mapped, mapped + cell.nodeSize);\n\t\t\t}\n\t\t}\n\t\tif (mergedPos == null || mergedCell == null) return true;\n\t\ttr.setNodeMarkup(mergedPos + rect.tableStart, null, {\n\t\t\t...addColSpan(mergedCell.attrs, mergedCell.attrs.colspan, rect.right - rect.left - mergedCell.attrs.colspan),\n\t\t\trowspan: rect.bottom - rect.top\n\t\t});\n\t\tif (content.size > 0) {\n\t\t\tconst end = mergedPos + 1 + mergedCell.content.size;\n\t\t\tconst start = isEmpty(mergedCell) ? mergedPos + 1 : end;\n\t\t\ttr.replaceWith(start + rect.tableStart, end + rect.tableStart, content);\n\t\t}\n\t\ttr.setSelection(new CellSelection(tr.doc.resolve(mergedPos + rect.tableStart)));\n\t\tdispatch(tr);\n\t}\n\treturn true;\n}\n/**\n* Split a selected cell, whose rowpan or colspan is greater than one,\n* into smaller cells. Use the first cell type for the new cells.\n*\n* @public\n*/\nfunction splitCell(state, dispatch) {\n\tconst nodeTypes = tableNodeTypes(state.schema);\n\treturn splitCellWithType(({ node }) => {\n\t\treturn nodeTypes[node.type.spec.tableRole];\n\t})(state, dispatch);\n}\n/**\n* Split a selected cell, whose rowpan or colspan is greater than one,\n* into smaller cells with the cell type (th, td) returned by getType function.\n*\n* @public\n*/\nfunction splitCellWithType(getCellType) {\n\treturn (state, dispatch) => {\n\t\tconst sel = state.selection;\n\t\tlet cellNode;\n\t\tlet cellPos;\n\t\tif (!(sel instanceof CellSelection)) {\n\t\t\tvar _cellAround;\n\t\t\tcellNode = cellWrapping(sel.$from);\n\t\t\tif (!cellNode) return false;\n\t\t\tcellPos = (_cellAround = cellAround(sel.$from)) === null || _cellAround === void 0 ? void 0 : _cellAround.pos;\n\t\t} else {\n\t\t\tif (sel.$anchorCell.pos != sel.$headCell.pos) return false;\n\t\t\tcellNode = sel.$anchorCell.nodeAfter;\n\t\t\tcellPos = sel.$anchorCell.pos;\n\t\t}\n\t\tif (cellNode == null || cellPos == null) return false;\n\t\tif (cellNode.attrs.colspan == 1 && cellNode.attrs.rowspan == 1) return false;\n\t\tif (dispatch) {\n\t\t\tlet baseAttrs = cellNode.attrs;\n\t\t\tconst attrs = [];\n\t\t\tconst colwidth = baseAttrs.colwidth;\n\t\t\tif (baseAttrs.rowspan > 1) baseAttrs = {\n\t\t\t\t...baseAttrs,\n\t\t\t\trowspan: 1\n\t\t\t};\n\t\t\tif (baseAttrs.colspan > 1) baseAttrs = {\n\t\t\t\t...baseAttrs,\n\t\t\t\tcolspan: 1\n\t\t\t};\n\t\t\tconst rect = selectedRect(state), tr = state.tr;\n\t\t\tfor (let i = 0; i < rect.right - rect.left; i++) attrs.push(colwidth ? {\n\t\t\t\t...baseAttrs,\n\t\t\t\tcolwidth: colwidth && colwidth[i] ? [colwidth[i]] : null\n\t\t\t} : baseAttrs);\n\t\t\tlet lastCell;\n\t\t\tfor (let row = rect.top; row < rect.bottom; row++) {\n\t\t\t\tlet pos = rect.map.positionAt(row, rect.left, rect.table);\n\t\t\t\tif (row == rect.top) pos += cellNode.nodeSize;\n\t\t\t\tfor (let col = rect.left, i = 0; col < rect.right; col++, i++) {\n\t\t\t\t\tif (col == rect.left && row == rect.top) continue;\n\t\t\t\t\ttr.insert(lastCell = tr.mapping.map(pos + rect.tableStart, 1), getCellType({\n\t\t\t\t\t\tnode: cellNode,\n\t\t\t\t\t\trow,\n\t\t\t\t\t\tcol\n\t\t\t\t\t}).createAndFill(attrs[i]));\n\t\t\t\t}\n\t\t\t}\n\t\t\ttr.setNodeMarkup(cellPos, getCellType({\n\t\t\t\tnode: cellNode,\n\t\t\t\trow: rect.top,\n\t\t\t\tcol: rect.left\n\t\t\t}), attrs[0]);\n\t\t\tif (sel instanceof CellSelection) tr.setSelection(new CellSelection(tr.doc.resolve(sel.$anchorCell.pos), lastCell ? tr.doc.resolve(lastCell) : void 0));\n\t\t\tdispatch(tr);\n\t\t}\n\t\treturn true;\n\t};\n}\n/**\n* Returns a command that sets the given attribute to the given value,\n* and is only available when the currently selected cell doesn't\n* already have that attribute set to that value.\n*\n* @public\n*/\nfunction setCellAttr(name, value) {\n\treturn function(state, dispatch) {\n\t\tif (!isInTable(state)) return false;\n\t\tconst $cell = selectionCell(state);\n\t\tif ($cell.nodeAfter.attrs[name] === value) return false;\n\t\tif (dispatch) {\n\t\t\tconst tr = state.tr;\n\t\t\tif (state.selection instanceof CellSelection) state.selection.forEachCell((node, pos) => {\n\t\t\t\tif (node.attrs[name] !== value) tr.setNodeMarkup(pos, null, {\n\t\t\t\t\t...node.attrs,\n\t\t\t\t\t[name]: value\n\t\t\t\t});\n\t\t\t});\n\t\t\telse tr.setNodeMarkup($cell.pos, null, {\n\t\t\t\t...$cell.nodeAfter.attrs,\n\t\t\t\t[name]: value\n\t\t\t});\n\t\t\tdispatch(tr);\n\t\t}\n\t\treturn true;\n\t};\n}\nfunction deprecated_toggleHeader(type) {\n\treturn function(state, dispatch) {\n\t\tif (!isInTable(state)) return false;\n\t\tif (dispatch) {\n\t\t\tconst types = tableNodeTypes(state.schema);\n\t\t\tconst rect = selectedRect(state), tr = state.tr;\n\t\t\tconst cells = rect.map.cellsInRect(type == \"column\" ? {\n\t\t\t\tleft: rect.left,\n\t\t\t\ttop: 0,\n\t\t\t\tright: rect.right,\n\t\t\t\tbottom: rect.map.height\n\t\t\t} : type == \"row\" ? {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: rect.top,\n\t\t\t\tright: rect.map.width,\n\t\t\t\tbottom: rect.bottom\n\t\t\t} : rect);\n\t\t\tconst nodes = cells.map((pos) => rect.table.nodeAt(pos));\n\t\t\tfor (let i = 0; i < cells.length; i++) if (nodes[i].type == types.header_cell) tr.setNodeMarkup(rect.tableStart + cells[i], types.cell, nodes[i].attrs);\n\t\t\tif (tr.steps.length === 0) for (let i = 0; i < cells.length; i++) tr.setNodeMarkup(rect.tableStart + cells[i], types.header_cell, nodes[i].attrs);\n\t\t\tdispatch(tr);\n\t\t}\n\t\treturn true;\n\t};\n}\nfunction isHeaderEnabledByType(type, rect, types) {\n\tconst cellPositions = rect.map.cellsInRect({\n\t\tleft: 0,\n\t\ttop: 0,\n\t\tright: type == \"row\" ? rect.map.width : 1,\n\t\tbottom: type == \"column\" ? rect.map.height : 1\n\t});\n\tfor (let i = 0; i < cellPositions.length; i++) {\n\t\tconst cell = rect.table.nodeAt(cellPositions[i]);\n\t\tif (cell && cell.type !== types.header_cell) return false;\n\t}\n\treturn true;\n}\n/**\n* Toggles between row/column header and normal cells (Only applies to first row/column).\n* For deprecated behavior pass `useDeprecatedLogic` in options with true.\n*\n* @public\n*/\nfunction toggleHeader(type, options) {\n\toptions = options || { useDeprecatedLogic: false };\n\tif (options.useDeprecatedLogic) return deprecated_toggleHeader(type);\n\treturn function(state, dispatch) {\n\t\tif (!isInTable(state)) return false;\n\t\tif (dispatch) {\n\t\t\tconst types = tableNodeTypes(state.schema);\n\t\t\tconst rect = selectedRect(state), tr = state.tr;\n\t\t\tconst isHeaderRowEnabled = isHeaderEnabledByType(\"row\", rect, types);\n\t\t\tconst isHeaderColumnEnabled = isHeaderEnabledByType(\"column\", rect, types);\n\t\t\tconst selectionStartsAt = (type === \"column\" ? isHeaderRowEnabled : type === \"row\" ? isHeaderColumnEnabled : false) ? 1 : 0;\n\t\t\tconst cellsRect = type == \"column\" ? {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: selectionStartsAt,\n\t\t\t\tright: 1,\n\t\t\t\tbottom: rect.map.height\n\t\t\t} : type == \"row\" ? {\n\t\t\t\tleft: selectionStartsAt,\n\t\t\t\ttop: 0,\n\t\t\t\tright: rect.map.width,\n\t\t\t\tbottom: 1\n\t\t\t} : rect;\n\t\t\tconst newType = type == \"column\" ? isHeaderColumnEnabled ? types.cell : types.header_cell : type == \"row\" ? isHeaderRowEnabled ? types.cell : types.header_cell : types.cell;\n\t\t\trect.map.cellsInRect(cellsRect).forEach((relativeCellPos) => {\n\t\t\t\tconst cellPos = relativeCellPos + rect.tableStart;\n\t\t\t\tconst cell = tr.doc.nodeAt(cellPos);\n\t\t\t\tif (cell) tr.setNodeMarkup(cellPos, newType, cell.attrs);\n\t\t\t});\n\t\t\tdispatch(tr);\n\t\t}\n\t\treturn true;\n\t};\n}\n/**\n* Toggles whether the selected row contains header cells.\n*\n* @public\n*/\nconst toggleHeaderRow = toggleHeader(\"row\", { useDeprecatedLogic: true });\n/**\n* Toggles whether the selected column contains header cells.\n*\n* @public\n*/\nconst toggleHeaderColumn = toggleHeader(\"column\", { useDeprecatedLogic: true });\n/**\n* Toggles whether the selected cells are header cells.\n*\n* @public\n*/\nconst toggleHeaderCell = toggleHeader(\"cell\", { useDeprecatedLogic: true });\nfunction findNextCell($cell, dir) {\n\tif (dir < 0) {\n\t\tconst before = $cell.nodeBefore;\n\t\tif (before) return $cell.pos - before.nodeSize;\n\t\tfor (let row = $cell.index(-1) - 1, rowEnd = $cell.before(); row >= 0; row--) {\n\t\t\tconst rowNode = $cell.node(-1).child(row);\n\t\t\tconst lastChild = rowNode.lastChild;\n\t\t\tif (lastChild) return rowEnd - 1 - lastChild.nodeSize;\n\t\t\trowEnd -= rowNode.nodeSize;\n\t\t}\n\t} else {\n\t\tif ($cell.index() < $cell.parent.childCount - 1) return $cell.pos + $cell.nodeAfter.nodeSize;\n\t\tconst table = $cell.node(-1);\n\t\tfor (let row = $cell.indexAfter(-1), rowStart = $cell.after(); row < table.childCount; row++) {\n\t\t\tconst rowNode = table.child(row);\n\t\t\tif (rowNode.childCount) return rowStart + 1;\n\t\t\trowStart += rowNode.nodeSize;\n\t\t}\n\t}\n\treturn null;\n}\n/**\n* Returns a command for selecting the next (direction=1) or previous\n* (direction=-1) cell in a table.\n*\n* @public\n*/\nfunction goToNextCell(direction) {\n\treturn function(state, dispatch) {\n\t\tif (!isInTable(state)) return false;\n\t\tconst cell = findNextCell(selectionCell(state), direction);\n\t\tif (cell == null) return false;\n\t\tif (dispatch) {\n\t\t\tconst $cell = state.doc.resolve(cell);\n\t\t\tdispatch(state.tr.setSelection(TextSelection.between($cell, moveCellForward($cell))).scrollIntoView());\n\t\t}\n\t\treturn true;\n\t};\n}\n/**\n* Deletes the table around the selection, if any.\n*\n* @public\n*/\nfunction deleteTable(state, dispatch) {\n\tconst $pos = state.selection.$anchor;\n\tfor (let d = $pos.depth; d > 0; d--) if ($pos.node(d).type.spec.tableRole == \"table\") {\n\t\tif (dispatch) dispatch(state.tr.delete($pos.before(d), $pos.after(d)).scrollIntoView());\n\t\treturn true;\n\t}\n\treturn false;\n}\n/**\n* Deletes the content of the selected cells, if they are not empty.\n*\n* @public\n*/\nfunction deleteCellSelection(state, dispatch) {\n\tconst sel = state.selection;\n\tif (!(sel instanceof CellSelection)) return false;\n\tif (dispatch) {\n\t\tconst tr = state.tr;\n\t\tconst baseContent = tableNodeTypes(state.schema).cell.createAndFill().content;\n\t\tsel.forEachCell((cell, pos) => {\n\t\t\tif (!cell.content.eq(baseContent)) tr.replace(tr.mapping.map(pos + 1), tr.mapping.map(pos + cell.nodeSize - 1), new Slice(baseContent, 0, 0));\n\t\t});\n\t\tif (tr.docChanged) dispatch(tr);\n\t}\n\treturn true;\n}\n/**\n* Move a table row from index `from` to index `to`.\n*\n* @public\n*/\nfunction moveTableRow(options) {\n\treturn (state, dispatch) => {\n\t\tconst { from: originIndex, to: targetIndex, select = true, pos = state.selection.from } = options;\n\t\tconst tr = state.tr;\n\t\tif (moveRow({\n\t\t\ttr,\n\t\t\toriginIndex,\n\t\t\ttargetIndex,\n\t\t\tselect,\n\t\t\tpos\n\t\t})) {\n\t\t\tdispatch === null || dispatch === void 0 || dispatch(tr);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n}\n/**\n* Move a table column from index `from` to index `to`.\n*\n* @public\n*/\nfunction moveTableColumn(options) {\n\treturn (state, dispatch) => {\n\t\tconst { from: originIndex, to: targetIndex, select = true, pos = state.selection.from } = options;\n\t\tconst tr = state.tr;\n\t\tif (moveColumn({\n\t\t\ttr,\n\t\t\toriginIndex,\n\t\t\ttargetIndex,\n\t\t\tselect,\n\t\t\tpos\n\t\t})) {\n\t\t\tdispatch === null || dispatch === void 0 || dispatch(tr);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n}\n\n//#endregion\n//#region src/copypaste.ts\n/**\n* Get a rectangular area of cells from a slice, or null if the outer\n* nodes of the slice aren't table cells or rows.\n*\n* @internal\n*/\nfunction pastedCells(slice) {\n\tif (slice.size === 0) return null;\n\tlet { content, openStart, openEnd } = slice;\n\twhile (content.childCount == 1 && (openStart > 0 && openEnd > 0 || content.child(0).type.spec.tableRole == \"table\")) {\n\t\topenStart--;\n\t\topenEnd--;\n\t\tcontent = content.child(0).content;\n\t}\n\tconst first = content.child(0);\n\tconst role = first.type.spec.tableRole;\n\tconst schema = first.type.schema, rows = [];\n\tif (role == \"row\") for (let i = 0; i < content.childCount; i++) {\n\t\tlet cells = content.child(i).content;\n\t\tconst left = i ? 0 : Math.max(0, openStart - 1);\n\t\tconst right = i < content.childCount - 1 ? 0 : Math.max(0, openEnd - 1);\n\t\tif (left || right) cells = fitSlice(tableNodeTypes(schema).row, new Slice(cells, left, right)).content;\n\t\trows.push(cells);\n\t}\n\telse if (role == \"cell\" || role == \"header_cell\") rows.push(openStart || openEnd ? fitSlice(tableNodeTypes(schema).row, new Slice(content, openStart, openEnd)).content : content);\n\telse return null;\n\treturn ensureRectangular(schema, rows);\n}\nfunction ensureRectangular(schema, rows) {\n\tconst widths = [];\n\tfor (let i = 0; i < rows.length; i++) {\n\t\tconst row = rows[i];\n\t\tfor (let j = row.childCount - 1; j >= 0; j--) {\n\t\t\tconst { rowspan, colspan } = row.child(j).attrs;\n\t\t\tfor (let r = i; r < i + rowspan; r++) widths[r] = (widths[r] || 0) + colspan;\n\t\t}\n\t}\n\tlet width = 0;\n\tfor (let r = 0; r < widths.length; r++) width = Math.max(width, widths[r]);\n\tfor (let r = 0; r < widths.length; r++) {\n\t\tif (r >= rows.length) rows.push(Fragment.empty);\n\t\tif (widths[r] < width) {\n\t\t\tconst empty = tableNodeTypes(schema).cell.createAndFill();\n\t\t\tconst cells = [];\n\t\t\tfor (let i = widths[r]; i < width; i++) cells.push(empty);\n\t\t\trows[r] = rows[r].append(Fragment.from(cells));\n\t\t}\n\t}\n\treturn {\n\t\theight: rows.length,\n\t\twidth,\n\t\trows\n\t};\n}\nfunction fitSlice(nodeType, slice) {\n\tconst node = nodeType.createAndFill();\n\treturn new Transform(node).replace(0, node.content.size, slice).doc;\n}\n/**\n* Clip or extend (repeat) the given set of cells to cover the given\n* width and height. Will clip rowspan/colspan cells at the edges when\n* they stick out.\n*\n* @internal\n*/\nfunction clipCells({ width, height, rows }, newWidth, newHeight) {\n\tif (width != newWidth) {\n\t\tconst added = [];\n\t\tconst newRows = [];\n\t\tfor (let row = 0; row < rows.length; row++) {\n\t\t\tconst frag = rows[row], cells = [];\n\t\t\tfor (let col = added[row] || 0, i = 0; col < newWidth; i++) {\n\t\t\t\tlet cell = frag.child(i % frag.childCount);\n\t\t\t\tif (col + cell.attrs.colspan > newWidth) cell = cell.type.createChecked(removeColSpan(cell.attrs, cell.attrs.colspan, col + cell.attrs.colspan - newWidth), cell.content);\n\t\t\t\tcells.push(cell);\n\t\t\t\tcol += cell.attrs.colspan;\n\t\t\t\tfor (let j = 1; j < cell.attrs.rowspan; j++) added[row + j] = (added[row + j] || 0) + cell.attrs.colspan;\n\t\t\t}\n\t\t\tnewRows.push(Fragment.from(cells));\n\t\t}\n\t\trows = newRows;\n\t\twidth = newWidth;\n\t}\n\tif (height != newHeight) {\n\t\tconst newRows = [];\n\t\tfor (let row = 0, i = 0; row < newHeight; row++, i++) {\n\t\t\tconst cells = [], source = rows[i % height];\n\t\t\tfor (let j = 0; j < source.childCount; j++) {\n\t\t\t\tlet cell = source.child(j);\n\t\t\t\tif (row + cell.attrs.rowspan > newHeight) cell = cell.type.create({\n\t\t\t\t\t...cell.attrs,\n\t\t\t\t\trowspan: Math.max(1, newHeight - cell.attrs.rowspan)\n\t\t\t\t}, cell.content);\n\t\t\t\tcells.push(cell);\n\t\t\t}\n\t\t\tnewRows.push(Fragment.from(cells));\n\t\t}\n\t\trows = newRows;\n\t\theight = newHeight;\n\t}\n\treturn {\n\t\twidth,\n\t\theight,\n\t\trows\n\t};\n}\nfunction growTable(tr, map, table, start, width, height, mapFrom) {\n\tconst schema = tr.doc.type.schema;\n\tconst types = tableNodeTypes(schema);\n\tlet empty;\n\tlet emptyHead;\n\tif (width > map.width) for (let row = 0, rowEnd = 0; row < map.height; row++) {\n\t\tconst rowNode = table.child(row);\n\t\trowEnd += rowNode.nodeSize;\n\t\tconst cells = [];\n\t\tlet add;\n\t\tif (rowNode.lastChild == null || rowNode.lastChild.type == types.cell) add = empty || (empty = types.cell.createAndFill());\n\t\telse add = emptyHead || (emptyHead = types.header_cell.createAndFill());\n\t\tfor (let i = map.width; i < width; i++) cells.push(add);\n\t\ttr.insert(tr.mapping.slice(mapFrom).map(rowEnd - 1 + start), cells);\n\t}\n\tif (height > map.height) {\n\t\tconst cells = [];\n\t\tfor (let i = 0, start$1 = (map.height - 1) * map.width; i < Math.max(map.width, width); i++) {\n\t\t\tconst header = i >= map.width ? false : table.nodeAt(map.map[start$1 + i]).type == types.header_cell;\n\t\t\tcells.push(header ? emptyHead || (emptyHead = types.header_cell.createAndFill()) : empty || (empty = types.cell.createAndFill()));\n\t\t}\n\t\tconst emptyRow = types.row.create(null, Fragment.from(cells)), rows = [];\n\t\tfor (let i = map.height; i < height; i++) rows.push(emptyRow);\n\t\ttr.insert(tr.mapping.slice(mapFrom).map(start + table.nodeSize - 2), rows);\n\t}\n\treturn !!(empty || emptyHead);\n}\nfunction isolateHorizontal(tr, map, table, start, left, right, top, mapFrom) {\n\tif (top == 0 || top == map.height) return false;\n\tlet found = false;\n\tfor (let col = left; col < right; col++) {\n\t\tconst index = top * map.width + col, pos = map.map[index];\n\t\tif (map.map[index - map.width] == pos) {\n\t\t\tfound = true;\n\t\t\tconst cell = table.nodeAt(pos);\n\t\t\tconst { top: cellTop, left: cellLeft } = map.findCell(pos);\n\t\t\ttr.setNodeMarkup(tr.mapping.slice(mapFrom).map(pos + start), null, {\n\t\t\t\t...cell.attrs,\n\t\t\t\trowspan: top - cellTop\n\t\t\t});\n\t\t\ttr.insert(tr.mapping.slice(mapFrom).map(map.positionAt(top, cellLeft, table)), cell.type.createAndFill({\n\t\t\t\t...cell.attrs,\n\t\t\t\trowspan: cellTop + cell.attrs.rowspan - top\n\t\t\t}));\n\t\t\tcol += cell.attrs.colspan - 1;\n\t\t}\n\t}\n\treturn found;\n}\nfunction isolateVertical(tr, map, table, start, top, bottom, left, mapFrom) {\n\tif (left == 0 || left == map.width) return false;\n\tlet found = false;\n\tfor (let row = top; row < bottom; row++) {\n\t\tconst index = row * map.width + left, pos = map.map[index];\n\t\tif (map.map[index - 1] == pos) {\n\t\t\tfound = true;\n\t\t\tconst cell = table.nodeAt(pos);\n\t\t\tconst cellLeft = map.colCount(pos);\n\t\t\tconst updatePos = tr.mapping.slice(mapFrom).map(pos + start);\n\t\t\ttr.setNodeMarkup(updatePos, null, removeColSpan(cell.attrs, left - cellLeft, cell.attrs.colspan - (left - cellLeft)));\n\t\t\ttr.insert(updatePos + cell.nodeSize, cell.type.createAndFill(removeColSpan(cell.attrs, 0, left - cellLeft)));\n\t\t\trow += cell.attrs.rowspan - 1;\n\t\t}\n\t}\n\treturn found;\n}\n/**\n* Insert the given set of cells (as returned by `pastedCells`) into a\n* table, at the position pointed at by rect.\n*\n* @internal\n*/\nfunction insertCells(state, dispatch, tableStart, rect, cells) {\n\tlet table = tableStart ? state.doc.nodeAt(tableStart - 1) : state.doc;\n\tif (!table) throw new Error(\"No table found\");\n\tlet map = TableMap.get(table);\n\tconst { top, left } = rect;\n\tconst right = left + cells.width, bottom = top + cells.height;\n\tconst tr = state.tr;\n\tlet mapFrom = 0;\n\tfunction recomp() {\n\t\ttable = tableStart ? tr.doc.nodeAt(tableStart - 1) : tr.doc;\n\t\tif (!table) throw new Error(\"No table found\");\n\t\tmap = TableMap.get(table);\n\t\tmapFrom = tr.mapping.maps.length;\n\t}\n\tif (growTable(tr, map, table, tableStart, right, bottom, mapFrom)) recomp();\n\tif (isolateHorizontal(tr, map, table, tableStart, left, right, top, mapFrom)) recomp();\n\tif (isolateHorizontal(tr, map, table, tableStart, left, right, bottom, mapFrom)) recomp();\n\tif (isolateVertical(tr, map, table, tableStart, top, bottom, left, mapFrom)) recomp();\n\tif (isolateVertical(tr, map, table, tableStart, top, bottom, right, mapFrom)) recomp();\n\tfor (let row = top; row < bottom; row++) {\n\t\tconst from = map.positionAt(row, left, table), to = map.positionAt(row, right, table);\n\t\ttr.replace(tr.mapping.slice(mapFrom).map(from + tableStart), tr.mapping.slice(mapFrom).map(to + tableStart), new Slice(cells.rows[row - top], 0, 0));\n\t}\n\trecomp();\n\ttr.setSelection(new CellSelection(tr.doc.resolve(tableStart + map.positionAt(top, left, table)), tr.doc.resolve(tableStart + map.positionAt(bottom - 1, right - 1, table))));\n\tdispatch(tr);\n}\n\n//#endregion\n//#region src/input.ts\nconst handleKeyDown = keydownHandler({\n\tArrowLeft: arrow(\"horiz\", -1),\n\tArrowRight: arrow(\"horiz\", 1),\n\tArrowUp: arrow(\"vert\", -1),\n\tArrowDown: arrow(\"vert\", 1),\n\t\"Shift-ArrowLeft\": shiftArrow(\"horiz\", -1),\n\t\"Shift-ArrowRight\": shiftArrow(\"horiz\", 1),\n\t\"Shift-ArrowUp\": shiftArrow(\"vert\", -1),\n\t\"Shift-ArrowDown\": shiftArrow(\"vert\", 1),\n\tBackspace: deleteCellSelection,\n\t\"Mod-Backspace\": deleteCellSelection,\n\tDelete: deleteCellSelection,\n\t\"Mod-Delete\": deleteCellSelection\n});\nfunction maybeSetSelection(state, dispatch, selection) {\n\tif (selection.eq(state.selection)) return false;\n\tif (dispatch) dispatch(state.tr.setSelection(selection).scrollIntoView());\n\treturn true;\n}\n/**\n* @internal\n*/\nfunction arrow(axis, dir) {\n\treturn (state, dispatch, view) => {\n\t\tif (!view) return false;\n\t\tconst sel = state.selection;\n\t\tif (sel instanceof CellSelection) return maybeSetSelection(state, dispatch, Selection.near(sel.$headCell, dir));\n\t\tif (axis != \"horiz\" && !sel.empty) return false;\n\t\tconst end = atEndOfCell(view, axis, dir);\n\t\tif (end == null) return false;\n\t\tif (axis == \"horiz\") return maybeSetSelection(state, dispatch, Selection.near(state.doc.resolve(sel.head + dir), dir));\n\t\telse {\n\t\t\tconst $cell = state.doc.resolve(end);\n\t\t\tconst $next = nextCell($cell, axis, dir);\n\t\t\tlet newSel;\n\t\t\tif ($next) newSel = Selection.near($next, 1);\n\t\t\telse if (dir < 0) newSel = Selection.near(state.doc.resolve($cell.before(-1)), -1);\n\t\t\telse newSel = Selection.near(state.doc.resolve($cell.after(-1)), 1);\n\t\t\treturn maybeSetSelection(state, dispatch, newSel);\n\t\t}\n\t};\n}\nfunction shiftArrow(axis, dir) {\n\treturn (state, dispatch, view) => {\n\t\tif (!view) return false;\n\t\tconst sel = state.selection;\n\t\tlet cellSel;\n\t\tif (sel instanceof CellSelection) cellSel = sel;\n\t\telse {\n\t\t\tconst end = atEndOfCell(view, axis, dir);\n\t\t\tif (end == null) return false;\n\t\t\tcellSel = new CellSelection(state.doc.resolve(end));\n\t\t}\n\t\tconst $head = nextCell(cellSel.$headCell, axis, dir);\n\t\tif (!$head) return false;\n\t\treturn maybeSetSelection(state, dispatch, new CellSelection(cellSel.$anchorCell, $head));\n\t};\n}\nfunction handleTripleClick(view, pos) {\n\tconst doc = view.state.doc, $cell = cellAround(doc.resolve(pos));\n\tif (!$cell) return false;\n\tview.dispatch(view.state.tr.setSelection(new CellSelection($cell)));\n\treturn true;\n}\n/**\n* @public\n*/\nfunction handlePaste(view, _, slice) {\n\tif (!isInTable(view.state)) return false;\n\tlet cells = pastedCells(slice);\n\tconst sel = view.state.selection;\n\tif (sel instanceof CellSelection) {\n\t\tif (!cells) cells = {\n\t\t\twidth: 1,\n\t\t\theight: 1,\n\t\t\trows: [Fragment.from(fitSlice(tableNodeTypes(view.state.schema).cell, slice))]\n\t\t};\n\t\tconst table = sel.$anchorCell.node(-1);\n\t\tconst start = sel.$anchorCell.start(-1);\n\t\tconst rect = TableMap.get(table).rectBetween(sel.$anchorCell.pos - start, sel.$headCell.pos - start);\n\t\tcells = clipCells(cells, rect.right - rect.left, rect.bottom - rect.top);\n\t\tinsertCells(view.state, view.dispatch, start, rect, cells);\n\t\treturn true;\n\t} else if (cells) {\n\t\tconst $cell = selectionCell(view.state);\n\t\tconst start = $cell.start(-1);\n\t\tinsertCells(view.state, view.dispatch, start, TableMap.get($cell.node(-1)).findCell($cell.pos - start), cells);\n\t\treturn true;\n\t} else return false;\n}\nfunction handleMouseDown(view, startEvent) {\n\tvar _cellUnderMouse;\n\tif (startEvent.ctrlKey || startEvent.metaKey) return;\n\tconst startDOMCell = domInCell(view, startEvent.target);\n\tlet $anchor;\n\tif (startEvent.shiftKey && view.state.selection instanceof CellSelection) {\n\t\tsetCellSelection(view.state.selection.$anchorCell, startEvent);\n\t\tstartEvent.preventDefault();\n\t} else if (startEvent.shiftKey && startDOMCell && ($anchor = cellAround(view.state.selection.$anchor)) != null && ((_cellUnderMouse = cellUnderMouse(view, startEvent)) === null || _cellUnderMouse === void 0 ? void 0 : _cellUnderMouse.pos) != $anchor.pos) {\n\t\tsetCellSelection($anchor, startEvent);\n\t\tstartEvent.preventDefault();\n\t} else if (!startDOMCell) return;\n\tfunction setCellSelection($anchor$1, event) {\n\t\tlet $head = cellUnderMouse(view, event);\n\t\tconst starting = tableEditingKey.getState(view.state) == null;\n\t\tif (!$head || !inSameTable($anchor$1, $head)) if (starting) $head = $anchor$1;\n\t\telse return;\n\t\tconst selection = new CellSelection($anchor$1, $head);\n\t\tif (starting || !view.state.selection.eq(selection)) {\n\t\t\tconst tr = view.state.tr.setSelection(selection);\n\t\t\tif (starting) tr.setMeta(tableEditingKey, $anchor$1.pos);\n\t\t\tview.dispatch(tr);\n\t\t}\n\t}\n\tfunction stop() {\n\t\tview.root.removeEventListener(\"mouseup\", stop);\n\t\tview.root.removeEventListener(\"dragstart\", stop);\n\t\tview.root.removeEventListener(\"mousemove\", move);\n\t\tif (tableEditingKey.getState(view.state) != null) view.dispatch(view.state.tr.setMeta(tableEditingKey, -1));\n\t}\n\tfunction move(_event) {\n\t\tconst event = _event;\n\t\tconst anchor = tableEditingKey.getState(view.state);\n\t\tlet $anchor$1;\n\t\tif (anchor != null) $anchor$1 = view.state.doc.resolve(anchor);\n\t\telse if (domInCell(view, event.target) != startDOMCell) {\n\t\t\t$anchor$1 = cellUnderMouse(view, startEvent);\n\t\t\tif (!$anchor$1) return stop();\n\t\t}\n\t\tif ($anchor$1) setCellSelection($anchor$1, event);\n\t}\n\tview.root.addEventListener(\"mouseup\", stop);\n\tview.root.addEventListener(\"dragstart\", stop);\n\tview.root.addEventListener(\"mousemove\", move);\n}\nfunction atEndOfCell(view, axis, dir) {\n\tif (!(view.state.selection instanceof TextSelection)) return null;\n\tconst { $head } = view.state.selection;\n\tfor (let d = $head.depth - 1; d >= 0; d--) {\n\t\tconst parent = $head.node(d);\n\t\tif ((dir < 0 ? $head.index(d) : $head.indexAfter(d)) != (dir < 0 ? 0 : parent.childCount)) return null;\n\t\tif (parent.type.spec.tableRole == \"cell\" || parent.type.spec.tableRole == \"header_cell\") {\n\t\t\tconst cellPos = $head.before(d);\n\t\t\tconst dirStr = axis == \"vert\" ? dir > 0 ? \"down\" : \"up\" : dir > 0 ? \"right\" : \"left\";\n\t\t\treturn view.endOfTextblock(dirStr) ? cellPos : null;\n\t\t}\n\t}\n\treturn null;\n}\nfunction domInCell(view, dom) {\n\tfor (; dom && dom != view.dom; dom = dom.parentNode) if (dom.nodeName == \"TD\" || dom.nodeName == \"TH\") return dom;\n\treturn null;\n}\nfunction cellUnderMouse(view, event) {\n\tconst mousePos = view.posAtCoords({\n\t\tleft: event.clientX,\n\t\ttop: event.clientY\n\t});\n\tif (!mousePos) return null;\n\tconst pos = mousePos.inside >= 0 ? mousePos.inside : mousePos.pos;\n\treturn cellAround(view.state.doc.resolve(pos));\n}\n\n//#endregion\n//#region src/tableview.ts\n/**\n* @public\n*/\nvar TableView = class {\n\tconstructor(node, defaultCellMinWidth) {\n\t\tthis.node = node;\n\t\tthis.defaultCellMinWidth = defaultCellMinWidth;\n\t\tthis.dom = document.createElement(\"div\");\n\t\tthis.dom.className = \"tableWrapper\";\n\t\tthis.table = this.dom.appendChild(document.createElement(\"table\"));\n\t\tthis.table.style.setProperty(\"--default-cell-min-width\", `${defaultCellMinWidth}px`);\n\t\tthis.colgroup = this.table.appendChild(document.createElement(\"colgroup\"));\n\t\tupdateColumnsOnResize(node, this.colgroup, this.table, defaultCellMinWidth);\n\t\tthis.contentDOM = this.table.appendChild(document.createElement(\"tbody\"));\n\t}\n\tupdate(node) {\n\t\tif (node.type != this.node.type) return false;\n\t\tthis.node = node;\n\t\tupdateColumnsOnResize(node, this.colgroup, this.table, this.defaultCellMinWidth);\n\t\treturn true;\n\t}\n\tignoreMutation(record) {\n\t\treturn record.type == \"attributes\" && (record.target == this.table || this.colgroup.contains(record.target));\n\t}\n};\n/**\n* @public\n*/\nfunction updateColumnsOnResize(node, colgroup, table, defaultCellMinWidth, overrideCol, overrideValue) {\n\tlet totalWidth = 0;\n\tlet fixedWidth = true;\n\tlet nextDOM = colgroup.firstChild;\n\tconst row = node.firstChild;\n\tif (!row) return;\n\tfor (let i = 0, col = 0; i < row.childCount; i++) {\n\t\tconst { colspan, colwidth } = row.child(i).attrs;\n\t\tfor (let j = 0; j < colspan; j++, col++) {\n\t\t\tconst hasWidth = overrideCol == col ? overrideValue : colwidth && colwidth[j];\n\t\t\tconst cssWidth = hasWidth ? hasWidth + \"px\" : \"\";\n\t\t\ttotalWidth += hasWidth || defaultCellMinWidth;\n\t\t\tif (!hasWidth) fixedWidth = false;\n\t\t\tif (!nextDOM) {\n\t\t\t\tconst col$1 = document.createElement(\"col\");\n\t\t\t\tcol$1.style.width = cssWidth;\n\t\t\t\tcolgroup.appendChild(col$1);\n\t\t\t} else {\n\t\t\t\tif (nextDOM.style.width != cssWidth) nextDOM.style.width = cssWidth;\n\t\t\t\tnextDOM = nextDOM.nextSibling;\n\t\t\t}\n\t\t}\n\t}\n\twhile (nextDOM) {\n\t\tvar _nextDOM$parentNode;\n\t\tconst after = nextDOM.nextSibling;\n\t\t(_nextDOM$parentNode = nextDOM.parentNode) === null || _nextDOM$parentNode === void 0 || _nextDOM$parentNode.removeChild(nextDOM);\n\t\tnextDOM = after;\n\t}\n\tif (fixedWidth) {\n\t\ttable.style.width = totalWidth + \"px\";\n\t\ttable.style.minWidth = \"\";\n\t} else {\n\t\ttable.style.width = \"\";\n\t\ttable.style.minWidth = totalWidth + \"px\";\n\t}\n}\n\n//#endregion\n//#region src/columnresizing.ts\n/**\n* @public\n*/\nconst columnResizingPluginKey = new PluginKey(\"tableColumnResizing\");\n/**\n* @public\n*/\nfunction columnResizing({ handleWidth = 5, cellMinWidth = 25, defaultCellMinWidth = 100, View = TableView, lastColumnResizable = true } = {}) {\n\tconst plugin = new Plugin({\n\t\tkey: columnResizingPluginKey,\n\t\tstate: {\n\t\t\tinit(_, state) {\n\t\t\t\tvar _plugin$spec;\n\t\t\t\tconst nodeViews = (_plugin$spec = plugin.spec) === null || _plugin$spec === void 0 || (_plugin$spec = _plugin$spec.props) === null || _plugin$spec === void 0 ? void 0 : _plugin$spec.nodeViews;\n\t\t\t\tconst tableName = tableNodeTypes(state.schema).table.name;\n\t\t\t\tif (View && nodeViews) nodeViews[tableName] = (node, view) => {\n\t\t\t\t\treturn new View(node, defaultCellMinWidth, view);\n\t\t\t\t};\n\t\t\t\treturn new ResizeState(-1, false);\n\t\t\t},\n\t\t\tapply(tr, prev) {\n\t\t\t\treturn prev.apply(tr);\n\t\t\t}\n\t\t},\n\t\tprops: {\n\t\t\tattributes: (state) => {\n\t\t\t\tconst pluginState = columnResizingPluginKey.getState(state);\n\t\t\t\treturn pluginState && pluginState.activeHandle > -1 ? { class: \"resize-cursor\" } : {};\n\t\t\t},\n\t\t\thandleDOMEvents: {\n\t\t\t\tmousemove: (view, event) => {\n\t\t\t\t\thandleMouseMove(view, event, handleWidth, lastColumnResizable);\n\t\t\t\t},\n\t\t\t\tmouseleave: (view) => {\n\t\t\t\t\thandleMouseLeave(view);\n\t\t\t\t},\n\t\t\t\tmousedown: (view, event) => {\n\t\t\t\t\thandleMouseDown$1(view, event, cellMinWidth, defaultCellMinWidth);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdecorations: (state) => {\n\t\t\t\tconst pluginState = columnResizingPluginKey.getState(state);\n\t\t\t\tif (pluginState && pluginState.activeHandle > -1) return handleDecorations(state, pluginState.activeHandle);\n\t\t\t},\n\t\t\tnodeViews: {}\n\t\t}\n\t});\n\treturn plugin;\n}\n/**\n* @public\n*/\nvar ResizeState = class ResizeState {\n\tconstructor(activeHandle, dragging) {\n\t\tthis.activeHandle = activeHandle;\n\t\tthis.dragging = dragging;\n\t}\n\tapply(tr) {\n\t\tconst state = this;\n\t\tconst action = tr.getMeta(columnResizingPluginKey);\n\t\tif (action && action.setHandle != null) return new ResizeState(action.setHandle, false);\n\t\tif (action && action.setDragging !== void 0) return new ResizeState(state.activeHandle, action.setDragging);\n\t\tif (state.activeHandle > -1 && tr.docChanged) {\n\t\t\tlet handle = tr.mapping.map(state.activeHandle, -1);\n\t\t\tif (!pointsAtCell(tr.doc.resolve(handle))) handle = -1;\n\t\t\treturn new ResizeState(handle, state.dragging);\n\t\t}\n\t\treturn state;\n\t}\n};\nfunction handleMouseMove(view, event, handleWidth, lastColumnResizable) {\n\tif (!view.editable) return;\n\tconst pluginState = columnResizingPluginKey.getState(view.state);\n\tif (!pluginState) return;\n\tif (!pluginState.dragging) {\n\t\tconst target = domCellAround(event.target);\n\t\tlet cell = -1;\n\t\tif (target) {\n\t\t\tconst { left, right } = target.getBoundingClientRect();\n\t\t\tif (event.clientX - left <= handleWidth) cell = edgeCell(view, event, \"left\", handleWidth);\n\t\t\telse if (right - event.clientX <= handleWidth) cell = edgeCell(view, event, \"right\", handleWidth);\n\t\t}\n\t\tif (cell != pluginState.activeHandle) {\n\t\t\tif (!lastColumnResizable && cell !== -1) {\n\t\t\t\tconst $cell = view.state.doc.resolve(cell);\n\t\t\t\tconst table = $cell.node(-1);\n\t\t\t\tconst map = TableMap.get(table);\n\t\t\t\tconst tableStart = $cell.start(-1);\n\t\t\t\tif (map.colCount($cell.pos - tableStart) + $cell.nodeAfter.attrs.colspan - 1 == map.width - 1) return;\n\t\t\t}\n\t\t\tupdateHandle(view, cell);\n\t\t}\n\t}\n}\nfunction handleMouseLeave(view) {\n\tif (!view.editable) return;\n\tconst pluginState = columnResizingPluginKey.getState(view.state);\n\tif (pluginState && pluginState.activeHandle > -1 && !pluginState.dragging) updateHandle(view, -1);\n}\nfunction handleMouseDown$1(view, event, cellMinWidth, defaultCellMinWidth) {\n\tvar _view$dom$ownerDocume;\n\tif (!view.editable) return false;\n\tconst win = (_view$dom$ownerDocume = view.dom.ownerDocument.defaultView) !== null && _view$dom$ownerDocume !== void 0 ? _view$dom$ownerDocume : window;\n\tconst pluginState = columnResizingPluginKey.getState(view.state);\n\tif (!pluginState || pluginState.activeHandle == -1 || pluginState.dragging) return false;\n\tconst cell = view.state.doc.nodeAt(pluginState.activeHandle);\n\tconst width = currentColWidth(view, pluginState.activeHandle, cell.attrs);\n\tview.dispatch(view.state.tr.setMeta(columnResizingPluginKey, { setDragging: {\n\t\tstartX: event.clientX,\n\t\tstartWidth: width\n\t} }));\n\tfunction finish(event$1) {\n\t\twin.removeEventListener(\"mouseup\", finish);\n\t\twin.removeEventListener(\"mousemove\", move);\n\t\tconst pluginState$1 = columnResizingPluginKey.getState(view.state);\n\t\tif (pluginState$1 === null || pluginState$1 === void 0 ? void 0 : pluginState$1.dragging) {\n\t\t\tupdateColumnWidth(view, pluginState$1.activeHandle, draggedWidth(pluginState$1.dragging, event$1, cellMinWidth));\n\t\t\tview.dispatch(view.state.tr.setMeta(columnResizingPluginKey, { setDragging: null }));\n\t\t}\n\t}\n\tfunction move(event$1) {\n\t\tif (!event$1.which) return finish(event$1);\n\t\tconst pluginState$1 = columnResizingPluginKey.getState(view.state);\n\t\tif (!pluginState$1) return;\n\t\tif (pluginState$1.dragging) {\n\t\t\tconst dragged = draggedWidth(pluginState$1.dragging, event$1, cellMinWidth);\n\t\t\tdisplayColumnWidth(view, pluginState$1.activeHandle, dragged, defaultCellMinWidth);\n\t\t}\n\t}\n\tdisplayColumnWidth(view, pluginState.activeHandle, width, defaultCellMinWidth);\n\twin.addEventListener(\"mouseup\", finish);\n\twin.addEventListener(\"mousemove\", move);\n\tevent.preventDefault();\n\treturn true;\n}\nfunction currentColWidth(view, cellPos, { colspan, colwidth }) {\n\tconst width = colwidth && colwidth[colwidth.length - 1];\n\tif (width) return width;\n\tconst dom = view.domAtPos(cellPos);\n\tlet domWidth = dom.node.childNodes[dom.offset].offsetWidth, parts = colspan;\n\tif (colwidth) {\n\t\tfor (let i = 0; i < colspan; i++) if (colwidth[i]) {\n\t\t\tdomWidth -= colwidth[i];\n\t\t\tparts--;\n\t\t}\n\t}\n\treturn domWidth / parts;\n}\nfunction domCellAround(target) {\n\twhile (target && target.nodeName != \"TD\" && target.nodeName != \"TH\") target = target.classList && target.classList.contains(\"ProseMirror\") ? null : target.parentNode;\n\treturn target;\n}\nfunction edgeCell(view, event, side, handleWidth) {\n\tconst offset = side == \"right\" ? -handleWidth : handleWidth;\n\tconst found = view.posAtCoords({\n\t\tleft: event.clientX + offset,\n\t\ttop: event.clientY\n\t});\n\tif (!found) return -1;\n\tconst { pos } = found;\n\tconst $cell = cellAround(view.state.doc.resolve(pos));\n\tif (!$cell) return -1;\n\tif (side == \"right\") return $cell.pos;\n\tconst map = TableMap.get($cell.node(-1)), start = $cell.start(-1);\n\tconst index = map.map.indexOf($cell.pos - start);\n\treturn index % map.width == 0 ? -1 : start + map.map[index - 1];\n}\nfunction draggedWidth(dragging, event, resizeMinWidth) {\n\tconst offset = event.clientX - dragging.startX;\n\treturn Math.max(resizeMinWidth, dragging.startWidth + offset);\n}\nfunction updateHandle(view, value) {\n\tview.dispatch(view.state.tr.setMeta(columnResizingPluginKey, { setHandle: value }));\n}\nfunction updateColumnWidth(view, cell, width) {\n\tconst $cell = view.state.doc.resolve(cell);\n\tconst table = $cell.node(-1), map = TableMap.get(table), start = $cell.start(-1);\n\tconst col = map.colCount($cell.pos - start) + $cell.nodeAfter.attrs.colspan - 1;\n\tconst tr = view.state.tr;\n\tfor (let row = 0; row < map.height; row++) {\n\t\tconst mapIndex = row * map.width + col;\n\t\tif (row && map.map[mapIndex] == map.map[mapIndex - map.width]) continue;\n\t\tconst pos = map.map[mapIndex];\n\t\tconst attrs = table.nodeAt(pos).attrs;\n\t\tconst index = attrs.colspan == 1 ? 0 : col - map.colCount(pos);\n\t\tif (attrs.colwidth && attrs.colwidth[index] == width) continue;\n\t\tconst colwidth = attrs.colwidth ? attrs.colwidth.slice() : zeroes(attrs.colspan);\n\t\tcolwidth[index] = width;\n\t\ttr.setNodeMarkup(start + pos, null, {\n\t\t\t...attrs,\n\t\t\tcolwidth\n\t\t});\n\t}\n\tif (tr.docChanged) view.dispatch(tr);\n}\nfunction displayColumnWidth(view, cell, width, defaultCellMinWidth) {\n\tconst $cell = view.state.doc.resolve(cell);\n\tconst table = $cell.node(-1), start = $cell.start(-1);\n\tconst col = TableMap.get(table).colCount($cell.pos - start) + $cell.nodeAfter.attrs.colspan - 1;\n\tlet dom = view.domAtPos($cell.start(-1)).node;\n\twhile (dom && dom.nodeName != \"TABLE\") dom = dom.parentNode;\n\tif (!dom) return;\n\tupdateColumnsOnResize(table, dom.firstChild, dom, defaultCellMinWidth, col, width);\n}\nfunction zeroes(n) {\n\treturn Array(n).fill(0);\n}\nfunction handleDecorations(state, cell) {\n\tconst decorations = [];\n\tconst $cell = state.doc.resolve(cell);\n\tconst table = $cell.node(-1);\n\tif (!table) return DecorationSet.empty;\n\tconst map = TableMap.get(table);\n\tconst start = $cell.start(-1);\n\tconst col = map.colCount($cell.pos - start) + $cell.nodeAfter.attrs.colspan - 1;\n\tfor (let row = 0; row < map.height; row++) {\n\t\tconst index = col + row * map.width;\n\t\tif ((col == map.width - 1 || map.map[index] != map.map[index + 1]) && (row == 0 || map.map[index] != map.map[index - map.width])) {\n\t\t\tvar _columnResizingPlugin;\n\t\t\tconst cellPos = map.map[index];\n\t\t\tconst pos = start + cellPos + table.nodeAt(cellPos).nodeSize - 1;\n\t\t\tconst dom = document.createElement(\"div\");\n\t\t\tdom.className = \"column-resize-handle\";\n\t\t\tif ((_columnResizingPlugin = columnResizingPluginKey.getState(state)) === null || _columnResizingPlugin === void 0 ? void 0 : _columnResizingPlugin.dragging) decorations.push(Decoration.node(start + cellPos, start + cellPos + table.nodeAt(cellPos).nodeSize, { class: \"column-resize-dragging\" }));\n\t\t\tdecorations.push(Decoration.widget(pos, dom));\n\t\t}\n\t}\n\treturn DecorationSet.create(state.doc, decorations);\n}\n\n//#endregion\n//#region src/index.ts\n/**\n* Creates a [plugin](http://prosemirror.net/docs/ref/#state.Plugin)\n* that, when added to an editor, enables cell-selection, handles\n* cell-based copy/paste, and makes sure tables stay well-formed (each\n* row has the same width, and cells don't overlap).\n*\n* You should probably put this plugin near the end of your array of\n* plugins, since it handles mouse and arrow key events in tables\n* rather broadly, and other plugins, like the gap cursor or the\n* column-width dragging plugin, might want to get a turn first to\n* perform more specific behavior.\n*\n* @public\n*/\nfunction tableEditing({ allowTableNodeSelection = false } = {}) {\n\treturn new Plugin({\n\t\tkey: tableEditingKey,\n\t\tstate: {\n\t\t\tinit() {\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tapply(tr, cur) {\n\t\t\t\tconst set = tr.getMeta(tableEditingKey);\n\t\t\t\tif (set != null) return set == -1 ? null : set;\n\t\t\t\tif (cur == null || !tr.docChanged) return cur;\n\t\t\t\tconst { deleted, pos } = tr.mapping.mapResult(cur);\n\t\t\t\treturn deleted ? null : pos;\n\t\t\t}\n\t\t},\n\t\tprops: {\n\t\t\tdecorations: drawCellSelection,\n\t\t\thandleDOMEvents: { mousedown: handleMouseDown },\n\t\t\tcreateSelectionBetween(view) {\n\t\t\t\treturn tableEditingKey.getState(view.state) != null ? view.state.selection : null;\n\t\t\t},\n\t\t\thandleTripleClick,\n\t\t\thandleKeyDown,\n\t\t\thandlePaste\n\t\t},\n\t\tappendTransaction(_, oldState, state) {\n\t\t\treturn normalizeSelection(state, fixTables(state, oldState), allowTableNodeSelection);\n\t\t}\n\t});\n}\n\n//#endregion\nexport { CellBookmark, CellSelection, ResizeState, TableMap, TableView, clipCells as __clipCells, insertCells as __insertCells, pastedCells as __pastedCells, addColSpan, addColumn, addColumnAfter, addColumnBefore, addRow, addRowAfter, addRowBefore, cellAround, cellNear, colCount, columnIsHeader, columnResizing, columnResizingPluginKey, deleteCellSelection, deleteColumn, deleteRow, deleteTable, findCell, findCellPos, findCellRange, findTable, fixTables, fixTablesKey, goToNextCell, handlePaste, inSameTable, isInTable, mergeCells, moveCellForward, moveTableColumn, moveTableRow, nextCell, pointsAtCell, removeColSpan, removeColumn, removeRow, rowIsHeader, selectedRect, selectionCell, setCellAttr, splitCell, splitCellWithType, tableEditing, tableEditingKey, tableNodeTypes, tableNodes, toggleHeader, toggleHeaderCell, toggleHeaderColumn, toggleHeaderRow, updateColumnsOnResize };\n//# sourceMappingURL=index.js.map","// src/cell/table-cell.ts\nimport { mergeAttributes, Node } from \"@tiptap/core\";\nvar TableCell = Node.create({\n  name: \"tableCell\",\n  addOptions() {\n    return {\n      HTMLAttributes: {}\n    };\n  },\n  content: \"block+\",\n  addAttributes() {\n    return {\n      colspan: {\n        default: 1\n      },\n      rowspan: {\n        default: 1\n      },\n      colwidth: {\n        default: null,\n        parseHTML: (element) => {\n          var _a, _b;\n          const colwidth = element.getAttribute(\"colwidth\");\n          const value = colwidth ? colwidth.split(\",\").map((width) => parseInt(width, 10)) : null;\n          if (!value) {\n            const cols = (_a = element.closest(\"table\")) == null ? void 0 : _a.querySelectorAll(\"colgroup > col\");\n            const cellIndex = Array.from(((_b = element.parentElement) == null ? void 0 : _b.children) || []).indexOf(element);\n            if (cellIndex && cellIndex > -1 && cols && cols[cellIndex]) {\n              const colWidth = cols[cellIndex].getAttribute(\"width\");\n              return colWidth ? [parseInt(colWidth, 10)] : null;\n            }\n          }\n          return value;\n        }\n      }\n    };\n  },\n  tableRole: \"cell\",\n  isolating: true,\n  parseHTML() {\n    return [{ tag: \"td\" }];\n  },\n  renderHTML({ HTMLAttributes }) {\n    return [\"td\", mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\n  }\n});\n\n// src/header/table-header.ts\nimport { mergeAttributes as mergeAttributes2, Node as Node2 } from \"@tiptap/core\";\nvar TableHeader = Node2.create({\n  name: \"tableHeader\",\n  addOptions() {\n    return {\n      HTMLAttributes: {}\n    };\n  },\n  content: \"block+\",\n  addAttributes() {\n    return {\n      colspan: {\n        default: 1\n      },\n      rowspan: {\n        default: 1\n      },\n      colwidth: {\n        default: null,\n        parseHTML: (element) => {\n          const colwidth = element.getAttribute(\"colwidth\");\n          const value = colwidth ? colwidth.split(\",\").map((width) => parseInt(width, 10)) : null;\n          return value;\n        }\n      }\n    };\n  },\n  tableRole: \"header_cell\",\n  isolating: true,\n  parseHTML() {\n    return [{ tag: \"th\" }];\n  },\n  renderHTML({ HTMLAttributes }) {\n    return [\"th\", mergeAttributes2(this.options.HTMLAttributes, HTMLAttributes), 0];\n  }\n});\n\n// src/kit/index.ts\nimport { Extension } from \"@tiptap/core\";\n\n// src/row/table-row.ts\nimport { mergeAttributes as mergeAttributes3, Node as Node3 } from \"@tiptap/core\";\nvar TableRow = Node3.create({\n  name: \"tableRow\",\n  addOptions() {\n    return {\n      HTMLAttributes: {}\n    };\n  },\n  content: \"(tableCell | tableHeader)*\",\n  tableRole: \"row\",\n  parseHTML() {\n    return [{ tag: \"tr\" }];\n  },\n  renderHTML({ HTMLAttributes }) {\n    return [\"tr\", mergeAttributes3(this.options.HTMLAttributes, HTMLAttributes), 0];\n  }\n});\n\n// src/table/table.ts\nimport {\n  callOrReturn,\n  getExtensionField,\n  mergeAttributes as mergeAttributes4,\n  Node as Node4\n} from \"@tiptap/core\";\nimport { TextSelection } from \"@tiptap/pm/state\";\nimport {\n  addColumnAfter,\n  addColumnBefore,\n  addRowAfter,\n  addRowBefore,\n  CellSelection as CellSelection2,\n  columnResizing,\n  deleteColumn,\n  deleteRow,\n  deleteTable,\n  fixTables,\n  goToNextCell,\n  mergeCells,\n  setCellAttr,\n  splitCell,\n  tableEditing,\n  toggleHeader,\n  toggleHeaderCell\n} from \"@tiptap/pm/tables\";\n\n// src/table/utilities/colStyle.ts\nfunction getColStyleDeclaration(minWidth, width) {\n  if (width) {\n    return [\"width\", `${Math.max(width, minWidth)}px`];\n  }\n  return [\"min-width\", `${minWidth}px`];\n}\n\n// src/table/TableView.ts\nfunction updateColumns(node, colgroup, table, cellMinWidth, overrideCol, overrideValue) {\n  var _a;\n  let totalWidth = 0;\n  let fixedWidth = true;\n  let nextDOM = colgroup.firstChild;\n  const row = node.firstChild;\n  if (row !== null) {\n    for (let i = 0, col = 0; i < row.childCount; i += 1) {\n      const { colspan, colwidth } = row.child(i).attrs;\n      for (let j = 0; j < colspan; j += 1, col += 1) {\n        const hasWidth = overrideCol === col ? overrideValue : colwidth && colwidth[j];\n        const cssWidth = hasWidth ? `${hasWidth}px` : \"\";\n        totalWidth += hasWidth || cellMinWidth;\n        if (!hasWidth) {\n          fixedWidth = false;\n        }\n        if (!nextDOM) {\n          const colElement = document.createElement(\"col\");\n          const [propertyKey, propertyValue] = getColStyleDeclaration(cellMinWidth, hasWidth);\n          colElement.style.setProperty(propertyKey, propertyValue);\n          colgroup.appendChild(colElement);\n        } else {\n          if (nextDOM.style.width !== cssWidth) {\n            const [propertyKey, propertyValue] = getColStyleDeclaration(cellMinWidth, hasWidth);\n            nextDOM.style.setProperty(propertyKey, propertyValue);\n          }\n          nextDOM = nextDOM.nextSibling;\n        }\n      }\n    }\n  }\n  while (nextDOM) {\n    const after = nextDOM.nextSibling;\n    (_a = nextDOM.parentNode) == null ? void 0 : _a.removeChild(nextDOM);\n    nextDOM = after;\n  }\n  const hasUserWidth = node.attrs.style && typeof node.attrs.style === \"string\" && /\\bwidth\\s*:/i.test(node.attrs.style);\n  if (fixedWidth && !hasUserWidth) {\n    table.style.width = `${totalWidth}px`;\n    table.style.minWidth = \"\";\n  } else {\n    table.style.width = \"\";\n    table.style.minWidth = `${totalWidth}px`;\n  }\n}\nvar TableView = class {\n  constructor(node, cellMinWidth) {\n    this.node = node;\n    this.cellMinWidth = cellMinWidth;\n    this.dom = document.createElement(\"div\");\n    this.dom.className = \"tableWrapper\";\n    this.table = this.dom.appendChild(document.createElement(\"table\"));\n    if (node.attrs.style) {\n      this.table.style.cssText = node.attrs.style;\n    }\n    this.colgroup = this.table.appendChild(document.createElement(\"colgroup\"));\n    updateColumns(node, this.colgroup, this.table, cellMinWidth);\n    this.contentDOM = this.table.appendChild(document.createElement(\"tbody\"));\n  }\n  update(node) {\n    if (node.type !== this.node.type) {\n      return false;\n    }\n    this.node = node;\n    updateColumns(node, this.colgroup, this.table, this.cellMinWidth);\n    return true;\n  }\n  ignoreMutation(mutation) {\n    const target = mutation.target;\n    const isInsideWrapper = this.dom.contains(target);\n    const isInsideContent = this.contentDOM.contains(target);\n    if (isInsideWrapper && !isInsideContent) {\n      if (mutation.type === \"attributes\" || mutation.type === \"childList\" || mutation.type === \"characterData\") {\n        return true;\n      }\n    }\n    return false;\n  }\n};\n\n// src/table/utilities/createColGroup.ts\nfunction createColGroup(node, cellMinWidth, overrideCol, overrideValue) {\n  let totalWidth = 0;\n  let fixedWidth = true;\n  const cols = [];\n  const row = node.firstChild;\n  if (!row) {\n    return {};\n  }\n  for (let i = 0, col = 0; i < row.childCount; i += 1) {\n    const { colspan, colwidth } = row.child(i).attrs;\n    for (let j = 0; j < colspan; j += 1, col += 1) {\n      const hasWidth = overrideCol === col ? overrideValue : colwidth && colwidth[j];\n      totalWidth += hasWidth || cellMinWidth;\n      if (!hasWidth) {\n        fixedWidth = false;\n      }\n      const [property, value] = getColStyleDeclaration(cellMinWidth, hasWidth);\n      cols.push([\"col\", { style: `${property}: ${value}` }]);\n    }\n  }\n  const tableWidth = fixedWidth ? `${totalWidth}px` : \"\";\n  const tableMinWidth = fixedWidth ? \"\" : `${totalWidth}px`;\n  const colgroup = [\"colgroup\", {}, ...cols];\n  return { colgroup, tableWidth, tableMinWidth };\n}\n\n// src/table/utilities/createCell.ts\nfunction createCell(cellType, cellContent) {\n  if (cellContent) {\n    return cellType.createChecked(null, cellContent);\n  }\n  return cellType.createAndFill();\n}\n\n// src/table/utilities/getTableNodeTypes.ts\nfunction getTableNodeTypes(schema) {\n  if (schema.cached.tableNodeTypes) {\n    return schema.cached.tableNodeTypes;\n  }\n  const roles = {};\n  Object.keys(schema.nodes).forEach((type) => {\n    const nodeType = schema.nodes[type];\n    if (nodeType.spec.tableRole) {\n      roles[nodeType.spec.tableRole] = nodeType;\n    }\n  });\n  schema.cached.tableNodeTypes = roles;\n  return roles;\n}\n\n// src/table/utilities/createTable.ts\nfunction createTable(schema, rowsCount, colsCount, withHeaderRow, cellContent) {\n  const types = getTableNodeTypes(schema);\n  const headerCells = [];\n  const cells = [];\n  for (let index = 0; index < colsCount; index += 1) {\n    const cell = createCell(types.cell, cellContent);\n    if (cell) {\n      cells.push(cell);\n    }\n    if (withHeaderRow) {\n      const headerCell = createCell(types.header_cell, cellContent);\n      if (headerCell) {\n        headerCells.push(headerCell);\n      }\n    }\n  }\n  const rows = [];\n  for (let index = 0; index < rowsCount; index += 1) {\n    rows.push(types.row.createChecked(null, withHeaderRow && index === 0 ? headerCells : cells));\n  }\n  return types.table.createChecked(null, rows);\n}\n\n// src/table/utilities/deleteTableWhenAllCellsSelected.ts\nimport { findParentNodeClosestToPos } from \"@tiptap/core\";\n\n// src/table/utilities/isCellSelection.ts\nimport { CellSelection } from \"@tiptap/pm/tables\";\nfunction isCellSelection(value) {\n  return value instanceof CellSelection;\n}\n\n// src/table/utilities/deleteTableWhenAllCellsSelected.ts\nvar deleteTableWhenAllCellsSelected = ({ editor }) => {\n  const { selection } = editor.state;\n  if (!isCellSelection(selection)) {\n    return false;\n  }\n  let cellCount = 0;\n  const table = findParentNodeClosestToPos(selection.ranges[0].$from, (node) => {\n    return node.type.name === \"table\";\n  });\n  table == null ? void 0 : table.node.descendants((node) => {\n    if (node.type.name === \"table\") {\n      return false;\n    }\n    if ([\"tableCell\", \"tableHeader\"].includes(node.type.name)) {\n      cellCount += 1;\n    }\n  });\n  const allCellsSelected = cellCount === selection.ranges.length;\n  if (!allCellsSelected) {\n    return false;\n  }\n  editor.commands.deleteTable();\n  return true;\n};\n\n// src/table/utilities/markdown.ts\nvar DEFAULT_CELL_LINE_SEPARATOR = \"\u001f\";\nfunction collapseWhitespace(s) {\n  return (s || \"\").replace(/\\s+/g, \" \").trim();\n}\nfunction renderTableToMarkdown(node, h, options = {}) {\n  var _a;\n  const cellSep = (_a = options.cellLineSeparator) != null ? _a : DEFAULT_CELL_LINE_SEPARATOR;\n  if (!node || !node.content || node.content.length === 0) {\n    return \"\";\n  }\n  const rows = [];\n  node.content.forEach((rowNode) => {\n    const cells = [];\n    if (rowNode.content) {\n      rowNode.content.forEach((cellNode) => {\n        let raw = \"\";\n        if (cellNode.content && Array.isArray(cellNode.content) && cellNode.content.length > 1) {\n          const parts = cellNode.content.map((child) => h.renderChildren(child));\n          raw = parts.join(cellSep);\n        } else {\n          raw = cellNode.content ? h.renderChildren(cellNode.content) : \"\";\n        }\n        const text = collapseWhitespace(raw);\n        const isHeader = cellNode.type === \"tableHeader\";\n        cells.push({ text, isHeader });\n      });\n    }\n    rows.push(cells);\n  });\n  const columnCount = rows.reduce((max, r) => Math.max(max, r.length), 0);\n  if (columnCount === 0) {\n    return \"\";\n  }\n  const colWidths = new Array(columnCount).fill(0);\n  rows.forEach((r) => {\n    var _a2;\n    for (let i = 0; i < columnCount; i += 1) {\n      const cell = ((_a2 = r[i]) == null ? void 0 : _a2.text) || \"\";\n      const len = cell.length;\n      if (len > colWidths[i]) {\n        colWidths[i] = len;\n      }\n      if (colWidths[i] < 3) {\n        colWidths[i] = 3;\n      }\n    }\n  });\n  const pad = (s, width) => s + \" \".repeat(Math.max(0, width - s.length));\n  const headerRow = rows[0];\n  const hasHeader = headerRow.some((c) => c.isHeader);\n  let out = \"\\n\";\n  const headerTexts = new Array(columnCount).fill(0).map((_, i) => hasHeader ? headerRow[i] && headerRow[i].text || \"\" : \"\");\n  out += `| ${headerTexts.map((t, i) => pad(t, colWidths[i])).join(\" | \")} |\n`;\n  out += `| ${colWidths.map((w) => \"-\".repeat(Math.max(3, w))).join(\" | \")} |\n`;\n  const body = hasHeader ? rows.slice(1) : rows;\n  body.forEach((r) => {\n    out += `| ${new Array(columnCount).fill(0).map((_, i) => pad(r[i] && r[i].text || \"\", colWidths[i])).join(\" | \")} |\n`;\n  });\n  return out;\n}\nvar markdown_default = renderTableToMarkdown;\n\n// src/table/table.ts\nvar Table = Node4.create({\n  name: \"table\",\n  // @ts-ignore\n  addOptions() {\n    return {\n      HTMLAttributes: {},\n      resizable: false,\n      renderWrapper: false,\n      handleWidth: 5,\n      cellMinWidth: 25,\n      // TODO: fix\n      View: TableView,\n      lastColumnResizable: true,\n      allowTableNodeSelection: false\n    };\n  },\n  content: \"tableRow+\",\n  tableRole: \"table\",\n  isolating: true,\n  group: \"block\",\n  parseHTML() {\n    return [{ tag: \"table\" }];\n  },\n  renderHTML({ node, HTMLAttributes }) {\n    const { colgroup, tableWidth, tableMinWidth } = createColGroup(node, this.options.cellMinWidth);\n    const userStyles = HTMLAttributes.style;\n    function getTableStyle() {\n      if (userStyles) {\n        return userStyles;\n      }\n      return tableWidth ? `width: ${tableWidth}` : `min-width: ${tableMinWidth}`;\n    }\n    const table = [\n      \"table\",\n      mergeAttributes4(this.options.HTMLAttributes, HTMLAttributes, {\n        style: getTableStyle()\n      }),\n      colgroup,\n      [\"tbody\", 0]\n    ];\n    return this.options.renderWrapper ? [\"div\", { class: \"tableWrapper\" }, table] : table;\n  },\n  parseMarkdown: (token, h) => {\n    const rows = [];\n    if (token.header) {\n      const headerCells = [];\n      token.header.forEach((cell) => {\n        headerCells.push(h.createNode(\"tableHeader\", {}, [{ type: \"paragraph\", content: h.parseInline(cell.tokens) }]));\n      });\n      rows.push(h.createNode(\"tableRow\", {}, headerCells));\n    }\n    if (token.rows) {\n      token.rows.forEach((row) => {\n        const bodyCells = [];\n        row.forEach((cell) => {\n          bodyCells.push(h.createNode(\"tableCell\", {}, [{ type: \"paragraph\", content: h.parseInline(cell.tokens) }]));\n        });\n        rows.push(h.createNode(\"tableRow\", {}, bodyCells));\n      });\n    }\n    return h.createNode(\"table\", void 0, rows);\n  },\n  renderMarkdown: (node, h) => {\n    return markdown_default(node, h);\n  },\n  addCommands() {\n    return {\n      insertTable: ({ rows = 3, cols = 3, withHeaderRow = true } = {}) => ({ tr, dispatch, editor }) => {\n        const node = createTable(editor.schema, rows, cols, withHeaderRow);\n        if (dispatch) {\n          const offset = tr.selection.from + 1;\n          tr.replaceSelectionWith(node).scrollIntoView().setSelection(TextSelection.near(tr.doc.resolve(offset)));\n        }\n        return true;\n      },\n      addColumnBefore: () => ({ state, dispatch }) => {\n        return addColumnBefore(state, dispatch);\n      },\n      addColumnAfter: () => ({ state, dispatch }) => {\n        return addColumnAfter(state, dispatch);\n      },\n      deleteColumn: () => ({ state, dispatch }) => {\n        return deleteColumn(state, dispatch);\n      },\n      addRowBefore: () => ({ state, dispatch }) => {\n        return addRowBefore(state, dispatch);\n      },\n      addRowAfter: () => ({ state, dispatch }) => {\n        return addRowAfter(state, dispatch);\n      },\n      deleteRow: () => ({ state, dispatch }) => {\n        return deleteRow(state, dispatch);\n      },\n      deleteTable: () => ({ state, dispatch }) => {\n        return deleteTable(state, dispatch);\n      },\n      mergeCells: () => ({ state, dispatch }) => {\n        return mergeCells(state, dispatch);\n      },\n      splitCell: () => ({ state, dispatch }) => {\n        return splitCell(state, dispatch);\n      },\n      toggleHeaderColumn: () => ({ state, dispatch }) => {\n        return toggleHeader(\"column\")(state, dispatch);\n      },\n      toggleHeaderRow: () => ({ state, dispatch }) => {\n        return toggleHeader(\"row\")(state, dispatch);\n      },\n      toggleHeaderCell: () => ({ state, dispatch }) => {\n        return toggleHeaderCell(state, dispatch);\n      },\n      mergeOrSplit: () => ({ state, dispatch }) => {\n        if (mergeCells(state, dispatch)) {\n          return true;\n        }\n        return splitCell(state, dispatch);\n      },\n      setCellAttribute: (name, value) => ({ state, dispatch }) => {\n        return setCellAttr(name, value)(state, dispatch);\n      },\n      goToNextCell: () => ({ state, dispatch }) => {\n        return goToNextCell(1)(state, dispatch);\n      },\n      goToPreviousCell: () => ({ state, dispatch }) => {\n        return goToNextCell(-1)(state, dispatch);\n      },\n      fixTables: () => ({ state, dispatch }) => {\n        if (dispatch) {\n          fixTables(state);\n        }\n        return true;\n      },\n      setCellSelection: (position) => ({ tr, dispatch }) => {\n        if (dispatch) {\n          const selection = CellSelection2.create(tr.doc, position.anchorCell, position.headCell);\n          tr.setSelection(selection);\n        }\n        return true;\n      }\n    };\n  },\n  addKeyboardShortcuts() {\n    return {\n      Tab: () => {\n        if (this.editor.commands.goToNextCell()) {\n          return true;\n        }\n        if (!this.editor.can().addRowAfter()) {\n          return false;\n        }\n        return this.editor.chain().addRowAfter().goToNextCell().run();\n      },\n      \"Shift-Tab\": () => this.editor.commands.goToPreviousCell(),\n      Backspace: deleteTableWhenAllCellsSelected,\n      \"Mod-Backspace\": deleteTableWhenAllCellsSelected,\n      Delete: deleteTableWhenAllCellsSelected,\n      \"Mod-Delete\": deleteTableWhenAllCellsSelected\n    };\n  },\n  addProseMirrorPlugins() {\n    const isResizable = this.options.resizable && this.editor.isEditable;\n    return [\n      ...isResizable ? [\n        columnResizing({\n          handleWidth: this.options.handleWidth,\n          cellMinWidth: this.options.cellMinWidth,\n          defaultCellMinWidth: this.options.cellMinWidth,\n          View: this.options.View,\n          lastColumnResizable: this.options.lastColumnResizable\n        })\n      ] : [],\n      tableEditing({\n        allowTableNodeSelection: this.options.allowTableNodeSelection\n      })\n    ];\n  },\n  extendNodeSchema(extension) {\n    const context = {\n      name: extension.name,\n      options: extension.options,\n      storage: extension.storage\n    };\n    return {\n      tableRole: callOrReturn(getExtensionField(extension, \"tableRole\", context))\n    };\n  }\n});\n\n// src/kit/index.ts\nvar TableKit = Extension.create({\n  name: \"tableKit\",\n  addExtensions() {\n    const extensions = [];\n    if (this.options.table !== false) {\n      extensions.push(Table.configure(this.options.table));\n    }\n    if (this.options.tableCell !== false) {\n      extensions.push(TableCell.configure(this.options.tableCell));\n    }\n    if (this.options.tableHeader !== false) {\n      extensions.push(TableHeader.configure(this.options.tableHeader));\n    }\n    if (this.options.tableRow !== false) {\n      extensions.push(TableRow.configure(this.options.tableRow));\n    }\n    return extensions;\n  }\n});\nexport {\n  DEFAULT_CELL_LINE_SEPARATOR,\n  Table,\n  TableCell,\n  TableHeader,\n  TableKit,\n  TableRow,\n  TableView,\n  createColGroup,\n  createTable,\n  renderTableToMarkdown,\n  updateColumns\n};\n//# sourceMappingURL=index.js.map","// src/index.ts\nimport { TableRow } from \"@tiptap/extension-table\";\nimport { TableRow as TableRow2 } from \"@tiptap/extension-table\";\nvar index_default = TableRow;\nexport {\n  TableRow2 as TableRow,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","// src/index.ts\nimport { TableCell } from \"@tiptap/extension-table\";\nimport { TableCell as TableCell2 } from \"@tiptap/extension-table\";\nvar index_default = TableCell;\nexport {\n  TableCell2 as TableCell,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","// src/index.ts\nimport { TableHeader } from \"@tiptap/extension-table\";\nimport { TableHeader as TableHeader2 } from \"@tiptap/extension-table\";\nvar index_default = TableHeader;\nexport {\n  TableHeader2 as TableHeader,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","// src/index.ts\nimport { TaskList } from \"@tiptap/extension-list\";\nimport { TaskList as TaskList2 } from \"@tiptap/extension-list\";\nvar index_default = TaskList;\nexport {\n  TaskList2 as TaskList,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","// src/index.ts\nimport { TaskItem } from \"@tiptap/extension-list\";\nimport { TaskItem as TaskItem2 } from \"@tiptap/extension-list\";\nvar index_default = TaskItem;\nexport {\n  TaskItem2 as TaskItem,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","// src/highlight.ts\nimport { Mark, markInputRule, markPasteRule, mergeAttributes } from \"@tiptap/core\";\nvar inputRegex = /(?:^|\\s)(==(?!\\s+==)((?:[^=]+))==(?!\\s+==))$/;\nvar pasteRegex = /(?:^|\\s)(==(?!\\s+==)((?:[^=]+))==(?!\\s+==))/g;\nvar Highlight = Mark.create({\n  name: \"highlight\",\n  addOptions() {\n    return {\n      multicolor: false,\n      HTMLAttributes: {}\n    };\n  },\n  addAttributes() {\n    if (!this.options.multicolor) {\n      return {};\n    }\n    return {\n      color: {\n        default: null,\n        parseHTML: (element) => element.getAttribute(\"data-color\") || element.style.backgroundColor,\n        renderHTML: (attributes) => {\n          if (!attributes.color) {\n            return {};\n          }\n          return {\n            \"data-color\": attributes.color,\n            style: `background-color: ${attributes.color}; color: inherit`\n          };\n        }\n      }\n    };\n  },\n  parseHTML() {\n    return [\n      {\n        tag: \"mark\"\n      }\n    ];\n  },\n  renderHTML({ HTMLAttributes }) {\n    return [\"mark\", mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\n  },\n  renderMarkdown: (node, h) => {\n    return `==${h.renderChildren(node)}==`;\n  },\n  parseMarkdown: (token, h) => {\n    return h.applyMark(\"highlight\", h.parseInline(token.tokens || []));\n  },\n  markdownTokenizer: {\n    name: \"highlight\",\n    level: \"inline\",\n    start: (src) => src.indexOf(\"==\"),\n    tokenize(src, _, h) {\n      const rule = /^(==)([^=]+)(==)/;\n      const match = rule.exec(src);\n      if (match) {\n        const innerContent = match[2].trim();\n        const children = h.inlineTokens(innerContent);\n        return {\n          type: \"highlight\",\n          raw: match[0],\n          text: innerContent,\n          tokens: children\n        };\n      }\n    }\n  },\n  addCommands() {\n    return {\n      setHighlight: (attributes) => ({ commands }) => {\n        return commands.setMark(this.name, attributes);\n      },\n      toggleHighlight: (attributes) => ({ commands }) => {\n        return commands.toggleMark(this.name, attributes);\n      },\n      unsetHighlight: () => ({ commands }) => {\n        return commands.unsetMark(this.name);\n      }\n    };\n  },\n  addKeyboardShortcuts() {\n    return {\n      \"Mod-Shift-h\": () => this.editor.commands.toggleHighlight()\n    };\n  },\n  addInputRules() {\n    return [\n      markInputRule({\n        find: inputRegex,\n        type: this.type\n      })\n    ];\n  },\n  addPasteRules() {\n    return [\n      markPasteRule({\n        find: pasteRegex,\n        type: this.type\n      })\n    ];\n  }\n});\n\n// src/index.ts\nvar index_default = Highlight;\nexport {\n  Highlight,\n  index_default as default,\n  inputRegex,\n  pasteRegex\n};\n//# sourceMappingURL=index.js.map","// src/text-align.ts\nimport { Extension } from \"@tiptap/core\";\nvar TextAlign = Extension.create({\n  name: \"textAlign\",\n  addOptions() {\n    return {\n      types: [],\n      alignments: [\"left\", \"center\", \"right\", \"justify\"],\n      defaultAlignment: null\n    };\n  },\n  addGlobalAttributes() {\n    return [\n      {\n        types: this.options.types,\n        attributes: {\n          textAlign: {\n            default: this.options.defaultAlignment,\n            parseHTML: (element) => {\n              const alignment = element.style.textAlign;\n              return this.options.alignments.includes(alignment) ? alignment : this.options.defaultAlignment;\n            },\n            renderHTML: (attributes) => {\n              if (!attributes.textAlign) {\n                return {};\n              }\n              return { style: `text-align: ${attributes.textAlign}` };\n            }\n          }\n        }\n      }\n    ];\n  },\n  addCommands() {\n    return {\n      setTextAlign: (alignment) => ({ commands }) => {\n        if (!this.options.alignments.includes(alignment)) {\n          return false;\n        }\n        return this.options.types.map((type) => commands.updateAttributes(type, { textAlign: alignment })).some((response) => response);\n      },\n      unsetTextAlign: () => ({ commands }) => {\n        return this.options.types.map((type) => commands.resetAttributes(type, \"textAlign\")).some((response) => response);\n      },\n      toggleTextAlign: (alignment) => ({ editor, commands }) => {\n        if (!this.options.alignments.includes(alignment)) {\n          return false;\n        }\n        if (editor.isActive({ textAlign: alignment })) {\n          return commands.unsetTextAlign();\n        }\n        return commands.setTextAlign(alignment);\n      }\n    };\n  },\n  addKeyboardShortcuts() {\n    return {\n      \"Mod-Shift-l\": () => this.editor.commands.setTextAlign(\"left\"),\n      \"Mod-Shift-e\": () => this.editor.commands.setTextAlign(\"center\"),\n      \"Mod-Shift-r\": () => this.editor.commands.setTextAlign(\"right\"),\n      \"Mod-Shift-j\": () => this.editor.commands.setTextAlign(\"justify\")\n    };\n  }\n});\n\n// src/index.ts\nvar index_default = TextAlign;\nexport {\n  TextAlign,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","// src/subscript.ts\nimport { Mark, mergeAttributes } from \"@tiptap/core\";\nvar Subscript = Mark.create({\n  name: \"subscript\",\n  addOptions() {\n    return {\n      HTMLAttributes: {}\n    };\n  },\n  parseHTML() {\n    return [\n      {\n        tag: \"sub\"\n      },\n      {\n        style: \"vertical-align\",\n        getAttrs(value) {\n          if (value !== \"sub\") {\n            return false;\n          }\n          return null;\n        }\n      }\n    ];\n  },\n  renderHTML({ HTMLAttributes }) {\n    return [\"sub\", mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\n  },\n  addCommands() {\n    return {\n      setSubscript: () => ({ commands }) => {\n        return commands.setMark(this.name);\n      },\n      toggleSubscript: () => ({ commands }) => {\n        return commands.toggleMark(this.name);\n      },\n      unsetSubscript: () => ({ commands }) => {\n        return commands.unsetMark(this.name);\n      }\n    };\n  },\n  addKeyboardShortcuts() {\n    return {\n      \"Mod-,\": () => this.editor.commands.toggleSubscript()\n    };\n  }\n});\n\n// src/index.ts\nvar index_default = Subscript;\nexport {\n  Subscript,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","// src/superscript.ts\nimport { Mark, mergeAttributes } from \"@tiptap/core\";\nvar Superscript = Mark.create({\n  name: \"superscript\",\n  addOptions() {\n    return {\n      HTMLAttributes: {}\n    };\n  },\n  parseHTML() {\n    return [\n      {\n        tag: \"sup\"\n      },\n      {\n        style: \"vertical-align\",\n        getAttrs(value) {\n          if (value !== \"super\") {\n            return false;\n          }\n          return null;\n        }\n      }\n    ];\n  },\n  renderHTML({ HTMLAttributes }) {\n    return [\"sup\", mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\n  },\n  addCommands() {\n    return {\n      setSuperscript: () => ({ commands }) => {\n        return commands.setMark(this.name);\n      },\n      toggleSuperscript: () => ({ commands }) => {\n        return commands.toggleMark(this.name);\n      },\n      unsetSuperscript: () => ({ commands }) => {\n        return commands.unsetMark(this.name);\n      }\n    };\n  },\n  addKeyboardShortcuts() {\n    return {\n      \"Mod-.\": () => this.editor.commands.toggleSuperscript()\n    };\n  }\n});\n\n// src/index.ts\nvar index_default = Superscript;\nexport {\n  Superscript,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","import { useEditor, EditorContent } from '@tiptap/react';\nimport StarterKit from '@tiptap/starter-kit';\nimport Link from '@tiptap/extension-link';\nimport Image from '@tiptap/extension-image';\nimport { Table } from '@tiptap/extension-table';\nimport TableRow from '@tiptap/extension-table-row';\nimport TableCell from '@tiptap/extension-table-cell';\nimport TableHeader from '@tiptap/extension-table-header';\nimport TaskList from '@tiptap/extension-task-list';\nimport TaskItem from '@tiptap/extension-task-item';\nimport Highlight from '@tiptap/extension-highlight';\nimport TextAlign from '@tiptap/extension-text-align';\nimport Underline from '@tiptap/extension-underline';\nimport Subscript from '@tiptap/extension-subscript';\nimport Superscript from '@tiptap/extension-superscript';\nimport {\n  Bold, Italic, Strikethrough, Code, List, ListOrdered,\n  Quote, Undo, Redo, Heading1, Heading2, Heading3,\n  CheckSquare, Highlighter, AlignLeft, AlignCenter, AlignRight\n} from 'lucide-react';\nimport { useEffect } from 'react';\n\ninterface EditorProps {\n  document: any;\n  onSave: (content: string) => void;\n}\n\nexport default function Editor({ document, onSave }: EditorProps) {\n  const editor = useEditor({\n    extensions: [\n      StarterKit.configure({\n        // Disable extensions we're configuring separately\n        link: false,\n      }),\n      Link.configure({ openOnClick: false }),\n      Image,\n      Table.configure({ resizable: true }),\n      TableRow,\n      TableHeader,\n      TableCell,\n      TaskList,\n      TaskItem.configure({ nested: true }),\n      Highlight,\n      TextAlign.configure({ types: ['heading', 'paragraph'] }),\n      Underline,\n      Subscript,\n      Superscript\n    ],\n    content: document?.content || '',\n    onUpdate: ({ editor }) => {\n      onSave(editor.getHTML());\n    }\n  });\n\n  useEffect(() => {\n    if (editor && document) {\n      editor.commands.setContent(document.content || '');\n    }\n  }, [document?.id, editor]);\n\n  if (!editor) {\n    return null;\n  }\n\n  const MenuButton = ({ onClick, active, children }: any) => (\n    <button\n      onClick={onClick}\n      style={{\n        padding: '0.5rem',\n        border: 'none',\n        background: active ? 'var(--accent-color)' : 'transparent',\n        color: active ? 'var(--accent-text)' : 'var(--text-primary)',\n        cursor: 'pointer',\n        borderRadius: '4px',\n        display: 'flex',\n        alignItems: 'center',\n        transition: 'all 0.2s'\n      }}\n    >\n      {children}\n    </button>\n  );\n\n  return (\n    <div style={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\n      {/* Toolbar */}\n      <div style={{\n        padding: '0.5rem',\n        borderBottom: `1px solid var(--border-color)`,\n        background: 'var(--bg-secondary)',\n        display: 'flex',\n        gap: '0.25rem',\n        flexWrap: 'wrap'\n      }}>\n        <MenuButton\n          onClick={() => editor.chain().focus().toggleBold().run()}\n          active={editor.isActive('bold')}\n        >\n          <Bold size={18} />\n        </MenuButton>\n\n        <MenuButton\n          onClick={() => editor.chain().focus().toggleItalic().run()}\n          active={editor.isActive('italic')}\n        >\n          <Italic size={18} />\n        </MenuButton>\n\n        <MenuButton\n          onClick={() => editor.chain().focus().toggleStrike().run()}\n          active={editor.isActive('strike')}\n        >\n          <Strikethrough size={18} />\n        </MenuButton>\n\n        <MenuButton\n          onClick={() => editor.chain().focus().toggleUnderline().run()}\n          active={editor.isActive('underline')}\n        >\n          <span style={{ textDecoration: 'underline' }}>U</span>\n        </MenuButton>\n\n        <MenuButton\n          onClick={() => editor.chain().focus().toggleCode().run()}\n          active={editor.isActive('code')}\n        >\n          <Code size={18} />\n        </MenuButton>\n\n        <div style={{ width: '1px', background: 'var(--border-color)', margin: '0 0.25rem' }} />\n\n        <MenuButton\n          onClick={() => editor.chain().focus().toggleHeading({ level: 1 }).run()}\n          active={editor.isActive('heading', { level: 1 })}\n        >\n          <Heading1 size={18} />\n        </MenuButton>\n\n        <MenuButton\n          onClick={() => editor.chain().focus().toggleHeading({ level: 2 }).run()}\n          active={editor.isActive('heading', { level: 2 })}\n        >\n          <Heading2 size={18} />\n        </MenuButton>\n\n        <MenuButton\n          onClick={() => editor.chain().focus().toggleHeading({ level: 3 }).run()}\n          active={editor.isActive('heading', { level: 3 })}\n        >\n          <Heading3 size={18} />\n        </MenuButton>\n\n        <div style={{ width: '1px', background: 'var(--border-color)', margin: '0 0.25rem' }} />\n\n        <MenuButton\n          onClick={() => editor.chain().focus().toggleBulletList().run()}\n          active={editor.isActive('bulletList')}\n        >\n          <List size={18} />\n        </MenuButton>\n\n        <MenuButton\n          onClick={() => editor.chain().focus().toggleOrderedList().run()}\n          active={editor.isActive('orderedList')}\n        >\n          <ListOrdered size={18} />\n        </MenuButton>\n\n        <MenuButton\n          onClick={() => editor.chain().focus().toggleTaskList().run()}\n          active={editor.isActive('taskList')}\n        >\n          <CheckSquare size={18} />\n        </MenuButton>\n\n        <MenuButton\n          onClick={() => editor.chain().focus().toggleBlockquote().run()}\n          active={editor.isActive('blockquote')}\n        >\n          <Quote size={18} />\n        </MenuButton>\n\n        <div style={{ width: '1px', background: 'var(--border-color)', margin: '0 0.25rem' }} />\n\n        <MenuButton\n          onClick={() => editor.chain().focus().toggleHighlight().run()}\n          active={editor.isActive('highlight')}\n        >\n          <Highlighter size={18} />\n        </MenuButton>\n\n        <MenuButton\n          onClick={() => editor.chain().focus().setTextAlign('left').run()}\n          active={editor.isActive({ textAlign: 'left' })}\n        >\n          <AlignLeft size={18} />\n        </MenuButton>\n\n        <MenuButton\n          onClick={() => editor.chain().focus().setTextAlign('center').run()}\n          active={editor.isActive({ textAlign: 'center' })}\n        >\n          <AlignCenter size={18} />\n        </MenuButton>\n\n        <MenuButton\n          onClick={() => editor.chain().focus().setTextAlign('right').run()}\n          active={editor.isActive({ textAlign: 'right' })}\n        >\n          <AlignRight size={18} />\n        </MenuButton>\n\n        <div style={{ width: '1px', background: '#4a4a4a', margin: '0 0.25rem' }} />\n\n        <MenuButton onClick={() => editor.chain().focus().undo().run()}>\n          <Undo size={18} />\n        </MenuButton>\n\n        <MenuButton onClick={() => editor.chain().focus().redo().run()}>\n          <Redo size={18} />\n        </MenuButton>\n      </div>\n\n      {/* Editor Content */}\n      <div style={{\n        flex: 1,\n        overflow: 'auto',\n        background: 'var(--bg-primary)',\n        padding: '1rem',\n        color: 'var(--text-primary)'\n      }}>\n        <EditorContent editor={editor} />\n      </div>\n    </div>\n  );\n}\n"],"names":["AlignCenter","createLucideIcon","AlignLeft","AlignRight","Bold","CheckSquare","Code","Heading1","Heading2","Heading3","Highlighter","Italic","ListOrdered","Quote","Redo","Strikethrough","Undo","inputRegex","Image","Node","HTMLAttributes","mergeAttributes","token","helpers","node","_a","_b","_c","_d","_e","_f","src","alt","title","directions","minWidth","minHeight","alwaysPreserveAspectRatio","getPos","editor","el","key","value","nodeView","ResizableNodeView","width","height","pos","updatedNode","_decorations","_innerDecorations","dom","options","commands","nodeInputRule","match","index_default","readFromCache","addToCache","cache","cachePos","i","TableMap","map","problems","curPos","left","top","right","bottom","j","axis","dir","a","b","leftA","rightA","topA","bottomA","leftB","rightB","topB","bottomB","rect","result","seen","row","col","index","table","rowStart","rowEnd","rowEndIndex","computeMap","findWidth","mapPos","colWidths","e","rowNode","cellNode","colspan","rowspan","colwidth","h","start","w","colW","widthIndex","prev","expectedPos","missing","tableMap","badWidths","findBadColWidths","hasRowSpan","rowWidth","prevRow","cell","updated","attrs","colWidth","freshColWidth","tableNodeTypes","schema","name","type","role","tableEditingKey","PluginKey","cellAround","$pos","d","cellWrapping","isInTable","state","$head","selectionCell","sel","$cell","cellNear","after","before","pointsAtCell","moveCellForward","inSameTable","$cellA","$cellB","nextCell","tableStart","moved","removeColSpan","addColSpan","columnIsHeader","headerCell","CellSelection","Selection","$anchorCell","$headCell","doc","cells","p","ranges","from","SelectionRange","mapping","tableChanged","TextSelection","rows","rowContent","cellRect","extraLeft","extraRight","Fragment","fragment","Slice","tr","content","mapFrom","$from","$to","f","anchorTop","headTop","anchorBottom","headBottom","anchorRect","headRect","anchorLeft","headLeft","anchorRight","headRight","other","json","anchorCell","headCell","CellBookmark","anchor","head","drawCellSelection","Decoration","DecorationSet","isCellBoundarySelection","afterFrom","beforeTo","depth","isTextSelectionAcrossCells","fromCellBoundaryNode","toCellBoundaryNode","normalizeSelection","allowTableNodeSelection","normalize","NodeSelection","lastCell","fixTablesKey","changedDescendants","old","cur","offset","oldSize","curSize","outer","child","scan","fixTables","oldState","check","fixTable","tablePos","mustAdd","prob","first","last","end","add","nodes","side","selectedRect","addColumn","refColumn","addColumnBefore","dispatch","addColumnAfter","removeColumn","mapStart","deleteColumn","rowIsHeader","_table$nodeAt","addRow","rowPos","refRow","_table$nodeAt2","addRowBefore","addRowAfter","removeRow","nextRow","copy","newPos","deleteRow","isEmpty","c","cellsOverlapRectangle","indexTop","indexLeft","indexBottom","indexRight","mergeCells","mergedPos","mergedCell","cellPos","mapped","splitCell","nodeTypes","splitCellWithType","getCellType","_cellAround","baseAttrs","setCellAttr","deprecated_toggleHeader","types","isHeaderEnabledByType","cellPositions","toggleHeader","isHeaderRowEnabled","isHeaderColumnEnabled","selectionStartsAt","cellsRect","newType","relativeCellPos","toggleHeaderCell","findNextCell","lastChild","goToNextCell","direction","deleteTable","deleteCellSelection","baseContent","pastedCells","slice","openStart","openEnd","fitSlice","ensureRectangular","widths","r","empty","nodeType","Transform","clipCells","newWidth","newHeight","added","newRows","frag","source","growTable","emptyHead","start$1","header","emptyRow","isolateHorizontal","found","cellTop","cellLeft","isolateVertical","updatePos","insertCells","recomp","to","handleKeyDown","keydownHandler","arrow","shiftArrow","maybeSetSelection","selection","view","atEndOfCell","$next","newSel","cellSel","handleTripleClick","handlePaste","_","handleMouseDown","startEvent","_cellUnderMouse","startDOMCell","domInCell","$anchor","setCellSelection","cellUnderMouse","$anchor$1","event","starting","stop","move","_event","parent","dirStr","mousePos","TableView","defaultCellMinWidth","updateColumnsOnResize","record","colgroup","overrideCol","overrideValue","totalWidth","fixedWidth","nextDOM","hasWidth","cssWidth","col$1","_nextDOM$parentNode","columnResizingPluginKey","columnResizing","handleWidth","cellMinWidth","View","lastColumnResizable","plugin","Plugin","_plugin$spec","nodeViews","tableName","ResizeState","pluginState","handleMouseMove","handleMouseLeave","handleMouseDown$1","handleDecorations","activeHandle","dragging","action","handle","target","domCellAround","edgeCell","updateHandle","_view$dom$ownerDocume","win","currentColWidth","finish","event$1","pluginState$1","updateColumnWidth","draggedWidth","dragged","displayColumnWidth","domWidth","parts","resizeMinWidth","mapIndex","zeroes","n","decorations","_columnResizingPlugin","tableEditing","set","deleted","TableCell","element","cols","cellIndex","TableHeader","Node2","mergeAttributes2","TableRow","Node3","mergeAttributes3","getColStyleDeclaration","updateColumns","propertyKey","propertyValue","colElement","hasUserWidth","mutation","isInsideWrapper","isInsideContent","createColGroup","property","tableWidth","tableMinWidth","createCell","cellType","cellContent","getTableNodeTypes","roles","createTable","rowsCount","colsCount","withHeaderRow","headerCells","isCellSelection","deleteTableWhenAllCellsSelected","cellCount","findParentNodeClosestToPos","DEFAULT_CELL_LINE_SEPARATOR","collapseWhitespace","s","renderTableToMarkdown","cellSep","raw","text","isHeader","columnCount","max","_a2","len","pad","headerRow","hasHeader","out","headerTexts","t","markdown_default","Table","Node4","userStyles","getTableStyle","mergeAttributes4","bodyCells","position","CellSelection2","extension","context","callOrReturn","getExtensionField","Extension","extensions","TaskList","TaskItem","pasteRegex","Highlight","Mark","attributes","innerContent","children","markInputRule","markPasteRule","TextAlign","alignment","response","Subscript","Superscript","Editor","document","onSave","useEditor","StarterKit","Link","Underline","useEffect","MenuButton","onClick","active","jsx","jsxs","List","EditorContent"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]}