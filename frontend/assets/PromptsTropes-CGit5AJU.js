import{r as i,a as c,j as e}from"./index-BcQW7OjF.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};s.SENTRY_RELEASE={id:"9100b80d8d3578ae8a7e4dcad47fa28b1cb8d4d7"}}catch{}})();try{(function(){var s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new s.Error().stack;a&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[a]="7ea18925-f5f5-4ab5-9aed-418c4cc7c650",s._sentryDebugIdIdentifier="sentry-dbid-7ea18925-f5f5-4ab5-9aed-418c4cc7c650")})()}catch{}const U=["character","world","combat","social","plot"],F=["archetype","dynamic","situation","plot"];function V({user:s}){const[a,w]=i.useState("prompts"),[T,I]=i.useState([]),[C,M]=i.useState([]),[n,x]=i.useState("all"),[u,k]=i.useState([]),[q,P]=i.useState([]),[z,g]=i.useState(!1),[h,S]=i.useState("add"),[b,A]=i.useState(null),[o,p]=i.useState({category:"",promptText:"",name:"",description:""}),[y,m]=i.useState(null),[L,D]=i.useState(!1),j=(s==null?void 0:s.subscriptionTier)==="rp"||(s==null?void 0:s.isAdmin);i.useEffect(()=>{j&&f()},[a,n,j]);const f=async()=>{var t,r,d;D(!0),m(null);try{if(a==="prompts"){const[l,N,v]=await Promise.all([c.get(`/prompts?category=${n}`),c.get("/prompts/prompts/categories"),c.get("/prompts/prompts/popular?limit=5")]);I(l.data),k(N.data),P(v.data)}else{const[l,N,v]=await Promise.all([c.get(`/prompts/tropes?category=${n}`),c.get("/prompts/tropes/categories"),c.get("/prompts/tropes/popular?limit=5")]);M(l.data),k(N.data),P(v.data)}}catch(l){((t=l.response)==null?void 0:t.status)===403?m("RP tier required to access this feature."):m(((d=(r=l.response)==null?void 0:r.data)==null?void 0:d.error)||"Failed to load data")}finally{D(!1)}},_=()=>{S("add"),A(null),p({category:a==="prompts"?U[0]:F[0],promptText:"",name:"",description:""}),g(!0)},R=t=>{if(S("edit"),A(t),a==="prompts"){const r=t;p({category:r.category,promptText:r.promptText,name:"",description:""})}else{const r=t;p({category:r.category,promptText:"",name:r.name,description:r.description})}g(!0)},E=async t=>{var r,d;if(confirm(`Are you sure you want to delete this ${a==="prompts"?"prompt":"trope"}?`))try{const l=a==="prompts"?`/prompts/prompts/${t}`:`/prompts/tropes/${t}`;await c.delete(l),f()}catch(l){m(((d=(r=l.response)==null?void 0:r.data)==null?void 0:d.error)||"Failed to delete")}},B=async t=>{var r,d;t.preventDefault(),m(null);try{if(a==="prompts"){const l={category:o.category,promptText:o.promptText};h==="add"?await c.post("/prompts/prompts",l):b&&await c.put(`/prompts/prompts/${b.id}`,l)}else{const l={category:o.category,name:o.name,description:o.description};h==="add"?await c.post("/prompts/tropes",l):b&&await c.put(`/prompts/tropes/${b.id}`,l)}g(!1),f()}catch(l){m(((d=(r=l.response)==null?void 0:r.data)==null?void 0:d.error)||"Failed to save")}};if(!j){const t=async()=>{var r,d;try{const l=await c.post("/stripe/create-checkout-session");window.location.href=l.data.url}catch(l){alert(((d=(r=l.response)==null?void 0:r.data)==null?void 0:d.error)||"Failed to start checkout. Please contact support.")}};return e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 to-pink-900/20 border-2 border-purple-500/50 rounded-lg p-8 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ”’"}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"RP Tier Required"}),e.jsx("p",{className:"text-gray-300 mb-6 text-lg",children:"Unlock access to advanced roleplay tools including:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8 text-left",children:[e.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ’­"}),e.jsx("h3",{className:"text-white font-semibold mb-1",children:"RP Prompts"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Creative prompts for character development, world-building, and plot inspiration"})]}),e.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸŽ­"}),e.jsx("h3",{className:"text-white font-semibold mb-1",children:"Tropes Library"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Explore character archetypes, dynamics, and plot devices to enrich your story"})]}),e.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-2",children:"â°"}),e.jsx("h3",{className:"text-white font-semibold mb-1",children:"Daily Prompts"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Automated daily prompt posting to Discord channels"})]}),e.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ¤–"}),e.jsx("h3",{className:"text-white font-semibold mb-1",children:"Discord Commands"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"!prompt and !trope commands for instant inspiration in Discord"})]})]}),e.jsx("button",{className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold rounded-lg transition-all transform hover:scale-105 text-lg",onClick:t,children:"Upgrade to RP Tier"})]})})}const $=a==="prompts"?U:F;return e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:[a==="prompts"?"RP Prompts":"Tropes"," ",e.jsx("span",{className:"text-sm bg-purple-600/20 text-purple-300 px-2 py-1 rounded",children:"RP Tier"})]}),e.jsx("p",{className:"text-gray-400",children:a==="prompts"?"Manage roleplay prompts for creative inspiration":"Browse and manage storytelling tropes"})]}),(s==null?void 0:s.isAdmin)&&e.jsxs("button",{onClick:_,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:["+ Add ",a==="prompts"?"Prompt":"Trope"]})]}),y&&e.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-200 px-4 py-3 rounded-lg mb-4",children:y}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>{w("prompts"),x("all")},className:`px-4 py-2 rounded-lg transition-colors ${a==="prompts"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"ðŸ’­ Prompts"}),e.jsx("button",{onClick:()=>{w("tropes"),x("all")},className:`px-4 py-2 rounded-lg transition-colors ${a==="tropes"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"ðŸŽ­ Tropes"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>x("all"),className:`p-4 rounded-lg border transition-colors ${n==="all"?"border-purple-500 bg-purple-500/20":"border-gray-600 bg-gray-800 hover:border-gray-500"}`,children:[e.jsxs("div",{className:"text-sm text-gray-400",children:["All ",a==="prompts"?"Prompts":"Tropes"]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:u.reduce((t,r)=>t+r.count,0)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[u.reduce((t,r)=>t+(r.totalUses||0),0)," uses"]})]}),$.map(t=>{const r=u.find(d=>d.category===t);return e.jsxs("button",{onClick:()=>x(t),className:`p-4 rounded-lg border transition-colors ${n===t?"border-purple-500 bg-purple-500/20":"border-gray-600 bg-gray-800 hover:border-gray-500"}`,children:[e.jsx("div",{className:"text-sm text-gray-400 capitalize",children:t}),e.jsx("div",{className:"text-2xl font-bold text-white",children:(r==null?void 0:r.count)||0}),e.jsxs("div",{className:"text-xs text-gray-500",children:[(r==null?void 0:r.totalUses)||0," uses"]})]},t)})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white mb-4",children:[n==="all"?"All":n.charAt(0).toUpperCase()+n.slice(1)," ",a==="prompts"?"Prompts":"Tropes"]}),L?e.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading..."}):e.jsx("div",{className:"space-y-4",children:a==="prompts"?T.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:["No prompts found. ",(s==null?void 0:s.isAdmin)&&"Add some to get started!"]}):T.map(t=>e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"px-2 py-1 bg-purple-600/20 text-purple-300 text-xs rounded capitalize",children:t.category}),(s==null?void 0:s.isAdmin)&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>R(t),className:"text-blue-400 hover:text-blue-300 text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>E(t.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Delete"})]})]}),e.jsx("p",{className:"text-white mb-2",children:t.promptText}),e.jsxs("div",{className:"flex gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:["Used ",t.useCount," times"]}),t.lastUsed&&e.jsxs("span",{children:["Last used: ",new Date(t.lastUsed).toLocaleDateString()]})]})]},t.id)):C.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:["No tropes found. ",(s==null?void 0:s.isAdmin)&&"Add some to get started!"]}):C.map(t=>e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"px-2 py-1 bg-purple-600/20 text-purple-300 text-xs rounded capitalize",children:t.category}),(s==null?void 0:s.isAdmin)&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>R(t),className:"text-blue-400 hover:text-blue-300 text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>E(t.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Delete"})]})]}),e.jsx("h3",{className:"text-white font-semibold mb-1",children:t.name}),e.jsx("p",{className:"text-gray-300 text-sm mb-2",children:t.description}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Used ",t.useCount," times"]})]},t.id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"â­ Most Popular"}),e.jsx("div",{className:"space-y-3",children:q.map((t,r)=>e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"text-lg font-bold text-purple-400",children:["#",r+1]}),e.jsx("span",{className:"px-2 py-0.5 bg-purple-600/20 text-purple-300 text-xs rounded capitalize",children:t.category})]}),a==="prompts"?e.jsx("p",{className:"text-sm text-white line-clamp-2",children:t.promptText}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:t.name}),e.jsx("p",{className:"text-xs text-gray-400 line-clamp-1",children:t.description})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.useCount," uses"]})]},t.id))}),e.jsxs("div",{className:"mt-6 bg-gray-800 border border-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-2",children:"Discord Commands"}),e.jsx("div",{className:"space-y-2 text-xs text-gray-300",children:a==="prompts"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("code",{className:"bg-gray-900 px-1 py-0.5 rounded",children:"!prompt"})," - Random prompt"]}),e.jsx("div",{children:e.jsxs("code",{className:"bg-gray-900 px-1 py-0.5 rounded",children:["!prompt random ",n!=="all"?n:"category"]})}),e.jsxs("div",{className:"text-gray-500 text-xs mt-2",children:["Admins can use ",e.jsx("code",{className:"bg-gray-900 px-1 py-0.5 rounded",children:"!promptsettings"})," to schedule daily prompts"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("code",{className:"bg-gray-900 px-1 py-0.5 rounded",children:"!trope"})," - Random trope"]}),e.jsx("div",{children:e.jsxs("code",{className:"bg-gray-900 px-1 py-0.5 rounded",children:["!trope ",n!=="all"?n:"category"]})})]})})]})]})]}),z&&(s==null?void 0:s.isAdmin)&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-4",children:[h==="add"?"Add":"Edit"," ",a==="prompts"?"Prompt":"Trope"]}),e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Category"}),e.jsx("select",{value:o.category,onChange:t=>p({...o,category:t.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0,children:$.map(t=>e.jsx("option",{value:t,className:"capitalize",children:t},t))})]}),a==="prompts"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Prompt Text"}),e.jsx("textarea",{value:o.promptText,onChange:t=>p({...o,promptText:t.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",rows:4,required:!0,placeholder:"Enter the prompt text..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:o.name,onChange:t=>p({...o,name:t.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0,placeholder:"e.g., 'The Chosen One'"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:o.description,onChange:t=>p({...o,description:t.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",rows:4,required:!0,placeholder:"Describe this trope..."})]})]}),y&&e.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-200 px-4 py-2 rounded-lg text-sm",children:y}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:h==="add"?"Add":"Save"})]})]})]})})]})}export{V as default};
//# sourceMappingURL=PromptsTropes-CGit5AJU.js.map
