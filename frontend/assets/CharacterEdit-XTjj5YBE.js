import{P as M,r as h,u as L,i as I,j as e,E as R}from"./editor-B5c-jJ5G.js";import{N as S}from"./Navigation-CztJBz0i.js";import{a as H}from"./index-Dyp_sm3x.js";import{M as $,B as U,r as O,H as z,s as G,t as K,u as W,b as J,v as T,w as V,x as _,m as F}from"./lucide-Do81zF_g.js";import"./matrix-DowZW4Yz.js";var q=M;function i({label:a,value:d,onChange:t,type:y="short",placeholder:j="",rows:N=3}){const[b,C]=h.useState(!1),[f,p]=h.useState(d||""),r=L({extensions:[I,q.configure({placeholder:j||"Start typing..."})],content:f||"<p></p>",onUpdate:({editor:s})=>{p(s.getHTML())},editable:!0});h.useEffect(()=>{if(r&&b){const s=d||"<p></p>";s!==r.getHTML()&&r.commands.setContent(s),p(s)}},[b,r]);const B=()=>{C(!0)},g=()=>{t(f),C(!1)},v=()=>{p(d||""),C(!1)},w={backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"},k=s=>{const u=document.createElement("div");return u.innerHTML=s||"",u.textContent||u.innerText||""};if(y==="short")return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:a}),e.jsx("input",{type:"text",value:d||"",onChange:s=>t(s.target.value),className:"w-full px-4 py-2 rounded-lg",style:w,placeholder:j})]});const A=y==="long"?6:N;return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:a}),!b&&e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:k(d),readOnly:!0,onClick:B,rows:A,className:"w-full px-4 py-2 rounded-lg cursor-pointer",style:w,placeholder:j||"Click to open rich text editor..."}),e.jsx("button",{onClick:B,className:"absolute top-2 right-2 p-1 rounded hover:bg-opacity-20 hover:bg-white",style:{color:"#B3B2B0"},title:"Expand rich text editor",children:e.jsx($,{size:16})})]}),b&&r&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-1 p-2 rounded-lg flex-wrap",style:{backgroundColor:"#2A2724",border:"1px solid #6C6A68"},children:[e.jsx("button",{onClick:()=>r.chain().focus().toggleBold().run(),className:`p-2 rounded ${r.isActive("bold")?"bg-opacity-30":""}`,style:{backgroundColor:r.isActive("bold")?"#D4AF37":"transparent",color:r.isActive("bold")?"#1A1918":"#D4AF37",border:"1px solid #D4AF37"},title:"Bold (Ctrl+B)",children:e.jsx(U,{size:16})}),e.jsx("button",{onClick:()=>r.chain().focus().toggleItalic().run(),className:`p-2 rounded ${r.isActive("italic")?"bg-opacity-30":""}`,style:{backgroundColor:r.isActive("italic")?"#D4AF37":"transparent",color:r.isActive("italic")?"#1A1918":"#D4AF37",border:"1px solid #D4AF37"},title:"Italic (Ctrl+I)",children:e.jsx(O,{size:16})}),e.jsx("button",{onClick:()=>r.chain().focus().toggleHeading({level:1}).run(),className:`p-2 rounded ${r.isActive("heading",{level:1})?"bg-opacity-30":""}`,style:{backgroundColor:r.isActive("heading",{level:1})?"#D4AF37":"transparent",color:r.isActive("heading",{level:1})?"#1A1918":"#D4AF37",border:"1px solid #D4AF37"},title:"Heading 1",children:e.jsx(z,{size:16})}),e.jsx("button",{onClick:()=>r.chain().focus().toggleHeading({level:2}).run(),className:`p-2 rounded ${r.isActive("heading",{level:2})?"bg-opacity-30":""}`,style:{backgroundColor:r.isActive("heading",{level:2})?"#D4AF37":"transparent",color:r.isActive("heading",{level:2})?"#1A1918":"#D4AF37",border:"1px solid #D4AF37"},title:"Heading 2",children:e.jsx(G,{size:16})}),e.jsx("button",{onClick:()=>r.chain().focus().toggleBulletList().run(),className:`p-2 rounded ${r.isActive("bulletList")?"bg-opacity-30":""}`,style:{backgroundColor:r.isActive("bulletList")?"#D4AF37":"transparent",color:r.isActive("bulletList")?"#1A1918":"#D4AF37",border:"1px solid #D4AF37"},title:"Bullet List",children:e.jsx(K,{size:16})}),e.jsx("button",{onClick:()=>r.chain().focus().toggleOrderedList().run(),className:`p-2 rounded ${r.isActive("orderedList")?"bg-opacity-30":""}`,style:{backgroundColor:r.isActive("orderedList")?"#D4AF37":"transparent",color:r.isActive("orderedList")?"#1A1918":"#D4AF37",border:"1px solid #D4AF37"},title:"Numbered List",children:e.jsx(W,{size:16})})]}),e.jsx("div",{className:"character-editor-wrapper rounded-lg",style:{backgroundColor:"#37322E",border:"1px solid #6C6A68",minHeight:"200px",padding:"12px"},children:e.jsx(R,{editor:r})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsxs("button",{onClick:v,className:"px-4 py-2 rounded-lg flex items-center gap-2",style:{backgroundColor:"#37322E",color:"#B3B2B0",border:"1px solid #6C6A68"},children:[e.jsx(J,{size:16}),"Cancel"]}),e.jsxs("button",{onClick:g,className:"px-4 py-2 rounded-lg flex items-center gap-2",style:{backgroundColor:"#D4AF37",color:"#1A1918",fontWeight:"bold"},children:[e.jsx(T,{size:16}),"Save"]})]}),e.jsx("p",{className:"text-xs",style:{color:"#6C6A68"},children:"Rich text editor - Use toolbar buttons or keyboard shortcuts (Ctrl+B for bold, Ctrl+I for italic)"})]})]})}const D=a=>{if(!a)return"";if(typeof a=="string"){if(!a.trim().startsWith("{")&&!a.trim().startsWith("["))return a;try{const d=JSON.parse(a);return d.name?d.name:d.race?d.race:d.className?d.className:""}catch{return a}}if(typeof a=="object"&&a!==null){if(a.name)return a.name;if(a.race)return a.race;if(a.className)return a.className}return""};function le(){const[a,d]=h.useState(null),[t,y]=h.useState({name:"",race:"",characterClass:"",level:1,strength:10,dexterity:10,constitution:10,intelligence:10,wisdom:10,charisma:10,maxHp:0,currentHp:0,armorClass:10,isPublic:!1}),[j,N]=h.useState(!0),[b,C]=h.useState(!1),[f,p]=h.useState(""),r="",B=window.location.pathname.split("/"),g=B[2]!=="new"?parseInt(B[2]):null,v=!g;h.useEffect(()=>{w()},[]);const w=async()=>{try{const l=await H.getCurrentUser();d(l),g&&await k()}catch(l){console.error("Failed to load data:",l)}finally{N(!1)}},k=async()=>{try{const l=await fetch(`${r}/api/characters/${g}`,{credentials:"include"});if(l.ok){const o=await l.json();y(o)}}catch(l){console.error("Failed to load character:",l)}},A=async()=>{if(!t.name){p("Character name is required");return}C(!0),p("");try{const l=v?`${r}/api/characters`:`${r}/api/characters/${g}`,o=await fetch(l,{method:v?"POST":"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(o.ok)window.location.href="/characters";else{const n=await o.json();p(n.error||"Failed to save character")}}catch{p("Failed to save character")}finally{C(!1)}},s=(l,o)=>{y(n=>({...n,[l]:o}))},u=async(l,o="ability",n)=>{if(!g){alert("Please save your character first before rolling dice!");return}try{const c=await fetch(`${r}/api/csrf-token`,{credentials:"include"}),{csrfToken:x}=await c.json(),E=await fetch(`${r}/api/characters/${g}/roll`,{method:"POST",headers:{"Content-Type":"application/json","x-csrf-token":x},credentials:"include",body:JSON.stringify({stat:l,rollType:o,skillName:n})});if(E.ok){const m=await E.json(),P=m.sentToDiscord?`ðŸŽ² ${m.rollDescription}: ${m.diceRoll} + ${m.modifier} = ${m.total}
âœ… Sent to Discord!`:`ðŸŽ² ${m.rollDescription}: ${m.diceRoll} + ${m.modifier} = ${m.total}
âš ï¸ Not linked to Discord channel`;alert(P)}else{const m=await E.json();alert(`Failed to roll: ${m.error}`)}}catch(c){console.error("Error rolling dice:",c),alert("Failed to roll dice")}};return j?e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#37322E"},children:[e.jsx(S,{user:a,currentPage:"characters"}),e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("p",{className:"text-white",children:"Loading..."})})]}):e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#37322E"},children:[e.jsx(S,{user:a,currentPage:"characters"}),e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("button",{onClick:()=>window.location.href="/characters",className:"p-2 rounded-lg transition-colors",style:{backgroundColor:"#524944",color:"#B3B2B0"},children:e.jsx(V,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:v?"Create Character":"Edit Character"}),e.jsx("p",{className:"text-gray-400",children:v?"Add a new character to your roster":"Update character details"})]})]}),f&&e.jsx("div",{className:"mb-6 p-4 rounded-lg border",style:{backgroundColor:"#524944",borderColor:"#B34B0C"},children:e.jsx("p",{style:{color:"#B34B0C"},children:f})}),e.jsxs("div",{className:"rounded-lg p-6 space-y-6",style:{backgroundColor:"#524944",borderColor:"#6C6A68"},children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-6",children:"Avatar & PathCompanion"}),e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[t.avatarUrl&&e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:t.avatarUrl,alt:"Character avatar",className:"w-40 h-40 rounded-lg object-cover",style:{border:"2px solid #6C6A68"},onError:l=>{l.target.style.display="none"}})}),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-center",style:{color:"#B3B2B0"},children:"Avatar URL"}),e.jsx("input",{type:"text",value:t.avatarUrl||"",onChange:l=>s("avatarUrl",l.target.value),className:"w-full px-4 py-2 rounded-lg mb-3",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"},placeholder:"https://example.com/avatar.jpg"}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("label",{className:"px-6 py-3 rounded-lg cursor-pointer flex items-center gap-2",style:{backgroundColor:"#D4AF37",color:"#1A1918",fontWeight:"500"},children:[e.jsx(_,{size:18}),"Upload Avatar",e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",className:"hidden",onChange:async l=>{const o=l.target.files?.[0];if(o){if(o.size>5*1024*1024){alert("File size must be less than 5MB");return}try{const n=new FormData;n.append("avatar",o);const c=await fetch("http://localhost:3000/api/characters/upload-avatar",{method:"POST",credentials:"include",body:n});if(!c.ok)throw new Error("Upload failed");const x=await c.json();s("avatarUrl",x.fullUrl),alert("Avatar uploaded successfully!")}catch(n){console.error("Upload error:",n),alert("Failed to upload avatar")}}}})]}),e.jsx("span",{className:"text-xs",style:{color:"#6C6A68"},children:"Max 5MB â€¢ JPEG, PNG, GIF, WebP"})]})]})]}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-center",style:{color:"#B3B2B0"},children:"PathCompanion Character Code"}),e.jsx("input",{type:"text",value:t.pathcompanionCharacterId||"",onChange:l=>s("pathcompanionCharacterId",l.target.value),className:"w-full px-4 py-2 rounded-lg mb-4",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"},placeholder:"Enter PathCompanion character ID"}),t.id&&t.pathcompanionCharacterId&&e.jsx("div",{className:"flex justify-center mb-3",children:e.jsxs("button",{onClick:async()=>{try{const l=await fetch(`http://localhost:3000/api/pathcompanion/sync/${t.id}`,{method:"POST",credentials:"include"});if(!l.ok){const n=await l.json();alert(`Sync failed: ${n.error||"Unknown error"}`);return}const o=await l.json();y(o.character),alert("Character synced successfully with PathCompanion!")}catch(l){console.error("Sync error:",l),alert("Failed to sync with PathCompanion")}},className:"px-6 py-3 rounded-lg flex items-center gap-2",style:{backgroundColor:"#D4AF37",color:"#1A1918",fontWeight:"600"},children:[e.jsx(F,{size:18}),"Sync with PathCompanion"]})}),t.pathcompanionUsername&&e.jsxs("p",{className:"text-sm text-center",style:{color:"#B3B2B0"},children:["Connected to: ",e.jsx("span",{style:{color:"#D4AF37"},children:t.pathcompanionUsername})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Character Name *"}),e.jsx("input",{type:"text",value:t.name,onChange:l=>s("name",l.target.value),className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"},placeholder:"Enter character name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Race"}),e.jsx("input",{type:"text",value:D(t.race)||"",onChange:l=>s("race",l.target.value),className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"},placeholder:"e.g., Human, Elf"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Class"}),e.jsx("input",{type:"text",value:D(t.characterClass)||"",onChange:l=>s("characterClass",l.target.value),className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"},placeholder:"e.g., Fighter, Wizard"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Level"}),e.jsx("input",{type:"number",value:t.level||1,onChange:l=>s("level",parseInt(l.target.value)||1),className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"},min:"1",max:"20"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Ability Scores",e.jsx("span",{className:"text-sm font-normal ml-2",style:{color:"#B3B2B0"},children:"(Click modifier to roll)"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:["strength","dexterity","constitution","intelligence","wisdom","charisma"].map(l=>{const o=t[l]||10,n=Math.floor((o-10)/2),c=n>=0?`+${n}`:`${n}`;return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 capitalize",style:{color:"#B3B2B0"},children:l.slice(0,3).toUpperCase()}),e.jsx("input",{type:"number",value:o,onChange:x=>s(l,parseInt(x.target.value)||10),className:"w-full px-4 py-2 rounded-lg text-center",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"},min:"1",max:"30"}),e.jsxs("button",{type:"button",onClick:()=>u(l),className:"w-full mt-2 px-2 py-1 rounded text-sm font-bold transition-colors",style:{backgroundColor:"#B34B0C",color:"white",cursor:"pointer"},onMouseEnter:x=>x.currentTarget.style.backgroundColor="#D4AF37",onMouseLeave:x=>x.currentTarget.style.backgroundColor="#B34B0C",children:["ðŸŽ² ",c]})]},l)})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Combat Stats",e.jsx("span",{className:"text-sm font-normal ml-2",style:{color:"#B3B2B0"},children:"(Click values to roll)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Max HP"}),e.jsx("input",{type:"number",value:t.maxHp||0,onChange:l=>s("maxHp",parseInt(l.target.value)||0),className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"},min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Current HP"}),e.jsx("input",{type:"number",value:t.currentHp||0,onChange:l=>s("currentHp",parseInt(l.target.value)||0),className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"},min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Armor Class"}),e.jsx("input",{type:"number",value:t.armorClass||10,onChange:l=>s("armorClass",parseInt(l.target.value)||10),className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"},min:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Initiative"}),e.jsx("input",{type:"number",value:t.initiative||0,onChange:l=>s("initiative",parseInt(l.target.value)||0),className:"w-full px-4 py-2 rounded-lg text-center",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}}),e.jsx("button",{type:"button",onClick:()=>u("dexterity","ability"),className:"w-full mt-2 px-2 py-1 rounded text-sm font-bold transition-colors",style:{backgroundColor:"#B34B0C",color:"white",cursor:"pointer"},onMouseEnter:l=>l.currentTarget.style.backgroundColor="#D4AF37",onMouseLeave:l=>l.currentTarget.style.backgroundColor="#B34B0C",title:"Roll initiative (d20 + DEX modifier)",children:"ðŸŽ² Initiative"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"BAB"}),e.jsx("input",{type:"number",value:t.baseAttackBonus||0,onChange:l=>s("baseAttackBonus",parseInt(l.target.value)||0),className:"w-full px-4 py-2 rounded-lg text-center",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}}),e.jsx("button",{type:"button",onClick:()=>u("strength","attack"),className:"w-full mt-2 px-2 py-1 rounded text-sm font-bold transition-colors",style:{backgroundColor:"#B34B0C",color:"white",cursor:"pointer"},onMouseEnter:l=>l.currentTarget.style.backgroundColor="#D4AF37",onMouseLeave:l=>l.currentTarget.style.backgroundColor="#B34B0C",title:"Roll attack (d20 + STR modifier)",children:"ðŸŽ² Attack"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"CMB"}),e.jsx("input",{type:"number",value:t.cmb||0,onChange:l=>s("cmb",parseInt(l.target.value)||0),className:"w-full px-4 py-2 rounded-lg text-center",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}}),e.jsx("button",{type:"button",onClick:()=>u("strength","attack"),className:"w-full mt-2 px-2 py-1 rounded text-sm font-bold transition-colors",style:{backgroundColor:"#B34B0C",color:"white",cursor:"pointer"},onMouseEnter:l=>l.currentTarget.style.backgroundColor="#D4AF37",onMouseLeave:l=>l.currentTarget.style.backgroundColor="#B34B0C",title:"Roll CMB (d20 + STR modifier)",children:"ðŸŽ² Maneuver"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"CMD"}),e.jsx("input",{type:"number",value:t.cmd||10,onChange:l=>s("cmd",parseInt(l.target.value)||10),className:"w-full px-4 py-2 rounded-lg text-center",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-white mb-3",children:"Saving Throws"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Fortitude"}),e.jsx("input",{type:"number",value:t.fortitudeSave||0,onChange:l=>s("fortitudeSave",parseInt(l.target.value)||0),className:"w-full px-4 py-2 rounded-lg text-center",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}}),e.jsx("button",{type:"button",onClick:()=>u("fortitude","save"),className:"w-full mt-2 px-2 py-1 rounded text-sm font-bold transition-colors",style:{backgroundColor:"#B34B0C",color:"white",cursor:"pointer"},onMouseEnter:l=>l.currentTarget.style.backgroundColor="#D4AF37",onMouseLeave:l=>l.currentTarget.style.backgroundColor="#B34B0C",children:"ðŸŽ² Fort Save"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Reflex"}),e.jsx("input",{type:"number",value:t.reflexSave||0,onChange:l=>s("reflexSave",parseInt(l.target.value)||0),className:"w-full px-4 py-2 rounded-lg text-center",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}}),e.jsx("button",{type:"button",onClick:()=>u("reflex","save"),className:"w-full mt-2 px-2 py-1 rounded text-sm font-bold transition-colors",style:{backgroundColor:"#B34B0C",color:"white",cursor:"pointer"},onMouseEnter:l=>l.currentTarget.style.backgroundColor="#D4AF37",onMouseLeave:l=>l.currentTarget.style.backgroundColor="#B34B0C",children:"ðŸŽ² Ref Save"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Will"}),e.jsx("input",{type:"number",value:t.willSave||0,onChange:l=>s("willSave",parseInt(l.target.value)||0),className:"w-full px-4 py-2 rounded-lg text-center",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}}),e.jsx("button",{type:"button",onClick:()=>u("will","save"),className:"w-full mt-2 px-2 py-1 rounded text-sm font-bold transition-colors",style:{backgroundColor:"#B34B0C",color:"white",cursor:"pointer"},onMouseEnter:l=>l.currentTarget.style.backgroundColor="#D4AF37",onMouseLeave:l=>l.currentTarget.style.backgroundColor="#B34B0C",children:"ðŸŽ² Will Save"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Skills",e.jsx("span",{className:"text-sm font-normal ml-2",style:{color:"#B3B2B0"},children:"(Click to roll)"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:["Acrobatics","Appraise","Bluff","Climb","Craft","Diplomacy","Disable Device","Disguise","Escape Artist","Fly","Handle Animal","Heal","Intimidate","Knowledge (Arcana)","Knowledge (Dungeoneering)","Knowledge (Engineering)","Knowledge (Geography)","Knowledge (History)","Knowledge (Local)","Knowledge (Nature)","Knowledge (Nobility)","Knowledge (Planes)","Knowledge (Religion)","Linguistics","Perception","Perform","Profession","Ride","Sense Motive","Sleight of Hand","Spellcraft","Stealth","Survival","Swim","Use Magic Device"].map(l=>{let o=0;try{o=(t.skills?JSON.parse(t.skills):{})[l]?.total||0}catch{}const n=o>=0?`+${o}`:`${o}`;return e.jsxs("button",{type:"button",onClick:()=>u("","skill",l),className:"px-3 py-2 rounded text-sm transition-colors text-left flex justify-between items-center",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68",cursor:"pointer"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#B34B0C",c.currentTarget.style.borderColor="#D4AF37"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="#37322E",c.currentTarget.style.borderColor="#6C6A68"},children:[e.jsx("span",{children:l}),e.jsxs("span",{className:"font-bold ml-2",children:["ðŸŽ² ",n]})]},l)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Identity & Background"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Full Name"}),e.jsx("input",{type:"text",value:t.fullName||"",onChange:l=>s("fullName",l.target.value),className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Titles"}),e.jsx("input",{type:"text",value:t.titles||"",onChange:l=>s("titles",l.target.value),className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"},placeholder:"e.g., Knight, Champion, The Brave"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Age"}),e.jsx("input",{type:"text",value:t.ageDescription||"",onChange:l=>s("ageDescription",l.target.value),className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Pronouns"}),e.jsx("input",{type:"text",value:t.pronouns||"",onChange:l=>s("pronouns",l.target.value),className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"},placeholder:"e.g., she/her, he/him, they/them"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Occupation"}),e.jsx("input",{type:"text",value:t.occupation||"",onChange:l=>s("occupation",l.target.value),className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Current Location"}),e.jsx("input",{type:"text",value:t.currentLocation||"",onChange:l=>s("currentLocation",l.target.value),className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Cultural Background"}),e.jsx("textarea",{value:t.culturalBackground||"",onChange:l=>s("culturalBackground",l.target.value),rows:3,className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Goals & Motivations"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Current Goal"}),e.jsx("textarea",{value:t.currentGoal||"",onChange:l=>s("currentGoal",l.target.value),rows:2,className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Long-term Desire"}),e.jsx("textarea",{value:t.longTermDesire||"",onChange:l=>s("longTermDesire",l.target.value),rows:2,className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Core Motivation"}),e.jsx("textarea",{value:t.coreMotivation||"",onChange:l=>s("coreMotivation",l.target.value),rows:2,className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Deepest Fear"}),e.jsx("textarea",{value:t.deepestFear||"",onChange:l=>s("deepestFear",l.target.value),rows:2,className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Personality"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Personality (One Sentence)"}),e.jsx("input",{type:"text",value:t.personalityOneSentence||"",onChange:l=>s("personalityOneSentence",l.target.value),className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Key Virtues"}),e.jsx("textarea",{value:t.keyVirtues||"",onChange:l=>s("keyVirtues",l.target.value),rows:2,className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Key Flaws"}),e.jsx("textarea",{value:t.keyFlaws||"",onChange:l=>s("keyFlaws",l.target.value),rows:2,className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Stress Behavior"}),e.jsx("input",{type:"text",value:t.stressBehavior||"",onChange:l=>s("stressBehavior",l.target.value),className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Habits or Tells"}),e.jsx("input",{type:"text",value:t.habitsOrTells||"",onChange:l=>s("habitsOrTells",l.target.value),className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Speech Style"}),e.jsx("textarea",{value:t.speechStyle||"",onChange:l=>s("speechStyle",l.target.value),rows:2,className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"},placeholder:"How do they speak? Formal, casual, etc."})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Appearance"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Physical Presence"}),e.jsx("textarea",{value:t.physicalPresence||"",onChange:l=>s("physicalPresence",l.target.value),rows:3,className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"},placeholder:"Height, build, posture, general impression"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Identifying Traits"}),e.jsx("textarea",{value:t.identifyingTraits||"",onChange:l=>s("identifyingTraits",l.target.value),rows:2,className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"},placeholder:"Scars, tattoos, unique features"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Clothing Aesthetic"}),e.jsx("textarea",{value:t.clothingAesthetic||"",onChange:l=>s("clothingAesthetic",l.target.value),rows:2,className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Backstory"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{label:"Origin",value:t.origin||"",onChange:l=>s("origin",l),type:"editor",placeholder:"Where did they come from? What shaped them?"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{label:"Greatest Success",value:t.greatestSuccess||"",onChange:l=>s("greatestSuccess",l),type:"editor"}),e.jsx(i,{label:"Greatest Failure",value:t.greatestFailure||"",onChange:l=>s("greatestFailure",l),type:"editor"}),e.jsx(i,{label:"Deepest Regret",value:t.regret||"",onChange:l=>s("regret",l),type:"editor"}),e.jsx(i,{label:"Trauma",value:t.trauma||"",onChange:l=>s("trauma",l),type:"editor"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Relationships"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{label:"Important Relationships",value:t.importantRelationships||"",onChange:l=>s("importantRelationships",l),type:"editor",placeholder:"Family, friends, allies, enemies"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{label:"Most Protected Relationship",value:t.protectedRelationship||"",onChange:l=>s("protectedRelationship",l),type:"editor"}),e.jsx(i,{label:"Avoided Relationship",value:t.avoidedRelationship||"",onChange:l=>s("avoidedRelationship",l),type:"editor"})]}),e.jsx(i,{label:"Rival",value:t.rival||"",onChange:l=>s("rival",l),type:"editor"}),e.jsx(i,{label:"Affiliated Groups",value:t.affiliatedGroups||"",onChange:l=>s("affiliatedGroups",l),type:"medium",placeholder:"Guilds, organizations, factions"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Secrets & Hidden Depths"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{label:"Public Facade",value:t.publicFacade||"",onChange:l=>s("publicFacade",l),type:"editor"}),e.jsx(i,{label:"Hidden Aspect",value:t.hiddenAspect||"",onChange:l=>s("hiddenAspect",l),type:"editor"})]}),e.jsx(i,{label:"Secret",value:t.secret||"",onChange:l=>s("secret",l),type:"editor"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Growth & Change"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{label:"Recent Change",value:t.recentChange||"",onChange:l=>s("recentChange",l),type:"editor"}),e.jsx(i,{label:"Potential Change",value:t.potentialChange||"",onChange:l=>s("potentialChange",l),type:"editor"}),e.jsx(i,{label:"Breaking Point",value:t.breakingPoint||"",onChange:l=>s("breakingPoint",l),type:"editor"}),e.jsx(i,{label:"Path to Redemption",value:t.redemption||"",onChange:l=>s("redemption",l),type:"editor"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Legacy"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Symbol or Motif"}),e.jsx("input",{type:"text",value:t.symbolOrMotif||"",onChange:l=>s("symbolOrMotif",l.target.value),className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"},placeholder:"e.g., A broken sword, a white rose"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Legacy"}),e.jsx("textarea",{value:t.legacy||"",onChange:l=>s("legacy",l.target.value),rows:3,className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"},placeholder:"What do they hope to leave behind?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#B3B2B0"},children:"Remembered As"}),e.jsx("textarea",{value:t.rememberedAs||"",onChange:l=>s("rememberedAs",l.target.value),rows:2,className:"w-full px-4 py-2 rounded-lg",style:{backgroundColor:"#37322E",color:"white",border:"1px solid #6C6A68"}})]})]})]}),t.pathcompanionCharacterId&&e.jsxs("div",{className:"p-4 rounded-lg border",style:{borderColor:"#6C6A68"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",style:{color:"#B34B0C"},children:[e.jsx(F,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Linked to PathCompanion"})]}),t.pathcompanionUsername&&e.jsxs("p",{className:"text-sm",style:{color:"#B3B2B0"},children:["Username: ",t.pathcompanionUsername]})]}),e.jsxs("div",{className:"flex gap-4 pt-4 border-t",style:{borderColor:"#6C6A68"},children:[e.jsxs("button",{onClick:A,disabled:b,className:"flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-colors text-white disabled:opacity-50",style:{backgroundColor:"#B34B0C"},children:[e.jsx(T,{className:"w-5 h-5"}),b?"Saving...":"Save Character"]}),e.jsx("button",{onClick:()=>window.location.href="/characters",className:"px-6 py-3 rounded-lg font-medium transition-colors",style:{backgroundColor:"#37322E",color:"#B3B2B0"},children:"Cancel"})]})]})]})]})}export{le as CharacterEdit,le as default};
