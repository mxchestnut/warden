import{r as a,a as m,j as e}from"./index-BcQW7OjF.js";import{c as D,e as u,X as E,T as R}from"./Dashboard-CwAWU9Zg.js";import{S as C}from"./save-DRJRgEBj.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"9100b80d8d3578ae8a7e4dcad47fa28b1cb8d4d7"}}catch{}})();try{(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},i=new t.Error().stack;i&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[i]="7418abed-f1f8-4c53-945d-a30b70a8e3bb",t._sentryDebugIdIdentifier="sentry-dbid-7418abed-f1f8-4c53-945d-a30b70a8e3bb")})()}catch{}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=D("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);function F({characterId:t,characterName:i,guildId:f}){const[s,n]=a.useState([]),[b,g]=a.useState(!0),[d,x]=a.useState(""),[h,p]=a.useState(null),[y,l]=a.useState("");a.useEffect(()=>{v()},[t]);const v=async()=>{try{g(!0);const r=await m.get(`/memories/${t}/memories`);n(r.data)}catch(r){console.error("Failed to load memories:",r)}finally{g(!1)}},j=async()=>{if(d.trim())try{const r=await m.post(`/memories/${t}/memories`,{memory:d,guildId:f||""});n([r.data,...s]),x("")}catch(r){console.error("Failed to add memory:",r),alert("Failed to add memory")}},w=async r=>{if(confirm("Delete this memory?"))try{await m.delete(`/memories/memories/${r}`),n(s.filter(o=>o.id!==r))}catch(o){console.error("Failed to delete memory:",o),alert("Failed to delete memory")}},S=r=>{p(r.id),l(r.memory)},z=()=>{p(null),l("")},k=async r=>{if(y.trim())try{const o=await m.put(`/memories/memories/${r}`,{memory:y});n(s.map(c=>c.id===r?o.data:c)),p(null),l("")}catch(o){console.error("Failed to update memory:",o),alert("Failed to update memory")}},I=r=>new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return b?e.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading memories..."}):e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i,"'s Memories"]}),e.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Track important moments and character development"})]}),e.jsxs("div",{style:{background:"var(--bg-secondary)",padding:"1.5rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid var(--border-color)"},children:[e.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(u,{size:18}),"Add New Memory"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsx("textarea",{value:d,onChange:r=>x(r.target.value),placeholder:"Had a dream about meeting their soulmate...",style:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid var(--border-color)",background:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"0.95rem",minHeight:"80px",resize:"vertical"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.5rem"},children:[e.jsxs("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",flex:"1 1 auto"},children:["Discord: ",e.jsxs("code",{children:["!Memory ",i," | [your memory]"]})]}),e.jsxs("button",{onClick:j,disabled:!d.trim(),style:{padding:"0.5rem 1rem",background:d.trim()?"var(--primary-color)":"var(--bg-tertiary)",color:d.trim()?"white":"var(--text-secondary)",border:"none",borderRadius:"6px",cursor:d.trim()?"pointer":"not-allowed",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem",flexShrink:0},children:[e.jsx(u,{size:16}),"Add Memory"]})]})]})]}),s.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"3rem 2rem",background:"var(--bg-secondary)",borderRadius:"8px",border:"1px dashed var(--border-color)"},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"}}),e.jsx("h3",{style:{fontSize:"1.2rem",marginBottom:"0.5rem"},children:"No memories yet"}),e.jsxs("p",{style:{color:"var(--text-secondary)"},children:["Add the first memory to track ",i,"'s journey"]})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginBottom:"0.5rem"},children:[s.length," ",s.length===1?"memory":"memories"]}),s.map((r,o)=>e.jsxs("div",{style:{background:"var(--bg-secondary)",padding:"1.25rem",borderRadius:"8px",border:"1px solid var(--border-color)",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",top:"1rem",left:"1rem",background:"var(--primary-color)",color:"white",width:"28px",height:"28px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.85rem",fontWeight:"bold"},children:o+1}),e.jsx("div",{style:{paddingLeft:"3rem"},children:h===r.id?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsx("textarea",{value:y,onChange:c=>l(c.target.value),style:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid var(--border-color)",background:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"0.95rem",minHeight:"80px",resize:"vertical"}}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>k(r.id),style:{padding:"0.5rem 1rem",background:"var(--success-color)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(C,{size:16}),"Save"]}),e.jsxs("button",{onClick:z,style:{padding:"0.5rem 1rem",background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(E,{size:16}),"Cancel"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{fontSize:"1rem",lineHeight:"1.6",marginBottom:"0.75rem"},children:r.memory}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"0.75rem",borderTop:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:["Added ",I(r.createdAt),r.addedBy!=="portal"&&e.jsx("span",{style:{marginLeft:"0.5rem"},children:"â€¢ Discord"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>S(r),style:{padding:"0.4rem 0.8rem",background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[e.jsx(M,{size:14}),"Edit"]}),e.jsxs("button",{onClick:()=>w(r.id),style:{padding:"0.4rem 0.8rem",background:"var(--danger-color)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[e.jsx(R,{size:14}),"Delete"]})]})]})]})})]},r.id))]})]})}export{F as default};
//# sourceMappingURL=CharacterMemories-Cv9GziCu.js.map
