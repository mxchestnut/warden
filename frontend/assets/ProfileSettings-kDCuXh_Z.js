import{r as t,j as e}from"./editor-B5c-jJ5G.js";import{a as Be}from"./index-BVoSnxsl.js";import{N as V}from"./Navigation-Bu4mKBq_.js";import{k as X,l as Z,m as _,D as ee,n as oe}from"./lucide-Dq8yrhg5.js";import"./matrix-DowZW4Yz.js";function Te(){const[i,re]=t.useState(null),[te,z]=t.useState(!0),[c,I]=t.useState("profile"),[ke,Se]=t.useState(!1),[W,n]=t.useState(null),[O,u]=t.useState(null),[b,U]=t.useState(""),[C,R]=t.useState(""),[g,S]=t.useState(!1),[p,y]=t.useState(!1),[m,f]=t.useState(!1),[x,J]=t.useState(""),[ne,T]=t.useState(!1),[w,ae]=t.useState([]),[ie,se]=t.useState([]),[l,v]=t.useState({}),[le,P]=t.useState(!1),[j,$]=t.useState([]),[de,ce]=t.useState([]),[d,D]=t.useState({}),[pe,me]=t.useState(null),[L,M]=t.useState(!1),[B,he]=t.useState(null),[G,ue]=t.useState(null),[k,H]=t.useState(!1),[q,N]=t.useState(!1);t.useEffect(()=>{A()},[]);const A=async()=>{try{z(!0);const o=await Be.getCurrentUser();o&&re({...o,pathCompanionConnected:o.pathCompanionConnected||!!o.pathCompanionUsername,pathCompanionUsername:o.pathCompanionUsername})}catch(o){console.error("Failed to load user:",o),n("Failed to load profile")}finally{z(!1)}},ge=async()=>{if(!b||!C){n("Please enter both username and password");return}try{S(!0),n(null),u(null);const o=await fetch("/api/auth/pathcompanion/connect",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:b,password:C})});if(!o.ok){const s=await o.json();throw new Error(s.error||"Failed to connect PathCompanion account")}const r=await o.json();u("PathCompanion account connected successfully!"),R(""),await A()}catch(o){n(o instanceof Error?o.message:"Failed to connect PathCompanion")}finally{S(!1)}},xe=async()=>{if(confirm("Are you sure you want to disconnect your PathCompanion account?"))try{if(S(!0),n(null),u(null),!(await fetch("/api/auth/pathcompanion/disconnect",{method:"POST",credentials:"include"})).ok)throw new Error("Failed to disconnect PathCompanion account");u("PathCompanion account disconnected successfully"),U(""),R(""),await A()}catch(o){n(o instanceof Error?o.message:"Failed to disconnect PathCompanion")}finally{S(!1)}},be=async()=>{if(i?.accountCode)try{await navigator.clipboard.writeText(i.accountCode),M(!0),setTimeout(()=>M(!1),2e3),console.log("Copied Account Code:",i.accountCode)}catch(o){console.error("Failed to copy:",o);const r=document.querySelector("input[readonly]");r&&r.select()}else console.error("No account code available to copy")},K=async()=>{try{H(!0),n(null);const o=await fetch("/api/auth/generate-discord-code",{method:"POST",credentials:"include"});if(!o.ok)throw new Error("Failed to generate Discord connection code");const r=await o.json();he(r.code),ue(new Date(r.expiresAt)),N(!1)}catch(o){n(o instanceof Error?o.message:"Failed to generate code")}finally{H(!1)}},Ce=()=>{B&&(navigator.clipboard.writeText(B),N(!0),setTimeout(()=>N(!1),2e3))},F=async()=>{try{return(await(await fetch("/api/csrf-token",{credentials:"include"})).json()).csrfToken}catch(o){return console.error("Failed to get CSRF token:",o),null}},ye=async()=>{if(!i?.pathCompanionConnected){n("Please connect your PathCompanion account first");return}try{y(!0),n(null),u(null);const o=await F();if(!o)throw new Error("Failed to get CSRF token");const r=await fetch("/api/pathcompanion/import-preview",{credentials:"include",headers:{"x-csrf-token":o}});if(!r.ok){const a=await r.json();throw a.reconnectRequired||r.status===401?new Error(a.error||"PathCompanion session expired. Please disconnect and reconnect your PathCompanion account."):new Error(a.error||"Failed to check for conflicts")}const s=await r.json();if(s.conflicts&&s.conflicts.length>0){ae(s.conflicts),se(s.newCharacters||[]),v({}),T(!0),y(!1);return}await Y(o,{})}catch(o){n(o instanceof Error?o.message:"Failed to import characters"),y(!1)}},Y=async(o,r)=>{try{const s=await fetch("/api/pathcompanion/import-all",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","x-csrf-token":o},body:JSON.stringify({mergeDecisions:r})});if(!s.ok){const E=await s.json();throw new Error(E.error||"Failed to import characters")}const a=await s.json(),h=a.skipped?.length||0;u(`Successfully imported ${a.success?.length||0} characters! ${a.failed?.length?`(${a.failed.length} failed)`:""} ${h?`(${h} skipped)`:""}`),T(!1)}catch(s){throw s}finally{y(!1)}},fe=async()=>{const o=w.filter(r=>!l[r.pathCompanionId]);if(o.length>0){n(`Please make a decision for all ${o.length} conflict(s)`);return}try{n(null),y(!0);const r=await F();if(!r)throw new Error("Failed to get CSRF token");await Y(r,l)}catch(r){n(r instanceof Error?r.message:"Failed to import characters"),y(!1)}},we=async()=>{if(!x.trim()){n("Please paste your Tupperbox JSON data");return}try{f(!0),n(null),u(null);let o;try{o=JSON.parse(x)}catch{throw new Error("Invalid JSON format. Please paste the exact JSON export from Tupperbox.")}if(!o.tuppers||!Array.isArray(o.tuppers))throw new Error('Invalid Tupperbox format. Expected "tuppers" array.');const r=await F();if(!r)throw new Error("Failed to get CSRF token");const s=await fetch("/api/characters/import-tupperbox-preview",{method:"POST",headers:{"Content-Type":"application/json","x-csrf-token":r},credentials:"include",body:JSON.stringify({tuppers:o.tuppers})});if(!s.ok)throw new Error("Failed to check for conflicts");const a=await s.json();if(a.conflicts&&a.conflicts.length>0){$(a.conflicts),ce(a.newCharacters),me(o),P(!0),f(!1);return}await Q(r,o,{})}catch(o){n(o instanceof Error?o.message:"Failed to import Tupperbox characters"),f(!1)}},Q=async(o,r,s)=>{try{const a=await fetch("/api/characters/import-tupperbox",{method:"POST",headers:{"Content-Type":"application/json","x-csrf-token":o},credentials:"include",body:JSON.stringify({tuppers:r.tuppers,mergeDecisions:s})});if(!a.ok){const E=await a.json();throw new Error(E.error||"Failed to import characters")}const h=await a.json();u(`Successfully imported ${h.imported||0} characters! ${h.failed?`(${h.failed} failed)`:""}${h.skipped?` (${h.skipped} skipped)`:""}`),J(""),P(!1),$([]),D({})}catch(a){throw a}finally{f(!1)}},je=async()=>{const o=j.filter(r=>!d[r.tupperName]);if(o.length>0){n(`Please make a decision for all ${o.length} conflict(s)`);return}f(!0),n(null);try{const r=await F();if(!r)throw new Error("Failed to get CSRF token");await Q(r,pe,d)}catch(r){n(r instanceof Error?r.message:"Failed to import Tupperbox characters"),f(!1)}};return te?e.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#37322E"},children:[e.jsx(V,{user:i}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",paddingTop:"4rem"},children:e.jsx("p",{style:{color:"white"},children:"Loading..."})})]}):e.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#37322E"},children:[e.jsx(V,{user:i}),e.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",color:"white",marginBottom:"0.5rem"},children:"Profile & Settings"}),e.jsx("p",{style:{color:"#B3B2B0"},children:"Manage your account settings and integrations"})]}),W&&e.jsx("div",{style:{backgroundColor:"#7F1D1D",color:"white",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1rem"},children:W}),O&&e.jsx("div",{style:{backgroundColor:"#065F46",color:"white",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1rem"},children:O}),e.jsx("div",{style:{borderBottom:"2px solid #4A4540",marginBottom:"2rem"},children:e.jsxs("div",{style:{display:"flex",gap:"2rem"},children:[e.jsx("button",{onClick:()=>I("profile"),style:{padding:"1rem",color:c==="profile"?"#D4AF37":"#B3B2B0",borderBottom:c==="profile"?"2px solid #D4AF37":"none",background:"none",border:"none",cursor:"pointer",fontWeight:c==="profile"?"bold":"normal"},children:"Profile"}),e.jsx("button",{onClick:()=>I("pathcompanion"),style:{padding:"1rem",color:c==="pathcompanion"?"#D4AF37":"#B3B2B0",borderBottom:c==="pathcompanion"?"2px solid #D4AF37":"none",background:"none",border:"none",cursor:"pointer",fontWeight:c==="pathcompanion"?"bold":"normal"},children:"PathCompanion"}),e.jsx("button",{onClick:()=>I("import"),style:{padding:"1rem",color:c==="import"?"#D4AF37":"#B3B2B0",borderBottom:c==="import"?"2px solid #D4AF37":"none",background:"none",border:"none",cursor:"pointer",fontWeight:c==="import"?"bold":"normal"},children:"Import Characters"})]})}),c==="profile"&&i&&e.jsxs("div",{style:{backgroundColor:"#4A4540",borderRadius:"0.75rem",padding:"2rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"white",marginBottom:"1.5rem"},children:"Account Information"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",color:"#B3B2B0",marginBottom:"0.5rem"},children:"Username"}),e.jsx("input",{type:"text",value:i.username,disabled:!0,style:{width:"100%",padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid #666",backgroundColor:"#333",color:"#888",cursor:"not-allowed"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",color:"#B3B2B0",marginBottom:"0.5rem"},children:"Account ID"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"text",value:i.accountCode,readOnly:!0,onClick:o=>o.currentTarget.select(),style:{width:"100%",padding:"0.75rem",paddingRight:"3rem",borderRadius:"0.5rem",border:"1px solid #666",backgroundColor:"#333",color:"#D4AF37",fontWeight:"bold",fontSize:"1.1rem",cursor:"text",userSelect:"all"}}),e.jsx("button",{onClick:be,style:{position:"absolute",right:"0.5rem",top:"50%",transform:"translateY(-50%)",backgroundColor:L?"#065F46":"#B34B0C",color:"white",padding:"0.5rem",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.25rem",transition:"background-color 0.2s"},title:"Copy Account ID",children:L?e.jsx(X,{className:"w-4 h-4"}):e.jsx(Z,{className:"w-4 h-4"})})]}),e.jsx("p",{style:{color:"#B3B2B0",fontSize:"0.875rem",marginTop:"0.5rem"},children:"Use this ID in Discord to sync your profile with the Warden bot"})]}),e.jsxs("div",{style:{marginTop:"2rem"},children:[e.jsx("label",{style:{display:"block",color:"#D1CFC9",fontWeight:"500",marginBottom:"0.5rem"},children:"Discord Connection Code"}),e.jsxs("p",{style:{color:"#B3B2B0",fontSize:"0.875rem",marginBottom:"1rem"},children:["Generate a temporary code to link your Discord account using ",e.jsx("code",{style:{backgroundColor:"#2F2A26",padding:"0.125rem 0.375rem",borderRadius:"0.25rem",color:"#B34B0C"},children:"!connect CODE"})," in Discord."]}),B?e.jsxs("div",{style:{backgroundColor:"#2F2A26",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #403A34"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx("code",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"#B34B0C",letterSpacing:"0.1em"},children:B}),e.jsx("button",{onClick:Ce,style:{backgroundColor:q?"#065F46":"#B34B0C",color:"white",padding:"0.5rem",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center"},title:"Copy code",children:q?e.jsx(X,{className:"w-4 h-4"}):e.jsx(Z,{className:"w-4 h-4"})})]}),e.jsxs("p",{style:{color:"#B3B2B0",fontSize:"0.875rem",marginBottom:"0.5rem"},children:["â±ï¸ Expires: ",G?new Date(G).toLocaleString():"N/A"]}),e.jsxs("p",{style:{color:"#B3B2B0",fontSize:"0.875rem"},children:["ðŸ’¡ Use ",e.jsxs("code",{style:{backgroundColor:"#4A4540",padding:"0.125rem 0.375rem",borderRadius:"0.25rem",color:"#B34B0C"},children:["!connect ",B]})," in Discord (code expires in 15 minutes)"]}),e.jsx("button",{onClick:K,disabled:k,style:{backgroundColor:"#4A4540",color:"#D1CFC9",padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"none",cursor:"pointer",marginTop:"0.75rem",fontSize:"0.875rem"},children:"Generate New Code"})]}):e.jsx("button",{onClick:K,disabled:k,style:{backgroundColor:"#B34B0C",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",cursor:k?"not-allowed":"pointer",opacity:k?.5:1,fontWeight:"500"},children:k?"Generating...":"Generate Connection Code"})]}),i.isAdmin&&e.jsx("div",{style:{backgroundColor:"#B34B0C",color:"white",padding:"0.75rem 1rem",borderRadius:"0.5rem",display:"inline-block"},children:e.jsx("strong",{children:"Admin Account"})})]})]}),c==="pathcompanion"&&e.jsxs("div",{style:{backgroundColor:"#4A4540",borderRadius:"0.75rem",padding:"2rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"white",marginBottom:"1rem"},children:"PathCompanion Integration"}),e.jsx("p",{style:{color:"#B3B2B0",marginBottom:"1.5rem"},children:"Connect your PathCompanion account to sync characters and access game features."}),i?.pathCompanionConnected?e.jsxs("div",{children:[e.jsxs("div",{style:{backgroundColor:"#065F46",color:"white",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(_,{className:"w-5 h-5"}),e.jsxs("span",{children:["Connected as ",e.jsx("strong",{children:i.pathCompanionUsername})]})]}),e.jsx("button",{onClick:xe,disabled:g,style:{backgroundColor:"#7F1D1D",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",cursor:g?"not-allowed":"pointer",opacity:g?.6:1},children:g?"Disconnecting...":"Disconnect PathCompanion"})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",color:"#B3B2B0",marginBottom:"0.5rem"},children:"PathCompanion Username"}),e.jsx("input",{type:"text",value:b,onChange:o=>U(o.target.value),placeholder:"Enter your PathCompanion username",style:{width:"100%",padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid #666",backgroundColor:"#333",color:"white"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",color:"#B3B2B0",marginBottom:"0.5rem"},children:"PathCompanion Password"}),e.jsx("input",{type:"password",value:C,onChange:o=>R(o.target.value),placeholder:"Enter your PathCompanion password",style:{width:"100%",padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid #666",backgroundColor:"#333",color:"white"}})]}),e.jsx("button",{onClick:ge,disabled:g||!b||!C,style:{backgroundColor:"#B34B0C",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",cursor:g||!b||!C?"not-allowed":"pointer",opacity:g||!b||!C?.6:1},children:g?"Connecting...":"Connect PathCompanion"})]})]}),c==="import"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2rem"},children:[e.jsxs("div",{style:{backgroundColor:"#4A4540",borderRadius:"0.75rem",padding:"2rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[e.jsx(ee,{className:"w-6 h-6",style:{color:"#D4AF37"}}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"white"},children:"Import from PathCompanion"})]}),e.jsx("p",{style:{color:"#B3B2B0",marginBottom:"1.5rem"},children:"Bulk import all your characters from PathCompanion. This will sync all characters from your connected account."}),i?.pathCompanionConnected?e.jsxs("div",{style:{backgroundColor:"#065F46",color:"white",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(_,{className:"w-5 h-5"}),e.jsxs("span",{children:["Connected as ",e.jsx("strong",{children:i.pathCompanionUsername})]})]}):e.jsx("div",{style:{backgroundColor:"#7F1D1D",color:"white",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1rem"},children:"âš ï¸ Please connect your PathCompanion account first in the PathCompanion tab"}),e.jsxs("button",{onClick:ye,disabled:p||!i?.pathCompanionConnected,style:{backgroundColor:i?.pathCompanionConnected?"#B34B0C":"#666",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",cursor:p||!i?.pathCompanionConnected?"not-allowed":"pointer",opacity:p||!i?.pathCompanionConnected?.6:1,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ee,{className:"w-5 h-5"}),p?"Importing...":"Import All Characters"]})]}),e.jsxs("div",{style:{backgroundColor:"#4A4540",borderRadius:"0.75rem",padding:"2rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[e.jsx(oe,{className:"w-6 h-6",style:{color:"#D4AF37"}}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"white"},children:"Import from Tupperbox"})]}),e.jsxs("p",{style:{color:"#B3B2B0",marginBottom:"1rem"},children:["Import characters from Tupperbox JSON export. Get your export by using the ",e.jsx("code",{style:{backgroundColor:"#333",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",color:"#D4AF37"},children:"tul!export"})," command in Discord."]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",color:"#B3B2B0",marginBottom:"0.5rem"},children:"Tupperbox JSON Data"}),e.jsx("textarea",{value:x,onChange:o=>J(o.target.value),placeholder:'Paste your Tupperbox JSON here (e.g., {"tuppers": [...]})',rows:10,style:{width:"100%",padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid #666",backgroundColor:"#333",color:"white",fontFamily:"monospace",fontSize:"0.875rem",resize:"vertical"}}),e.jsxs("p",{style:{color:"#888",fontSize:"0.875rem",marginTop:"0.5rem"},children:["ðŸ’¡ Tip: Run ",e.jsx("code",{style:{backgroundColor:"#333",padding:"0.125rem 0.375rem",borderRadius:"0.25rem"},children:"tul!export"})," in Discord, copy the entire JSON response, and paste it here"]})]}),e.jsxs("button",{onClick:we,disabled:m||!x.trim(),style:{backgroundColor:x.trim()?"#B34B0C":"#666",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",cursor:m||!x.trim()?"not-allowed":"pointer",opacity:m||!x.trim()?.6:1,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(oe,{className:"w-5 h-5"}),m?"Importing...":"Import Tupperbox Characters"]})]})]}),ne&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"2rem"},children:e.jsxs("div",{style:{backgroundColor:"#4A4540",borderRadius:"0.75rem",padding:"2rem",maxWidth:"600px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"white",marginBottom:"1rem"},children:"Character Name Conflicts"}),e.jsxs("p",{style:{color:"#B3B2B0",marginBottom:"1.5rem"},children:["Found ",w.length," character(s) with matching names. Choose what to do for each:"]}),w.map(o=>e.jsxs("div",{style:{backgroundColor:"#37322E",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{marginBottom:"0.75rem"},children:[e.jsx("div",{style:{color:"#D4AF37",fontWeight:"bold",marginBottom:"0.25rem"},children:o.pathCompanionName}),e.jsx("div",{style:{color:"#B3B2B0",fontSize:"0.875rem"},children:o.existingIsLinked?"âš ï¸ Existing character is already linked to PathCompanion":"Exists in your Warden account"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>v({...l,[o.pathCompanionId]:"merge"}),disabled:o.existingIsLinked,style:{flex:1,padding:"0.5rem 1rem",borderRadius:"0.375rem",border:l[o.pathCompanionId]==="merge"?"2px solid #D4AF37":"1px solid #666",backgroundColor:l[o.pathCompanionId]==="merge"?"#B34B0C":"#524944",color:o.existingIsLinked?"#666":"white",cursor:o.existingIsLinked?"not-allowed":"pointer",fontSize:"0.875rem"},children:"Merge/Update"}),e.jsx("button",{onClick:()=>v({...l,[o.pathCompanionId]:"keep-both"}),style:{flex:1,padding:"0.5rem 1rem",borderRadius:"0.375rem",border:l[o.pathCompanionId]==="keep-both"?"2px solid #D4AF37":"1px solid #666",backgroundColor:l[o.pathCompanionId]==="keep-both"?"#B34B0C":"#524944",color:"white",cursor:"pointer",fontSize:"0.875rem"},children:"Keep Both"}),e.jsx("button",{onClick:()=>v({...l,[o.pathCompanionId]:"skip"}),style:{flex:1,padding:"0.5rem 1rem",borderRadius:"0.375rem",border:l[o.pathCompanionId]==="skip"?"2px solid #D4AF37":"1px solid #666",backgroundColor:l[o.pathCompanionId]==="skip"?"#666":"#524944",color:"white",cursor:"pointer",fontSize:"0.875rem"},children:"Skip"})]})]},o.pathCompanionId)),e.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",backgroundColor:"#37322E",borderRadius:"0.5rem"},children:e.jsxs("p",{style:{color:"#B3B2B0",fontSize:"0.875rem"},children:[e.jsx("strong",{children:ie.length})," new character(s) will be imported without conflicts."]})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[e.jsx("button",{onClick:()=>T(!1),disabled:p,style:{flex:1,backgroundColor:"#666",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",cursor:p?"not-allowed":"pointer",opacity:p?.6:1},children:"Cancel"}),e.jsx("button",{onClick:fe,disabled:p||w.some(o=>!l[o.pathCompanionId]),style:{flex:1,backgroundColor:"#B34B0C",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",cursor:p||w.some(o=>!l[o.pathCompanionId])?"not-allowed":"pointer",opacity:p||w.some(o=>!l[o.pathCompanionId])?.6:1},children:p?"Importing...":"Import Characters"})]})]})}),le&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:e.jsxs("div",{style:{backgroundColor:"#4A4540",borderRadius:"0.75rem",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflow:"auto",padding:"2rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"white",marginBottom:"1rem"},children:"Character Name Conflicts (Tupperbox)"}),e.jsxs("p",{style:{color:"#B3B2B0",marginBottom:"1.5rem"},children:["Found ",j.length," character(s) with matching names in your existing characters. Choose how to handle each conflict:"]}),j.map(o=>e.jsxs("div",{style:{backgroundColor:"#37322E",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[e.jsx("div",{style:{color:"white",fontWeight:"bold"},children:o.tupperName}),e.jsx("div",{style:{color:"#B3B2B0",fontSize:"0.875rem"},children:"Exists in Warden"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>D({...d,[o.tupperName]:"merge"}),style:{flex:"1 1 auto",backgroundColor:d[o.tupperName]==="merge"?"#B34B0C":"#524944",color:"white",padding:"0.5rem 1rem",borderRadius:"0.375rem",border:d[o.tupperName]==="merge"?"2px solid #D4AF37":"2px solid transparent",cursor:"pointer"},children:"Merge/Update"}),e.jsx("button",{onClick:()=>D({...d,[o.tupperName]:"keep-both"}),style:{flex:"1 1 auto",backgroundColor:d[o.tupperName]==="keep-both"?"#B34B0C":"#524944",color:"white",padding:"0.5rem 1rem",borderRadius:"0.375rem",border:d[o.tupperName]==="keep-both"?"2px solid #D4AF37":"2px solid transparent",cursor:"pointer"},children:"Keep Both"}),e.jsx("button",{onClick:()=>D({...d,[o.tupperName]:"skip"}),style:{flex:"1 1 auto",backgroundColor:d[o.tupperName]==="skip"?"#B34B0C":"#524944",color:"white",padding:"0.5rem 1rem",borderRadius:"0.375rem",border:d[o.tupperName]==="skip"?"2px solid #D4AF37":"2px solid transparent",cursor:"pointer"},children:"Skip"})]})]},o.tupperName)),e.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",backgroundColor:"#37322E",borderRadius:"0.5rem"},children:e.jsxs("p",{style:{color:"#B3B2B0",fontSize:"0.875rem"},children:[e.jsx("strong",{children:de.length})," new character(s) will be imported without conflicts."]})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[e.jsx("button",{onClick:()=>P(!1),disabled:m,style:{flex:1,backgroundColor:"#666",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",cursor:m?"not-allowed":"pointer",opacity:m?.6:1},children:"Cancel"}),e.jsx("button",{onClick:je,disabled:m||j.some(o=>!d[o.tupperName]),style:{flex:1,backgroundColor:"#B34B0C",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",cursor:m||j.some(o=>!d[o.tupperName])?"not-allowed":"pointer",opacity:m||j.some(o=>!d[o.tupperName])?.6:1},children:m?"Importing...":"Import Characters"})]})]})})]})]})}export{Te as ProfileSettings};
